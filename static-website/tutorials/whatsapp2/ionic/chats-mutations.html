<!DOCTYPE html><html lang="en"><head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic,800italic" rel="stylesheet" type="text/css">
    <title>Angular2-Meteor</title>
    <meta charset="UTF-8">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <base href="/">
    <style>.logo[_ngcontent-dkq-1] {
  width: auto;
  height: 2em; }

.main-toolbar[_ngcontent-dkq-1] {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  box-shadow: 3px 0 6px rgba(0, 0, 0, 0.3);
  background: #90A4AE; }
  .main-toolbar[_ngcontent-dkq-1] a[_ngcontent-dkq-1] {
    color: white;
    text-decoration: none; }

.fill-remaining-space[_ngcontent-dkq-1] {
  -ms-flex: 1 1 auto;
      flex: 1 1 auto; }

.tutorials-dropdown[_ngcontent-dkq-1] {
  position: relative;
  display: inline-block; }
  .tutorials-dropdown[_ngcontent-dkq-1] .dropdown-content[_ngcontent-dkq-1] {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 500px;
    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    padding: 7px; }

.tutorials-dropdown[_ngcontent-dkq-1]:hover .dropdown-content[_ngcontent-dkq-1] {
  display: block; }</style><style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0; }

/* Base color: saturation 0; */
.hljs,
.hljs-subst {
  color: #444; }

.hljs-comment {
  color: #888888; }

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold; }

/* User color: hue: 0 */
.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000; }

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold; }

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060; }

/* Language color: hue: 90; */
.hljs-literal {
  color: #78A960; }

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300; }

/* Meta color: hue: 200 */
.hljs-meta {
  color: #1f7199; }

.hljs-meta-string {
  color: #4d99bf; }

/* Misc effects */
.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8; }

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic; }

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold; }

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080; }

.hljs-string,
.hljs-doctag {
  color: #d14; }

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold; }

.hljs-subst {
  font-weight: normal; }

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold; }

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal; }

.hljs-regexp,
.hljs-link {
  color: #009926; }

.hljs-symbol,
.hljs-bullet {
  color: #990073; }

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3; }

.hljs-meta {
  color: #999;
  font-weight: bold; }

.hljs-deletion {
  background: #fdd; }

.hljs-addition {
  background: #dfd; }

.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

a {
  color: black; }

body {
  padding: 0;
  margin: 0;
  padding-top: 64px;
  font-family: 'Open Sans', sans-serif; }

pre {
  background: transparent;
  border: none;
  white-space: pre-wrap; }

code {
  white-space: pre-wrap; }

img[alt="angular1-wa-ionic-cli"], img[alt="angular1-wa-meteor-cli"] {
  width: 30%; }

.side-nav .step-item, .side-nav .api-list-item {
  margin: 0;
  padding: 0;
  border-bottom: 1px solid #CFD8DC;
  color: #546E7A; }

.side-nav .step-link, .side-nav .api-item-link, .side-nav .apis-versions-list li {
  text-decoration: none;
  color: #536E7A;
  display: block;
  font-size: 14px;
  padding: 16px 16px;
  margin: 0;
  background-color: #ECEFF1; }

.side-nav .active-step a {
  font-weight: bold; }

.side-nav .tutorial-steps-list, .side-nav .apis-list, .side-nav .apis-versions-list {
  list-style: none;
  padding-left: 0;
  margin-top: 8px; }

.apis-versions-list {
  margin: 0 !important; }
  .apis-versions-list li {
    padding: 8px !important; }
    .apis-versions-list li a {
      text-decoration: none; }

.dropdown-content {
  column-count: 2;
  column-width: 220px;
  column-rule: 1px solid #ECEFF1;
  column-gap: 0; }
  .dropdown-content .tutorial-steps-list {
    margin: 0 !important;
    list-style: none;
    padding: 0; }
    .dropdown-content .tutorial-steps-list .step-item {
      padding: 5px 0 5px 10px;
      border-bottom: 1px solid #ECEFF1;
      break-inside: avoid-column; }
      .dropdown-content .tutorial-steps-list .step-item a {
        text-decoration: none;
        font-size: small;
        color: black; }
      .dropdown-content .tutorial-steps-list .step-item .bold {
        font-weight: bold; }

.md-primary {
  background: #263238 !important;
  color: white !important;
  cursor: pointer !important; }
  .md-primary[disabled] {
    color: lightgray !important;
    cursor: not-allowed !important; }

tutorial-page-content pre code[ngnonbindable] {
  background: #eee;
  display: block;
  width: 90%;
  border-radius: 5px;
  padding: 10px; }

tutorial-page-content blockquote {
  margin: 0;
  position: relative;
  background: #eee;
  border-radius: 5px; }
  tutorial-page-content blockquote:before {
    content: '!';
    font-weight: bold;
    position: absolute;
    vertical-align: top;
    font-size: 2vw;
    color: white;
    margin-left: 6px; }
  tutorial-page-content blockquote p {
    border-left: 1px solid white;
    padding: 10px;
    margin-left: 20px; }

.diffbox {
  border-radius: 10px; }
  .diffbox .title-panel {
    border-radius: 10px 10px 0 0; }
  .diffbox .code-container {
    border-radius: 0 0 10px 10px; }

api-ref-container p code, api-ref-container ul li code {
  font-family: 'Open Sans', sans-serif; }

api-ref-container a {
  color: #263238;
  text-decoration: none;
  font-weight: bold; }

api-ref-container h3 {
  background: #eee;
  border-radius: 5px;
  padding: 4px;
  margin-top: 30px; }

api-ref-container table {
  width: 100%;
  background: #eee;
  border-radius: 5px;
  border-spacing: 0; }
  api-ref-container table thead {
    background: #546E7A;
    color: #eee;
    border-radius: 5px; }
    api-ref-container table thead tr {
      background: #546E7A;
      border-radius: 5px; }
      api-ref-container table thead tr th {
        padding: 6px; }
  api-ref-container table tbody td {
    padding: 5px; }
</style><style>/** * Mixin that creates a new stacking context. * see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */ /** * This mixin hides an element visually. * That means it's still accessible for screen-readers but not visible in view. */ /** * Forces an element to grow to fit floated contents; used as as an alternative to * `overflow: hidden;` because it doesn't cut off contents. */ /** * A mixin, which generates temporary ink ripple on a given component. * When $bindToParent is set to true, it will check for the focused class on the same selector as you included * that mixin. * It is also possible to specify the color palette of the temporary ripple. By default it uses the * accent palette for its background. */ md-toolbar { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; min-height: 64px; font-size: 20px; font-weight: 400; font-family: Roboto, "Helvetica Neue", sans-serif; padding: 0 16px; -webkit-box-orient: vertical; -webkit-box-direction: normal; -ms-flex-direction: column; flex-direction: column; background: whitesmoke; color: rgba(0, 0, 0, 0.87); } md-toolbar.md-primary { background: #009688; color: white; } md-toolbar.md-accent { background: #9c27b0; color: rgba(255, 255, 255, 0.870588); } md-toolbar.md-warn { background: #f44336; color: white; } md-toolbar md-toolbar-row { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; height: 64px; -webkit-box-orient: horizontal; -webkit-box-direction: normal; -ms-flex-direction: row; flex-direction: row; -webkit-box-align: center; -ms-flex-align: center; align-items: center; } </style><style>/** * A collection of mixins and CSS classes that can be used to apply elevation to a material * element. * See: https://www.google.com/design/spec/what-is-material/elevation-shadows.html * Examples: * * * .md-foo { *   @include $md-elevation(2); * *   &:active { *     @include $md-elevation(8); *   } * } * * <div id="external-card" class="md-elevation-z2"><p>Some content</p></div> * * For an explanation of the design behind how elevation is implemented, see the design doc at * https://goo.gl/Kq0k9Z. */ /** * The css property used for elevation. In most cases this should not be changed. It is exposed * as a variable for abstraction / easy use when needing to reference the property directly, for * example in a will-change rule. */ /** The default duration value for elevation transitions. */ /** The default easing value for elevation transitions. */ /** * Applies the correct css rules to an element to give it the elevation specified by $zValue. * The $zValue must be between 0 and 24. */ /** * Returns a string that can be used as the value for a transition property for elevation. * Calling this function directly is useful in situations where a component needs to transition * more than one property. * * .foo { *   transition: md-elevation-transition-property-value(), opacity 100ms ease; *   will-change: $md-elevation-property, opacity; * } */ /** * Applies the correct css rules needed to have an element transition between elevations. * This mixin should be applied to elements whose elevation values will change depending on their * context (e.g. when active or disabled). */ /** Applies a property to an md-button element for each of the supported palettes. */ /** Applies a focus style to an md-button element for each of the supported palettes. */ [md-raised-button], [md-fab], [md-mini-fab], [md-button], [md-icon-button] { box-sizing: border-box; position: relative; background: transparent; text-align: center; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; outline: none; border: none; display: inline-block; white-space: nowrap; text-decoration: none; vertical-align: baseline; font-size: 14px; font-family: Roboto, "Helvetica Neue", sans-serif; font-weight: 500; color: currentColor; margin: 0; min-width: 88px; line-height: 36px; padding: 0 16px; border-radius: 3px; } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab], .md-primary[md-button], .md-primary[md-icon-button] { color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab], .md-accent[md-button], .md-accent[md-icon-button] { color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab], .md-warn[md-button], .md-warn[md-icon-button] { color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-primary[disabled][md-button], .md-primary[disabled][md-icon-button], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-accent[disabled][md-button], .md-accent[disabled][md-icon-button], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], .md-warn[disabled][md-button], .md-warn[disabled][md-icon-button], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab], [disabled][disabled][md-button], [disabled][disabled][md-icon-button] { color: rgba(0, 0, 0, 0.38); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab], [disabled][md-button], [disabled][md-icon-button] { cursor: default; } .md-button-focus[md-raised-button]::after, .md-button-focus[md-fab]::after, .md-button-focus[md-mini-fab]::after, .md-button-focus[md-button]::after, .md-button-focus[md-icon-button]::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } .md-button-focus.md-primary[md-raised-button]::after, .md-button-focus.md-primary[md-fab]::after, .md-button-focus.md-primary[md-mini-fab]::after, .md-button-focus.md-primary[md-button]::after, .md-button-focus.md-primary[md-icon-button]::after { background-color: rgba(0, 150, 136, 0.12); } .md-button-focus.md-accent[md-raised-button]::after, .md-button-focus.md-accent[md-fab]::after, .md-button-focus.md-accent[md-mini-fab]::after, .md-button-focus.md-accent[md-button]::after, .md-button-focus.md-accent[md-icon-button]::after { background-color: rgba(156, 39, 176, 0.12); } .md-button-focus.md-warn[md-raised-button]::after, .md-button-focus.md-warn[md-fab]::after, .md-button-focus.md-warn[md-mini-fab]::after, .md-button-focus.md-warn[md-button]::after, .md-button-focus.md-warn[md-icon-button]::after { background-color: rgba(244, 67, 54, 0.12); } [md-raised-button], [md-fab], [md-mini-fab] { box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); background-color: #fafafa; -webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0); -webkit-transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { color: white; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { color: rgba(255, 255, 255, 0.870588); } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { color: white; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { color: rgba(0, 0, 0, 0.38); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { background-color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { background-color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { background-color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { background-color: rgba(0, 0, 0, 0.12); } [md-raised-button]:active, [md-fab]:active, [md-mini-fab]:active { box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab] { box-shadow: none; } [md-button][disabled]:hover.md-primary, [md-button][disabled]:hover.md-accent, [md-button][disabled]:hover.md-warn, [md-button][disabled]:hover:hover { background-color: transparent; } [md-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 56px; height: 56px; padding: 0; } [md-fab] i, [md-fab] md-icon { padding: 16px 0; } [md-mini-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 40px; height: 40px; padding: 0; } [md-mini-fab] i, [md-mini-fab] md-icon { padding: 8px 0; } [md-icon-button] { min-width: 0; padding: 0; width: 40px; height: 40px; line-height: 24px; border-radius: 50%; } [md-icon-button] .md-button-wrapper > * { vertical-align: middle; } [md-button]:hover::after, [md-icon-button]:hover::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } [md-button]:hover.md-primary::after, [md-icon-button]:hover.md-primary::after { background-color: rgba(0, 150, 136, 0.12); } [md-button]:hover.md-accent::after, [md-icon-button]:hover.md-accent::after { background-color: rgba(156, 39, 176, 0.12); } [md-button]:hover.md-warn::after, [md-icon-button]:hover.md-warn::after { background-color: rgba(244, 67, 54, 0.12); } @media screen and (-ms-high-contrast: active) { .md-raised-button, .md-fab, .md-mini-fab { border: 1px solid #fff; } } </style><style>.side-nav[_ngcontent-dkq-6] {
  background: #ECEFF1;
  width: 232px;
  bottom: 0;
  overflow: auto;
  z-index: 100;
  border-right: 1px solid rgba(0, 0, 0, 0.3); }
  .side-nav[_ngcontent-dkq-6] ul[_ngcontent-dkq-6] {
    margin-top: 8px; }

tutorials-versions[_ngcontent-dkq-6] {
  margin-left: 10px;
  margin-top: 10px;
  display: block; }

.improv-button[_ngcontent-dkq-6] {
  margin-left: 50px; }

.right-buttons[_ngcontent-dkq-6] {
  float: right;
  margin-right: 250px;
  margin-top: 10px; }

.tutorial-title[_ngcontent-dkq-6] {
  margin: 15px;
  float: left;
  font-size: larger;
  font-weight: bold; }

.top-navigation[_ngcontent-dkq-6] {
  position: fixed;
  margin-top: -60px;
  width: 100%;
  background-color: #ECEFF1;
  height: 60px;
  z-index: 50; }

.tutorial-content[_ngcontent-dkq-6] {
  margin-top: 60px;
  padding: 20px; }

.tutorials-container[_ngcontent-dkq-6] {
  padding-left: 230px; }

.l-pinned-top[_ngcontent-dkq-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px; }

.l-pinned-left[_ngcontent-dkq-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px; }

.l-left[_ngcontent-dkq-6] {
  float: left; }

.l-right[_ngcontent-dkq-6] {
  float: right; }

.l-relative[_ngcontent-dkq-6], .docs-content[_ngcontent-dkq-6] {
  position: relative; }

.l-absolute[_ngcontent-dkq-6] {
  position: absolute; }

.l-fixed[_ngcontent-dkq-6] {
  position: fixed; }

.l-offset-side-nav[_ngcontent-dkq-6] {
  padding-left: 232px; }

.l-offset-nav[_ngcontent-dkq-6] {
  padding-top: 64px; }</style><style>.tutorial-version[_ngcontent-dkq-7] {
            margin-left: 10px;
        }
        
        .active[_ngcontent-dkq-7] {
            color: #b3e5fc !important;
        }</style><style>.diffbox[_ngcontent-dkq-12] {
  border: 1px solid #eee;
  -webkit-text-size-adjust: 100%;
  margin: 1.5em 0; }
  .diffbox[_ngcontent-dkq-12] .title-panel[_ngcontent-dkq-12] {
    padding: 5px 12px;
    background: #eee;
    border-bottom: solid 1px #eee;
    color: #333;
    overflow: auto; }
    .diffbox[_ngcontent-dkq-12] .title-panel[_ngcontent-dkq-12] .github-commit-link[_ngcontent-dkq-12] {
      float: right;
      color: black;
      text-decoration: none;
      border-bottom: none !important; }
  .diffbox[_ngcontent-dkq-12] .code-container[_ngcontent-dkq-12] {
    overflow-x: auto;
    position: relative;
    padding: 9px 3px 3px 0;
    background: #f8f8f8; }
    .diffbox[_ngcontent-dkq-12] .code-container[_ngcontent-dkq-12] .scroll-container[_ngcontent-dkq-12] {
      display: inline-block;
      min-width: 100%;
      overflow: hidden; }
    .diffbox[_ngcontent-dkq-12] .code-container[_ngcontent-dkq-12] pre[_ngcontent-dkq-12] {
      margin: 0;
      padding: 0;
      background-color: transparent; }
      .diffbox[_ngcontent-dkq-12] .code-container[_ngcontent-dkq-12] pre.line-added[_ngcontent-dkq-12] {
        background: #eaffea; }
      .diffbox[_ngcontent-dkq-12] .code-container[_ngcontent-dkq-12] pre.line-removed[_ngcontent-dkq-12] {
        background: #ff9ea2; }
    .diffbox[_ngcontent-dkq-12] .code-container[_ngcontent-dkq-12] .line-content[_ngcontent-dkq-12] {
      padding-left: 36px;
      overflow: hidden; }
      .diffbox[_ngcontent-dkq-12] .code-container[_ngcontent-dkq-12] .line-content[_ngcontent-dkq-12] .hljs-comment[_ngcontent-dkq-12] {
        color: #777; }
    .diffbox[_ngcontent-dkq-12] .code-container[_ngcontent-dkq-12] .line-numbers[_ngcontent-dkq-12] {
      text-align: right;
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      -o-user-select: none;
      position: absolute;
      width: 25px; }
      .diffbox[_ngcontent-dkq-12] .code-container[_ngcontent-dkq-12] .line-numbers[_ngcontent-dkq-12] .line-number[_ngcontent-dkq-12] {
        color: #aaa;
        font-style: italic; }</style></head><body><universal-styles></universal-styles>


<app _nghost-dkq-1=""><md-toolbar _ngcontent-dkq-1="" class="main-toolbar md-primary"><div class="md-toolbar-layout"> <md-toolbar-row> 
    <a _ngcontent-dkq-1="" href="/"><img _ngcontent-dkq-1="" class="logo" src="/assets/images/logo.png"></a>
    <div _ngcontent-dkq-1="" class="tutorials-dropdown">
        <button _ngcontent-dkq-1="" md-button=""><span class="md-button-wrapper">Tutorials</span> </button>
        <div _ngcontent-dkq-1="" class="dropdown-content">
            <steps-list _ngcontent-dkq-1="" prefix="/tutorials/socially"><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/folder-structure">8. Folder Structure</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/css-sass-and-bootstrap">18. CSS, SASS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ionic2">23. Ionic2</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/next-steps">25. Next Steps</a>
    </li>
    <!--template bindings={}--><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/whatsapp">WhatsApp clone with Angular &amp; Meteor</a>
    </li><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/migration/angular2/introduction">Blaze to Angular 2 Migration tutorial</a>
    </li>
</ul>
</steps-list>
        </div>
    </div>
    <a _ngcontent-dkq-1="" href="/angular2/"><button _ngcontent-dkq-1="" md-button=""><span class="md-button-wrapper">Angular 2</span> </button></a>
    <a _ngcontent-dkq-1="" href="/api/angular2-meteor/latest/MeteorComponent"><button _ngcontent-dkq-1="" md-button=""><span class="md-button-wrapper">API Reference</span> </button></a>
    <span _ngcontent-dkq-1="" class="fill-remaining-space"></span>
    <a _ngcontent-dkq-1="" href="https://github.com/Urigo/angular2-meteor" target="_blank"><button _ngcontent-dkq-1="" md-button=""><span class="md-button-wrapper">GitHub</span> </button></a>
    <a _ngcontent-dkq-1="" href="http://info.meteor.com/blog/author/uri-goldshtein?__hstc=219992390.b4a81f3b906b078dac633307097097f5.1471207723059.1471890076881.1471938647239.7&amp;__hssc=219992390.3.1471938647239&amp;__hsfp=714783454" target="_blank"><button _ngcontent-dkq-1="" md-button=""><span class="md-button-wrapper">Blog</span> </button></a>
    <a _ngcontent-dkq-1="" href="https://docs.google.com/forms/d/e/1FAIpQLSed3JZ0EAcSzkX8Y-iEtvNQRfjeyP2ICQvYMs00ewdmKaplwA/viewform" target="_blank"><button _ngcontent-dkq-1="" md-button=""><span class="md-button-wrapper">Contact Us</span> </button></a>
    <a _ngcontent-dkq-1="" href="/manifesto"><button _ngcontent-dkq-1="" md-button=""><span class="md-button-wrapper">Manifesto</span> </button></a>
    <a _ngcontent-dkq-1="" href="/about"><button _ngcontent-dkq-1="" md-button=""><span class="md-button-wrapper">About us</span> </button></a>
 </md-toolbar-row>  </div></md-toolbar>
<router-outlet _ngcontent-dkq-1=""></router-outlet><tutorial _nghost-dkq-6=""><div _ngcontent-dkq-6="" class="tutorials-container">
    <nav _ngcontent-dkq-6="" class="side-nav l-pinned-left l-layer-4 l-offset-nav">
        <tutorials-versions _ngcontent-dkq-6="" _nghost-dkq-7=""><!--template bindings={}--></tutorials-versions>
        <steps-list _ngcontent-dkq-6=""><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/setup">1. Initial setup</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/chats-page">2. Chats page</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/meteor-server-side">3. Realtime Meteor Server</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/messages-page">4. Messages Page</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/authentication">5. Authentication</a>
    </li><li class="step-item active-step" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/chats-mutations">6. Chats Creation &amp; Removal</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/privacy">7. Privacy &amp; Security</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/summary">8. Summary</a>
    </li>
    <!--template bindings={}-->
</ul>
</steps-list>
    </nav>
    <div _ngcontent-dkq-6="" class="top-navigation">
        <span _ngcontent-dkq-6="" class="tutorial-title" stepName="">Chats Creation &amp; Removal</span>
        <div _ngcontent-dkq-6="" class="right-buttons">
            <a _ngcontent-dkq-6="" class="md-primary" md-raised-button="" tutorialNavigation="previous" href="/tutorials/whatsapp2/ionic/authentication">Previous</a>
            <a _ngcontent-dkq-6="" class="md-primary" codeDiffLink="" md-raised-button="" href="https://github.com/DAB0mB/ionic2-meteor-messenger/compare/step_04...step_05">Code Diff</a>
            <a _ngcontent-dkq-6="" class="md-primary" md-raised-button="" tutorialNavigation="next" href="/tutorials/whatsapp2/ionic/privacy">Next</a>
            <a _ngcontent-dkq-6="" class="md-primary improv-button" md-raised-button="" href="https://github.com/Urigo/tutorial-infrastructure/edit/master/static-website/tutorials/whatsapp2/ionic/chats-mutations.html">Improve This Document</a>
        </div>
    </div>
    <div _ngcontent-dkq-6="" class="tutorial-content">
        <router-outlet _ngcontent-dkq-6=""></router-outlet><tutorial-page><div class="tutorial-container"></div></tutorial-page><tutorial-page-content><p>Our next step is about adding the ability to create new chats. So far we had the chats list and the users feature, we just need to connect them.</p>

<p>We will open the new chat view using Ionic's modal dialog. The dialog is gonna pop up from the chats view once we click on the icon at the top right corner of the view. Let's implement the handler in the chats component first:</p>

<p><diffbox step="6.1" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.1</span> <span _ngcontent-dkq-12="" class="commit-summary">Add 'addChat()' method to chats component</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/ebb094479aaee17f27d0d5ea546ef9b077526719">app/pages/chats/chats.ts</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">1</pre><pre _ngcontent-dkq-12="" class="line-number">2</pre><pre _ngcontent-dkq-12="" class="line-number">3</pre><pre _ngcontent-dkq-12="" class="line-number">4</pre><pre _ngcontent-dkq-12="" class="line-number">5</pre><pre _ngcontent-dkq-12="" class="line-number"> </pre><pre _ngcontent-dkq-12="" class="line-number">7</pre><pre _ngcontent-dkq-12="" class="line-number">8</pre><pre _ngcontent-dkq-12="" class="line-number">9</pre><pre _ngcontent-dkq-12="" class="line-number">10</pre><pre _ngcontent-dkq-12="" class="line-number">11</pre><pre _ngcontent-dkq-12="" class="line-number">12</pre><pre _ngcontent-dkq-12="" class="line-number">13</pre><pre _ngcontent-dkq-12="" class="line-number"> </pre><pre _ngcontent-dkq-12="" class="line-number">25</pre><pre _ngcontent-dkq-12="" class="line-number">26</pre><pre _ngcontent-dkq-12="" class="line-number">27</pre><pre _ngcontent-dkq-12="" class="line-number">28</pre><pre _ngcontent-dkq-12="" class="line-number">29</pre><pre _ngcontent-dkq-12="" class="line-number">30</pre><pre _ngcontent-dkq-12="" class="line-number">31</pre><pre _ngcontent-dkq-12="" class="line-number">32</pre><pre _ngcontent-dkq-12="" class="line-number">33</pre><pre _ngcontent-dkq-12="" class="line-number">34</pre><pre _ngcontent-dkq-12="" class="line-number">35</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Component} from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {NavController, Modal, Popover} from <span class="hljs-string">'ionic-angular'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {MeteorComponent} from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {CalendarPipe} from <span class="hljs-string">'angular2-moment'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Mongo} from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-dkq-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Chats, Messages} from <span class="hljs-string">'api/collections'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {MessagesPage} from <span class="hljs-string">'../messages/messages'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {ChatsOptionsPage} from <span class="hljs-string">'../chats-options/chats-options'</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {NewChatPage} from <span class="hljs-string">'../new-chat/new-chat'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">@Component({</pre><pre _ngcontent-dkq-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    });</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  addChat(): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> modal = Modal.create(NewChatPage);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.navCtrl.present(modal);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  removeChat(chat): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    Chats.remove(chat._id);</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  }</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And let's bind the event to the view:</p>

<p><diffbox step="6.2" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.2</span> <span _ngcontent-dkq-12="" class="commit-summary">Bind 'addChat()' event to chats view template</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/1597247037b22acaa8fca962fbc8be35f65b66de">app/pages/chats/chats.html</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">3</pre><pre _ngcontent-dkq-12="" class="line-number">4</pre><pre _ngcontent-dkq-12="" class="line-number">5</pre><pre _ngcontent-dkq-12="" class="line-number">6</pre><pre _ngcontent-dkq-12="" class="line-number">7</pre><pre _ngcontent-dkq-12="" class="line-number">8</pre><pre _ngcontent-dkq-12="" class="line-number">9</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">ion-title</span>&gt;</span>Chats<span class="hljs-tag">&lt;/<span class="hljs-name">ion-title</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">ion-buttons</span> <span class="hljs-attr">end</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"add-chat-button"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"addChat()"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">ion-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"person-add"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ion-icon</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"options-button"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"showOptions()"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">ion-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"more"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ion-icon</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;/<span class="hljs-name">ion-buttons</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-navbar</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>The dialog should contain a list of all the users whom chat does not exist yet. Once we click on one of these users we should be demoted to the chats view with the new chat we've just created.</p>

<p>Since we wanna insert a new chat we need to create the corresponding method in the <code ngNonBindable="">methods.ts</code> file:</p>

<p><diffbox step="6.3" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.3</span> <span _ngcontent-dkq-12="" class="commit-summary">Add 'addChat()' method to api</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/622c9b3e27e21a205a865859e1a361598db8817c">api/server/methods.ts</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">24</pre><pre _ngcontent-dkq-12="" class="line-number">25</pre><pre _ngcontent-dkq-12="" class="line-number">26</pre><pre _ngcontent-dkq-12="" class="line-number">27</pre><pre _ngcontent-dkq-12="" class="line-number">28</pre><pre _ngcontent-dkq-12="" class="line-number">29</pre><pre _ngcontent-dkq-12="" class="line-number">30</pre><pre _ngcontent-dkq-12="" class="line-number">31</pre><pre _ngcontent-dkq-12="" class="line-number">32</pre><pre _ngcontent-dkq-12="" class="line-number">33</pre><pre _ngcontent-dkq-12="" class="line-number">34</pre><pre _ngcontent-dkq-12="" class="line-number">35</pre><pre _ngcontent-dkq-12="" class="line-number">36</pre><pre _ngcontent-dkq-12="" class="line-number">37</pre><pre _ngcontent-dkq-12="" class="line-number">38</pre><pre _ngcontent-dkq-12="" class="line-number">39</pre><pre _ngcontent-dkq-12="" class="line-number">40</pre><pre _ngcontent-dkq-12="" class="line-number">41</pre><pre _ngcontent-dkq-12="" class="line-number">42</pre><pre _ngcontent-dkq-12="" class="line-number">43</pre><pre _ngcontent-dkq-12="" class="line-number">44</pre><pre _ngcontent-dkq-12="" class="line-number">45</pre><pre _ngcontent-dkq-12="" class="line-number">46</pre><pre _ngcontent-dkq-12="" class="line-number">47</pre><pre _ngcontent-dkq-12="" class="line-number">48</pre><pre _ngcontent-dkq-12="" class="line-number">49</pre><pre _ngcontent-dkq-12="" class="line-number">50</pre><pre _ngcontent-dkq-12="" class="line-number">51</pre><pre _ngcontent-dkq-12="" class="line-number">52</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    });</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  },</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  addChat(receiverId: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'unauthorized'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-string">'User must be logged-in to create a new chat'</span>);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    check(receiverId, nonEmptyString);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (receiverId == <span class="hljs-keyword">this</span>.userId) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'illegal-receiver'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-string">'Receiver must be different than the current logged in user'</span>);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> chatExists = !!Chats.find({</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      memberIds: {$all: [<span class="hljs-keyword">this</span>.userId, receiverId]}</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    }).count();</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (chatExists) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'chat-exists'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-string">'Chat already exists'</span>);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> chat = {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      memberIds: [<span class="hljs-keyword">this</span>.userId, receiverId]</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    };</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    Chats.insert(chat);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  },</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  addMessage(chatId: <span class="hljs-built_in">string</span>, content: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'unauthorized'</span>,</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">      <span class="hljs-string">'User must be logged-in to create a new chat'</span>);</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>As you can see, a chat is inserted with an additional <code ngNonBindable="">memberIds</code> feild. Let's update the chat model accordingly:</p>

<p><diffbox step="6.4" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.4</span> <span _ngcontent-dkq-12="" class="commit-summary">Add 'memberIds' property to chat model</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/7c6659ace585cb3132d18e552b5d74589440dbde">typings/models.d.ts</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">6</pre><pre _ngcontent-dkq-12="" class="line-number">7</pre><pre _ngcontent-dkq-12="" class="line-number">8</pre><pre _ngcontent-dkq-12="" class="line-number">9</pre><pre _ngcontent-dkq-12="" class="line-number">10</pre><pre _ngcontent-dkq-12="" class="line-number">11</pre><pre _ngcontent-dkq-12="" class="line-number">12</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  <span class="hljs-keyword">interface</span> Chat {</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    _id?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    memberIds?: <span class="hljs-built_in">string</span>[];</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    title?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    picture?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    lastMessage?: Message;</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now that we have the method ready we can go ahead and implement the new chat dialog:</p>

<p><diffbox step="6.5" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.5</span> <span _ngcontent-dkq-12="" class="commit-summary">Add new-chat component</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/f3b91af3f26613c3caee0e68ba6e183ced79957f">app/pages/new-chat/new-chat.ts</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">1</pre><pre _ngcontent-dkq-12="" class="line-number">2</pre><pre _ngcontent-dkq-12="" class="line-number">3</pre><pre _ngcontent-dkq-12="" class="line-number">4</pre><pre _ngcontent-dkq-12="" class="line-number">5</pre><pre _ngcontent-dkq-12="" class="line-number">6</pre><pre _ngcontent-dkq-12="" class="line-number">7</pre><pre _ngcontent-dkq-12="" class="line-number">8</pre><pre _ngcontent-dkq-12="" class="line-number">9</pre><pre _ngcontent-dkq-12="" class="line-number">10</pre><pre _ngcontent-dkq-12="" class="line-number">11</pre><pre _ngcontent-dkq-12="" class="line-number">12</pre><pre _ngcontent-dkq-12="" class="line-number">13</pre><pre _ngcontent-dkq-12="" class="line-number">14</pre><pre _ngcontent-dkq-12="" class="line-number">15</pre><pre _ngcontent-dkq-12="" class="line-number">16</pre><pre _ngcontent-dkq-12="" class="line-number">17</pre><pre _ngcontent-dkq-12="" class="line-number">18</pre><pre _ngcontent-dkq-12="" class="line-number">19</pre><pre _ngcontent-dkq-12="" class="line-number">20</pre><pre _ngcontent-dkq-12="" class="line-number">21</pre><pre _ngcontent-dkq-12="" class="line-number">22</pre><pre _ngcontent-dkq-12="" class="line-number">23</pre><pre _ngcontent-dkq-12="" class="line-number">24</pre><pre _ngcontent-dkq-12="" class="line-number">25</pre><pre _ngcontent-dkq-12="" class="line-number">26</pre><pre _ngcontent-dkq-12="" class="line-number">27</pre><pre _ngcontent-dkq-12="" class="line-number">28</pre><pre _ngcontent-dkq-12="" class="line-number">29</pre><pre _ngcontent-dkq-12="" class="line-number">30</pre><pre _ngcontent-dkq-12="" class="line-number">31</pre><pre _ngcontent-dkq-12="" class="line-number">32</pre><pre _ngcontent-dkq-12="" class="line-number">33</pre><pre _ngcontent-dkq-12="" class="line-number">34</pre><pre _ngcontent-dkq-12="" class="line-number">35</pre><pre _ngcontent-dkq-12="" class="line-number">36</pre><pre _ngcontent-dkq-12="" class="line-number">37</pre><pre _ngcontent-dkq-12="" class="line-number">38</pre><pre _ngcontent-dkq-12="" class="line-number">39</pre><pre _ngcontent-dkq-12="" class="line-number">40</pre><pre _ngcontent-dkq-12="" class="line-number">41</pre><pre _ngcontent-dkq-12="" class="line-number">42</pre><pre _ngcontent-dkq-12="" class="line-number">43</pre><pre _ngcontent-dkq-12="" class="line-number">44</pre><pre _ngcontent-dkq-12="" class="line-number">45</pre><pre _ngcontent-dkq-12="" class="line-number">46</pre><pre _ngcontent-dkq-12="" class="line-number">47</pre><pre _ngcontent-dkq-12="" class="line-number">48</pre><pre _ngcontent-dkq-12="" class="line-number">49</pre><pre _ngcontent-dkq-12="" class="line-number">50</pre><pre _ngcontent-dkq-12="" class="line-number">51</pre><pre _ngcontent-dkq-12="" class="line-number">52</pre><pre _ngcontent-dkq-12="" class="line-number">53</pre><pre _ngcontent-dkq-12="" class="line-number">54</pre><pre _ngcontent-dkq-12="" class="line-number">55</pre><pre _ngcontent-dkq-12="" class="line-number">56</pre><pre _ngcontent-dkq-12="" class="line-number">57</pre><pre _ngcontent-dkq-12="" class="line-number">58</pre><pre _ngcontent-dkq-12="" class="line-number">59</pre><pre _ngcontent-dkq-12="" class="line-number">60</pre><pre _ngcontent-dkq-12="" class="line-number">61</pre><pre _ngcontent-dkq-12="" class="line-number">62</pre><pre _ngcontent-dkq-12="" class="line-number">63</pre><pre _ngcontent-dkq-12="" class="line-number">64</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Component} from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {MeteorComponent} from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {NavController, ViewController, Alert} from <span class="hljs-string">'ionic-angular'</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Mongo} from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Chats} from <span class="hljs-string">'api/collections'</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">@Component({</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  templateUrl: <span class="hljs-string">'build/pages/new-chat/new-chat.html'</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">})</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> NewChatPage extends MeteorComponent {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  users: Mongo.Cursor&lt;Meteor.User&gt;;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-keyword">private</span> senderId: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-keyword">constructor</span>(private navCtrl: NavController, private viewCtrl: ViewController) {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">super</span>();</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.senderId = Meteor.userId();</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.users = <span class="hljs-keyword">this</span>.findUsers();</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  addChat(user): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.call(<span class="hljs-string">'addChat'</span>, user._id, (e: <span class="hljs-built_in">Error</span>) =&gt; {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.viewCtrl.dismiss().then(() =&gt; {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">        <span class="hljs-keyword">if</span> (e) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.handleError(e);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      });</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-keyword">private</span> findUsers(): Mongo.Cursor&lt;Meteor.User&gt; {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> chats = Chats.find({</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      memberIds: <span class="hljs-keyword">this</span>.senderId</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    }, {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      fields: {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">        memberIds: <span class="hljs-number">1</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      }</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> recieverIds = chats</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      .map(({memberIds}) =&gt; memberIds)</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      .reduce((result, memberIds) =&gt; result.concat(memberIds), [])</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      .concat(<span class="hljs-keyword">this</span>.senderId);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> Meteor.users.find({</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      _id: {$nin: recieverIds}</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-keyword">private</span> handleError(e: <span class="hljs-built_in">Error</span>): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-built_in">console</span>.error(e);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> alert = Alert.create({</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      title: <span class="hljs-string">'Oops!'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      message: e.message,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      buttons: [<span class="hljs-string">'OK'</span>]</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.navCtrl.present(alert);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="6.6" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.6</span> <span _ngcontent-dkq-12="" class="commit-summary">Add new-chat view template</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/f023d24e2e64e2459e44113f9011336cfb44ca16">app/pages/new-chat/new-chat.html</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">1</pre><pre _ngcontent-dkq-12="" class="line-number">2</pre><pre _ngcontent-dkq-12="" class="line-number">3</pre><pre _ngcontent-dkq-12="" class="line-number">4</pre><pre _ngcontent-dkq-12="" class="line-number">5</pre><pre _ngcontent-dkq-12="" class="line-number">6</pre><pre _ngcontent-dkq-12="" class="line-number">7</pre><pre _ngcontent-dkq-12="" class="line-number">8</pre><pre _ngcontent-dkq-12="" class="line-number">9</pre><pre _ngcontent-dkq-12="" class="line-number">10</pre><pre _ngcontent-dkq-12="" class="line-number">11</pre><pre _ngcontent-dkq-12="" class="line-number">12</pre><pre _ngcontent-dkq-12="" class="line-number">13</pre><pre _ngcontent-dkq-12="" class="line-number">14</pre><pre _ngcontent-dkq-12="" class="line-number">15</pre><pre _ngcontent-dkq-12="" class="line-number">16</pre><pre _ngcontent-dkq-12="" class="line-number">17</pre><pre _ngcontent-dkq-12="" class="line-number">18</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">ion-header</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-toolbar</span> <span class="hljs-attr">whatsapp</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">ion-title</span>&gt;</span>New Chat<span class="hljs-tag">&lt;/<span class="hljs-name">ion-title</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">ion-buttons</span> <span class="hljs-attr">end</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dismiss-button"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"viewCtrl.dismiss()"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">ion-icon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"close"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ion-icon</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">ion-buttons</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-toolbar</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;/<span class="hljs-name">ion-header</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">ion-content</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"new-chat"</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-list</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"users"</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ion-item</span> *<span class="hljs-attr">ngFor</span>=<span class="hljs-string">"let user of users"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"addChat(user)"</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-picture"</span> [<span class="hljs-attr">src</span>]=<span class="hljs-string">"user.profile.picture"</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-name"</span>&gt;</span>{{user.profile.name}}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-list</span>&gt;</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;/<span class="hljs-name">ion-content</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="6.7" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.7</span> <span _ngcontent-dkq-12="" class="commit-summary">Add new-chat stylesheet</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/68ea308cc25bd5496e003b10f8cb026ee1430725">app/pages/new-chat/new-chat.scss</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">1</pre><pre _ngcontent-dkq-12="" class="line-number">2</pre><pre _ngcontent-dkq-12="" class="line-number">3</pre><pre _ngcontent-dkq-12="" class="line-number">4</pre><pre _ngcontent-dkq-12="" class="line-number">5</pre><pre _ngcontent-dkq-12="" class="line-number">6</pre><pre _ngcontent-dkq-12="" class="line-number">7</pre><pre _ngcontent-dkq-12="" class="line-number">8</pre><pre _ngcontent-dkq-12="" class="line-number">9</pre><pre _ngcontent-dkq-12="" class="line-number">10</pre><pre _ngcontent-dkq-12="" class="line-number">11</pre><pre _ngcontent-dkq-12="" class="line-number">12</pre><pre _ngcontent-dkq-12="" class="line-number">13</pre><pre _ngcontent-dkq-12="" class="line-number">14</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-selector-class">.new-chat</span> {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-selector-class">.user-picture</span> {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-attribute">float</span>: left;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-selector-class">.user-name</span> {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">20px</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">25px</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-attribute">transform</span>: translate(<span class="hljs-number">0</span>, -<span class="hljs-number">50%</span>);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-attribute">float</span>: left;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="6.8" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.8</span> <span _ngcontent-dkq-12="" class="commit-summary">Import new-chat stylesheet</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/aa88d4f7beb24ba056f599bc1382e263b7a10c02">app/theme/app.core.scss</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">15</pre><pre _ngcontent-dkq-12="" class="line-number">16</pre><pre _ngcontent-dkq-12="" class="line-number">17</pre><pre _ngcontent-dkq-12="" class="line-number">18</pre><pre _ngcontent-dkq-12="" class="line-number">19</pre><pre _ngcontent-dkq-12="" class="line-number">20</pre><pre _ngcontent-dkq-12="" class="line-number">21</pre><pre _ngcontent-dkq-12="" class="line-number">22</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">@<span class="hljs-keyword">import</span> <span class="hljs-string">"../pages/messages/messages"</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">@<span class="hljs-keyword">import</span> <span class="hljs-string">"../pages/new-chat/new-chat"</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">@<span class="hljs-keyword">import</span> <span class="hljs-string">"../pages/profile/profile"</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">@<span class="hljs-keyword">import</span> <span class="hljs-string">"../pages/verification/verification"</span>;</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Thanks to our new-chat dialog, we can create chats dynamically with no need in initial fabrication. Let's replace the chats fabrication with users fabrication in the Meteor server:</p>

<p><diffbox step="6.9" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.9</span> <span _ngcontent-dkq-12="" class="commit-summary">Replace chats fabrication with users fabrication in server's initialization</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/5206cc6bb976adc3610e245200307e5d3751903e">api/server/main.ts</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">1</pre><pre _ngcontent-dkq-12="" class="line-number">2</pre><pre _ngcontent-dkq-12="" class="line-number">3</pre><pre _ngcontent-dkq-12="" class="line-number">4</pre><pre _ngcontent-dkq-12="" class="line-number">5</pre><pre _ngcontent-dkq-12="" class="line-number">6</pre><pre _ngcontent-dkq-12="" class="line-number">7</pre><pre _ngcontent-dkq-12="" class="line-number">8</pre><pre _ngcontent-dkq-12="" class="line-number">9</pre><pre _ngcontent-dkq-12="" class="line-number">10</pre><pre _ngcontent-dkq-12="" class="line-number">11</pre><pre _ngcontent-dkq-12="" class="line-number">12</pre><pre _ngcontent-dkq-12="" class="line-number">13</pre><pre _ngcontent-dkq-12="" class="line-number">14</pre><pre _ngcontent-dkq-12="" class="line-number">15</pre><pre _ngcontent-dkq-12="" class="line-number">16</pre><pre _ngcontent-dkq-12="" class="line-number">17</pre><pre _ngcontent-dkq-12="" class="line-number">18</pre><pre _ngcontent-dkq-12="" class="line-number">19</pre><pre _ngcontent-dkq-12="" class="line-number">20</pre><pre _ngcontent-dkq-12="" class="line-number">21</pre><pre _ngcontent-dkq-12="" class="line-number">22</pre><pre _ngcontent-dkq-12="" class="line-number">23</pre><pre _ngcontent-dkq-12="" class="line-number">24</pre><pre _ngcontent-dkq-12="" class="line-number">25</pre><pre _ngcontent-dkq-12="" class="line-number">26</pre><pre _ngcontent-dkq-12="" class="line-number">27</pre><pre _ngcontent-dkq-12="" class="line-number">28</pre><pre _ngcontent-dkq-12="" class="line-number">29</pre><pre _ngcontent-dkq-12="" class="line-number">30</pre><pre _ngcontent-dkq-12="" class="line-number">31</pre><pre _ngcontent-dkq-12="" class="line-number">32</pre><pre _ngcontent-dkq-12="" class="line-number">33</pre><pre _ngcontent-dkq-12="" class="line-number">34</pre><pre _ngcontent-dkq-12="" class="line-number">35</pre><pre _ngcontent-dkq-12="" class="line-number">36</pre><pre _ngcontent-dkq-12="" class="line-number">37</pre><pre _ngcontent-dkq-12="" class="line-number">38</pre><pre _ngcontent-dkq-12="" class="line-number">39</pre><pre _ngcontent-dkq-12="" class="line-number">40</pre><pre _ngcontent-dkq-12="" class="line-number">41</pre><pre _ngcontent-dkq-12="" class="line-number">42</pre><pre _ngcontent-dkq-12="" class="line-number">43</pre><pre _ngcontent-dkq-12="" class="line-number">44</pre><pre _ngcontent-dkq-12="" class="line-number">45</pre><pre _ngcontent-dkq-12="" class="line-number">46</pre><pre _ngcontent-dkq-12="" class="line-number">47</pre><pre _ngcontent-dkq-12="" class="line-number">48</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Accounts} from <span class="hljs-string">'meteor/accounts-base'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Chats, Messages} from <span class="hljs-string">'./collections'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">Meteor.startup(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-keyword">if</span> (Meteor.users.find().count()) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  Accounts.createUserWithPhone({</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    phone: <span class="hljs-string">'+972540000001'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    profile: {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      name: <span class="hljs-string">'Ethan Gonzalez'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      picture: <span class="hljs-string">'https://randomuser.me/api/portraits/thumb/men/1.jpg'</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  });</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  Accounts.createUserWithPhone({</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    phone: <span class="hljs-string">'+972540000002'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    profile: {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      name: <span class="hljs-string">'Bryan Wallace'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      picture: <span class="hljs-string">'https://randomuser.me/api/portraits/thumb/lego/1.jpg'</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  });</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  Accounts.createUserWithPhone({</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    phone: <span class="hljs-string">'+972540000003'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    profile: {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      name: <span class="hljs-string">'Avery Stewart'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      picture: <span class="hljs-string">'https://randomuser.me/api/portraits/thumb/women/1.jpg'</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  });</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  Accounts.createUserWithPhone({</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    phone: <span class="hljs-string">'+972540000004'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    profile: {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      name: <span class="hljs-string">'Katie Peterson'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      picture: <span class="hljs-string">'https://randomuser.me/api/portraits/thumb/women/2.jpg'</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  });</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  Accounts.createUserWithPhone({</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    phone: <span class="hljs-string">'+972540000005'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    profile: {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      name: <span class="hljs-string">'Ray Edwards'</span>,</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      picture: <span class="hljs-string">'https://randomuser.me/api/portraits/thumb/men/2.jpg'</span></pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  });</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Since we changed the data fabrication method, the chat's title and picture are not hardcoded anymore, therefore they should be calculated in the components themselves. Let's calculate those fields in the chats component:</p>

<p><diffbox step="6.10" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.10</span> <span _ngcontent-dkq-12="" class="commit-summary">Add title and picture fields to chat transformation in chats component</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/efe702344d3bbc711fd6b8b401c1190d7ca36dda">app/pages/chats/chats.ts</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">2</pre><pre _ngcontent-dkq-12="" class="line-number">3</pre><pre _ngcontent-dkq-12="" class="line-number">4</pre><pre _ngcontent-dkq-12="" class="line-number">5</pre><pre _ngcontent-dkq-12="" class="line-number">6</pre><pre _ngcontent-dkq-12="" class="line-number">7</pre><pre _ngcontent-dkq-12="" class="line-number">8</pre><pre _ngcontent-dkq-12="" class="line-number"> </pre><pre _ngcontent-dkq-12="" class="line-number">17</pre><pre _ngcontent-dkq-12="" class="line-number">18</pre><pre _ngcontent-dkq-12="" class="line-number">19</pre><pre _ngcontent-dkq-12="" class="line-number">20</pre><pre _ngcontent-dkq-12="" class="line-number">21</pre><pre _ngcontent-dkq-12="" class="line-number">22</pre><pre _ngcontent-dkq-12="" class="line-number">23</pre><pre _ngcontent-dkq-12="" class="line-number">24</pre><pre _ngcontent-dkq-12="" class="line-number">25</pre><pre _ngcontent-dkq-12="" class="line-number">26</pre><pre _ngcontent-dkq-12="" class="line-number">27</pre><pre _ngcontent-dkq-12="" class="line-number">28</pre><pre _ngcontent-dkq-12="" class="line-number">29</pre><pre _ngcontent-dkq-12="" class="line-number"> </pre><pre _ngcontent-dkq-12="" class="line-number">64</pre><pre _ngcontent-dkq-12="" class="line-number">65</pre><pre _ngcontent-dkq-12="" class="line-number">66</pre><pre _ngcontent-dkq-12="" class="line-number">67</pre><pre _ngcontent-dkq-12="" class="line-number">68</pre><pre _ngcontent-dkq-12="" class="line-number">69</pre><pre _ngcontent-dkq-12="" class="line-number">70</pre><pre _ngcontent-dkq-12="" class="line-number">71</pre><pre _ngcontent-dkq-12="" class="line-number">72</pre><pre _ngcontent-dkq-12="" class="line-number">73</pre><pre _ngcontent-dkq-12="" class="line-number">74</pre><pre _ngcontent-dkq-12="" class="line-number">75</pre><pre _ngcontent-dkq-12="" class="line-number">76</pre><pre _ngcontent-dkq-12="" class="line-number">77</pre><pre _ngcontent-dkq-12="" class="line-number">78</pre><pre _ngcontent-dkq-12="" class="line-number"> </pre><pre _ngcontent-dkq-12="" class="line-number">88</pre><pre _ngcontent-dkq-12="" class="line-number">89</pre><pre _ngcontent-dkq-12="" class="line-number">90</pre><pre _ngcontent-dkq-12="" class="line-number">91</pre><pre _ngcontent-dkq-12="" class="line-number">92</pre><pre _ngcontent-dkq-12="" class="line-number">93</pre><pre _ngcontent-dkq-12="" class="line-number">94</pre><pre _ngcontent-dkq-12="" class="line-number">95</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {NavController, Modal, Popover} from <span class="hljs-string">'ionic-angular'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {MeteorComponent} from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {CalendarPipe} from <span class="hljs-string">'angular2-moment'</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Mongo} from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Chat, Message} from <span class="hljs-string">'api/models'</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Chats, Messages} from <span class="hljs-string">'api/collections'</span>;</pre><pre _ngcontent-dkq-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">})</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> ChatsPage extends MeteorComponent {</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  chats: Mongo.Cursor&lt;Chat&gt;;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-keyword">private</span> senderId: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>(private navCtrl: NavController) {</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    <span class="hljs-keyword">super</span>();</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.senderId = Meteor.userId();</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">      <span class="hljs-keyword">this</span>.chats = <span class="hljs-keyword">this</span>.findChats();</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    });</pre><pre _ngcontent-dkq-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  <span class="hljs-keyword">private</span> transformChat(chat): Chat {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    chat.receiverComp = <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-keyword">const</span> receiverId = chat.memberIds.find(memberId =&gt; memberId != <span class="hljs-keyword">this</span>.senderId);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-keyword">const</span> receiver = Meteor.users.findOne(receiverId);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      <span class="hljs-keyword">if</span> (!receiver) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      chat.title = receiver.profile.name;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">      chat.picture = receiver.profile.picture;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    chat.lastMessageComp = <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">      chat.lastMessage = <span class="hljs-keyword">this</span>.findLastMessage(chat);</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    });</pre><pre _ngcontent-dkq-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    });</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">  <span class="hljs-keyword">private</span> disposeChat(chat: Chat): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (chat.receiverComp) chat.receiverComp.stop();</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (chat.lastMessageComp) chat.lastMessageComp.stop();</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="6.11" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.11</span> <span _ngcontent-dkq-12="" class="commit-summary">Add receiver computation to chat model</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/8b5664f02d0de86a6be1fa210b2ba50df031d794">typings/models.d.ts</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">10</pre><pre _ngcontent-dkq-12="" class="line-number">11</pre><pre _ngcontent-dkq-12="" class="line-number">12</pre><pre _ngcontent-dkq-12="" class="line-number">13</pre><pre _ngcontent-dkq-12="" class="line-number">14</pre><pre _ngcontent-dkq-12="" class="line-number">15</pre><pre _ngcontent-dkq-12="" class="line-number">16</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    title?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    picture?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    lastMessage?: Message;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    receiverComp?: Tracker.Computation;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    lastMessageComp?: Tracker.Computation;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And in the messages component as well for the active chat:</p>

<p><diffbox step="6.12" tutorial="whatsapp2-ionic-tutorial" _nghost-dkq-12=""><div _ngcontent-dkq-12="" class="diffbox">
    <div _ngcontent-dkq-12="" class="title-panel">
        <span _ngcontent-dkq-12="" class="step-number">6.12</span> <span _ngcontent-dkq-12="" class="commit-summary">Change title and picture calculation in messages component based on users</span>
        <a _ngcontent-dkq-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/15522d302a601237107d9e82cc0b2c7cd20b91c5">app/pages/messages/messages.ts</a>
    </div>
    <div _ngcontent-dkq-12="" class="code-container">
        <div _ngcontent-dkq-12="" class="scroll-container">
            <div _ngcontent-dkq-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-number">27</pre><pre _ngcontent-dkq-12="" class="line-number">28</pre><pre _ngcontent-dkq-12="" class="line-number">29</pre><pre _ngcontent-dkq-12="" class="line-number">30</pre><pre _ngcontent-dkq-12="" class="line-number">31</pre><pre _ngcontent-dkq-12="" class="line-number">32</pre><pre _ngcontent-dkq-12="" class="line-number">33</pre><pre _ngcontent-dkq-12="" class="line-number">34</pre><pre _ngcontent-dkq-12="" class="line-number">35</pre><pre _ngcontent-dkq-12="" class="line-number">36</pre><pre _ngcontent-dkq-12="" class="line-number">37</pre>
            </div>
            <div _ngcontent-dkq-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.activeChat = &lt;Chat&gt;navParams.get(<span class="hljs-string">'chat'</span>);</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.senderId = Meteor.userId();</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> receiverId = <span class="hljs-keyword">this</span>.activeChat.memberIds.find(memberId =&gt; memberId != <span class="hljs-keyword">this</span>.senderId);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> receiver = Meteor.users.findOne(receiverId);</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.title = receiver.profile.name;</pre><pre _ngcontent-dkq-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.picture = receiver.profile.picture;</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-dkq-12="" class="line-context" className="line-context">      <span class="hljs-keyword">this</span>.messages = <span class="hljs-keyword">this</span>.findMessages();</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now we want our changes to take effect. We will reset the database so next time we run our Meteor server the users will be fabricated. To reset the database, first make sure the Meteor server is stopped and then type the following command:</p>

<pre><code ngNonBindable="">$ meteor reset</code></pre>

<p>And once we start our server again it should go through the initialization method and fabricate the users.</p>

<p>The fabricated users should appear in the new-chat dialog like so:</p>

<p>Android:</p>

<p><img alt="angular2-wa-ionic-cli" src="/assets/tutorials/angular2-whatsapp-ionic-cli/screenshot-8-md.png"></p>

<p>iOS:</p>

<p><img alt="angular2-wa-ionic-cli" src="/assets/tutorials/angular2-whatsapp-ionic-cli/screenshot-8-ios.png"></p></tutorial-page-content>
    </div>
</div></tutorial></app>


</body></html>