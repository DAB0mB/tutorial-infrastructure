<!DOCTYPE html><html lang="en"><head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic,800italic" rel="stylesheet" type="text/css">
    <title>Angular2-Meteor</title>
    <meta charset="UTF-8">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <base href="/">
    <style>.logo[_ngcontent-eur-1] {
  width: auto;
  height: 2em; }

.main-toolbar[_ngcontent-eur-1] {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  box-shadow: 3px 0 6px rgba(0, 0, 0, 0.3);
  background: #90A4AE; }
  .main-toolbar[_ngcontent-eur-1] a[_ngcontent-eur-1] {
    color: white;
    text-decoration: none; }

.fill-remaining-space[_ngcontent-eur-1] {
  -ms-flex: 1 1 auto;
      flex: 1 1 auto; }

.tutorials-dropdown[_ngcontent-eur-1] {
  position: relative;
  display: inline-block; }
  .tutorials-dropdown[_ngcontent-eur-1] .dropdown-content[_ngcontent-eur-1] {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 500px;
    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    padding: 7px; }

.tutorials-dropdown[_ngcontent-eur-1]:hover .dropdown-content[_ngcontent-eur-1] {
  display: block; }</style><style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0; }

/* Base color: saturation 0; */
.hljs,
.hljs-subst {
  color: #444; }

.hljs-comment {
  color: #888888; }

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold; }

/* User color: hue: 0 */
.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000; }

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold; }

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060; }

/* Language color: hue: 90; */
.hljs-literal {
  color: #78A960; }

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300; }

/* Meta color: hue: 200 */
.hljs-meta {
  color: #1f7199; }

.hljs-meta-string {
  color: #4d99bf; }

/* Misc effects */
.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8; }

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic; }

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold; }

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080; }

.hljs-string,
.hljs-doctag {
  color: #d14; }

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold; }

.hljs-subst {
  font-weight: normal; }

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold; }

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal; }

.hljs-regexp,
.hljs-link {
  color: #009926; }

.hljs-symbol,
.hljs-bullet {
  color: #990073; }

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3; }

.hljs-meta {
  color: #999;
  font-weight: bold; }

.hljs-deletion {
  background: #fdd; }

.hljs-addition {
  background: #dfd; }

.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

a {
  color: black; }

body {
  padding: 0;
  margin: 0;
  padding-top: 64px;
  font-family: 'Open Sans', sans-serif; }

pre {
  background: transparent;
  border: none;
  white-space: pre-wrap; }

code {
  white-space: pre-wrap; }

img[alt="angular1-wa-ionic-cli"], img[alt="angular1-wa-meteor-cli"] {
  width: 30%; }

.side-nav .step-item, .side-nav .api-list-item {
  margin: 0;
  padding: 0;
  border-bottom: 1px solid #CFD8DC;
  color: #546E7A; }

.side-nav .step-link, .side-nav .api-item-link, .side-nav .apis-versions-list li {
  text-decoration: none;
  color: #536E7A;
  display: block;
  font-size: 14px;
  padding: 16px 16px;
  margin: 0;
  background-color: #ECEFF1; }

.side-nav .active-step a {
  font-weight: bold; }

.side-nav .tutorial-steps-list, .side-nav .apis-list, .side-nav .apis-versions-list {
  list-style: none;
  padding-left: 0;
  margin-top: 8px; }

.apis-versions-list {
  margin: 0 !important; }
  .apis-versions-list li {
    padding: 8px !important; }
    .apis-versions-list li a {
      text-decoration: none; }

.dropdown-content {
  column-count: 2;
  column-width: 220px;
  column-rule: 1px solid #ECEFF1;
  column-gap: 0; }
  .dropdown-content .tutorial-steps-list {
    margin: 0 !important;
    list-style: none;
    padding: 0; }
    .dropdown-content .tutorial-steps-list .step-item {
      padding: 5px 0 5px 10px;
      border-bottom: 1px solid #ECEFF1;
      break-inside: avoid-column; }
      .dropdown-content .tutorial-steps-list .step-item a {
        text-decoration: none;
        font-size: small;
        color: black; }
      .dropdown-content .tutorial-steps-list .step-item .bold {
        font-weight: bold; }

.md-primary {
  background: #263238 !important;
  color: white !important;
  cursor: pointer !important; }
  .md-primary[disabled] {
    color: lightgray !important;
    cursor: not-allowed !important; }

tutorial-page-content pre code[ngnonbindable] {
  background: #eee;
  display: block;
  width: 90%;
  border-radius: 5px;
  padding: 10px; }

tutorial-page-content blockquote {
  margin: 0;
  position: relative;
  background: #eee;
  border-radius: 5px; }
  tutorial-page-content blockquote:before {
    content: '!';
    font-weight: bold;
    position: absolute;
    vertical-align: top;
    font-size: 2vw;
    color: white;
    margin-left: 6px; }
  tutorial-page-content blockquote p {
    border-left: 1px solid white;
    padding: 10px;
    margin-left: 20px; }

.diffbox {
  border-radius: 10px; }
  .diffbox .title-panel {
    border-radius: 10px 10px 0 0; }
  .diffbox .code-container {
    border-radius: 0 0 10px 10px; }

api-ref-container p code, api-ref-container ul li code {
  font-family: 'Open Sans', sans-serif; }

api-ref-container a {
  color: #263238;
  text-decoration: none;
  font-weight: bold; }

api-ref-container h3 {
  background: #eee;
  border-radius: 5px;
  padding: 4px;
  margin-top: 30px; }

api-ref-container table {
  width: 100%;
  background: #eee;
  border-radius: 5px;
  border-spacing: 0; }
  api-ref-container table thead {
    background: #546E7A;
    color: #eee;
    border-radius: 5px; }
    api-ref-container table thead tr {
      background: #546E7A;
      border-radius: 5px; }
      api-ref-container table thead tr th {
        padding: 6px; }
  api-ref-container table tbody td {
    padding: 5px; }
</style><style>/** * Mixin that creates a new stacking context. * see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */ /** * This mixin hides an element visually. * That means it's still accessible for screen-readers but not visible in view. */ /** * Forces an element to grow to fit floated contents; used as as an alternative to * `overflow: hidden;` because it doesn't cut off contents. */ /** * A mixin, which generates temporary ink ripple on a given component. * When $bindToParent is set to true, it will check for the focused class on the same selector as you included * that mixin. * It is also possible to specify the color palette of the temporary ripple. By default it uses the * accent palette for its background. */ md-toolbar { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; min-height: 64px; font-size: 20px; font-weight: 400; font-family: Roboto, "Helvetica Neue", sans-serif; padding: 0 16px; -webkit-box-orient: vertical; -webkit-box-direction: normal; -ms-flex-direction: column; flex-direction: column; background: whitesmoke; color: rgba(0, 0, 0, 0.87); } md-toolbar.md-primary { background: #009688; color: white; } md-toolbar.md-accent { background: #9c27b0; color: rgba(255, 255, 255, 0.870588); } md-toolbar.md-warn { background: #f44336; color: white; } md-toolbar md-toolbar-row { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; height: 64px; -webkit-box-orient: horizontal; -webkit-box-direction: normal; -ms-flex-direction: row; flex-direction: row; -webkit-box-align: center; -ms-flex-align: center; align-items: center; } </style><style>/** * A collection of mixins and CSS classes that can be used to apply elevation to a material * element. * See: https://www.google.com/design/spec/what-is-material/elevation-shadows.html * Examples: * * * .md-foo { *   @include $md-elevation(2); * *   &:active { *     @include $md-elevation(8); *   } * } * * <div id="external-card" class="md-elevation-z2"><p>Some content</p></div> * * For an explanation of the design behind how elevation is implemented, see the design doc at * https://goo.gl/Kq0k9Z. */ /** * The css property used for elevation. In most cases this should not be changed. It is exposed * as a variable for abstraction / easy use when needing to reference the property directly, for * example in a will-change rule. */ /** The default duration value for elevation transitions. */ /** The default easing value for elevation transitions. */ /** * Applies the correct css rules to an element to give it the elevation specified by $zValue. * The $zValue must be between 0 and 24. */ /** * Returns a string that can be used as the value for a transition property for elevation. * Calling this function directly is useful in situations where a component needs to transition * more than one property. * * .foo { *   transition: md-elevation-transition-property-value(), opacity 100ms ease; *   will-change: $md-elevation-property, opacity; * } */ /** * Applies the correct css rules needed to have an element transition between elevations. * This mixin should be applied to elements whose elevation values will change depending on their * context (e.g. when active or disabled). */ /** Applies a property to an md-button element for each of the supported palettes. */ /** Applies a focus style to an md-button element for each of the supported palettes. */ [md-raised-button], [md-fab], [md-mini-fab], [md-button], [md-icon-button] { box-sizing: border-box; position: relative; background: transparent; text-align: center; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; outline: none; border: none; display: inline-block; white-space: nowrap; text-decoration: none; vertical-align: baseline; font-size: 14px; font-family: Roboto, "Helvetica Neue", sans-serif; font-weight: 500; color: currentColor; margin: 0; min-width: 88px; line-height: 36px; padding: 0 16px; border-radius: 3px; } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab], .md-primary[md-button], .md-primary[md-icon-button] { color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab], .md-accent[md-button], .md-accent[md-icon-button] { color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab], .md-warn[md-button], .md-warn[md-icon-button] { color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-primary[disabled][md-button], .md-primary[disabled][md-icon-button], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-accent[disabled][md-button], .md-accent[disabled][md-icon-button], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], .md-warn[disabled][md-button], .md-warn[disabled][md-icon-button], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab], [disabled][disabled][md-button], [disabled][disabled][md-icon-button] { color: rgba(0, 0, 0, 0.38); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab], [disabled][md-button], [disabled][md-icon-button] { cursor: default; } .md-button-focus[md-raised-button]::after, .md-button-focus[md-fab]::after, .md-button-focus[md-mini-fab]::after, .md-button-focus[md-button]::after, .md-button-focus[md-icon-button]::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } .md-button-focus.md-primary[md-raised-button]::after, .md-button-focus.md-primary[md-fab]::after, .md-button-focus.md-primary[md-mini-fab]::after, .md-button-focus.md-primary[md-button]::after, .md-button-focus.md-primary[md-icon-button]::after { background-color: rgba(0, 150, 136, 0.12); } .md-button-focus.md-accent[md-raised-button]::after, .md-button-focus.md-accent[md-fab]::after, .md-button-focus.md-accent[md-mini-fab]::after, .md-button-focus.md-accent[md-button]::after, .md-button-focus.md-accent[md-icon-button]::after { background-color: rgba(156, 39, 176, 0.12); } .md-button-focus.md-warn[md-raised-button]::after, .md-button-focus.md-warn[md-fab]::after, .md-button-focus.md-warn[md-mini-fab]::after, .md-button-focus.md-warn[md-button]::after, .md-button-focus.md-warn[md-icon-button]::after { background-color: rgba(244, 67, 54, 0.12); } [md-raised-button], [md-fab], [md-mini-fab] { box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); background-color: #fafafa; -webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0); -webkit-transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { color: white; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { color: rgba(255, 255, 255, 0.870588); } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { color: white; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { color: rgba(0, 0, 0, 0.38); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { background-color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { background-color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { background-color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { background-color: rgba(0, 0, 0, 0.12); } [md-raised-button]:active, [md-fab]:active, [md-mini-fab]:active { box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab] { box-shadow: none; } [md-button][disabled]:hover.md-primary, [md-button][disabled]:hover.md-accent, [md-button][disabled]:hover.md-warn, [md-button][disabled]:hover:hover { background-color: transparent; } [md-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 56px; height: 56px; padding: 0; } [md-fab] i, [md-fab] md-icon { padding: 16px 0; } [md-mini-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 40px; height: 40px; padding: 0; } [md-mini-fab] i, [md-mini-fab] md-icon { padding: 8px 0; } [md-icon-button] { min-width: 0; padding: 0; width: 40px; height: 40px; line-height: 24px; border-radius: 50%; } [md-icon-button] .md-button-wrapper > * { vertical-align: middle; } [md-button]:hover::after, [md-icon-button]:hover::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } [md-button]:hover.md-primary::after, [md-icon-button]:hover.md-primary::after { background-color: rgba(0, 150, 136, 0.12); } [md-button]:hover.md-accent::after, [md-icon-button]:hover.md-accent::after { background-color: rgba(156, 39, 176, 0.12); } [md-button]:hover.md-warn::after, [md-icon-button]:hover.md-warn::after { background-color: rgba(244, 67, 54, 0.12); } @media screen and (-ms-high-contrast: active) { .md-raised-button, .md-fab, .md-mini-fab { border: 1px solid #fff; } } </style><style>.side-nav[_ngcontent-eur-6] {
  background: #ECEFF1;
  width: 232px;
  bottom: 0;
  overflow: auto;
  z-index: 100;
  border-right: 1px solid rgba(0, 0, 0, 0.3); }
  .side-nav[_ngcontent-eur-6] ul[_ngcontent-eur-6] {
    margin-top: 8px; }

tutorials-versions[_ngcontent-eur-6] {
  margin-left: 10px;
  margin-top: 10px;
  display: block; }

.improv-button[_ngcontent-eur-6] {
  margin-left: 50px; }

.right-buttons[_ngcontent-eur-6] {
  float: right;
  margin-right: 250px;
  margin-top: 10px; }

.tutorial-title[_ngcontent-eur-6] {
  margin: 15px;
  float: left;
  font-size: larger;
  font-weight: bold; }

.top-navigation[_ngcontent-eur-6] {
  position: fixed;
  margin-top: -60px;
  width: 100%;
  background-color: #ECEFF1;
  height: 60px;
  z-index: 50; }

.tutorial-content[_ngcontent-eur-6] {
  margin-top: 60px;
  padding: 20px; }

.tutorials-container[_ngcontent-eur-6] {
  padding-left: 230px; }

.l-pinned-top[_ngcontent-eur-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px; }

.l-pinned-left[_ngcontent-eur-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px; }

.l-left[_ngcontent-eur-6] {
  float: left; }

.l-right[_ngcontent-eur-6] {
  float: right; }

.l-relative[_ngcontent-eur-6], .docs-content[_ngcontent-eur-6] {
  position: relative; }

.l-absolute[_ngcontent-eur-6] {
  position: absolute; }

.l-fixed[_ngcontent-eur-6] {
  position: fixed; }

.l-offset-side-nav[_ngcontent-eur-6] {
  padding-left: 232px; }

.l-offset-nav[_ngcontent-eur-6] {
  padding-top: 64px; }</style><style>.tutorial-version[_ngcontent-eur-7] {
            margin-left: 10px;
        }
        
        .active[_ngcontent-eur-7] {
            color: #b3e5fc !important;
        }</style><style>.diffbox[_ngcontent-eur-12] {
  border: 1px solid #eee;
  -webkit-text-size-adjust: 100%;
  margin: 1.5em 0; }
  .diffbox[_ngcontent-eur-12] .title-panel[_ngcontent-eur-12] {
    padding: 5px 12px;
    background: #eee;
    border-bottom: solid 1px #eee;
    color: #333;
    overflow: auto; }
    .diffbox[_ngcontent-eur-12] .title-panel[_ngcontent-eur-12] .github-commit-link[_ngcontent-eur-12] {
      float: right;
      color: black;
      text-decoration: none;
      border-bottom: none !important; }
  .diffbox[_ngcontent-eur-12] .code-container[_ngcontent-eur-12] {
    overflow-x: auto;
    position: relative;
    padding: 9px 3px 3px 0;
    background: #f8f8f8; }
    .diffbox[_ngcontent-eur-12] .code-container[_ngcontent-eur-12] .scroll-container[_ngcontent-eur-12] {
      display: inline-block;
      min-width: 100%;
      overflow: hidden; }
    .diffbox[_ngcontent-eur-12] .code-container[_ngcontent-eur-12] pre[_ngcontent-eur-12] {
      margin: 0;
      padding: 0;
      background-color: transparent; }
      .diffbox[_ngcontent-eur-12] .code-container[_ngcontent-eur-12] pre.line-added[_ngcontent-eur-12] {
        background: #eaffea; }
      .diffbox[_ngcontent-eur-12] .code-container[_ngcontent-eur-12] pre.line-removed[_ngcontent-eur-12] {
        background: #ff9ea2; }
    .diffbox[_ngcontent-eur-12] .code-container[_ngcontent-eur-12] .line-content[_ngcontent-eur-12] {
      padding-left: 36px;
      overflow: hidden; }
      .diffbox[_ngcontent-eur-12] .code-container[_ngcontent-eur-12] .line-content[_ngcontent-eur-12] .hljs-comment[_ngcontent-eur-12] {
        color: #777; }
    .diffbox[_ngcontent-eur-12] .code-container[_ngcontent-eur-12] .line-numbers[_ngcontent-eur-12] {
      text-align: right;
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      -o-user-select: none;
      position: absolute;
      width: 25px; }
      .diffbox[_ngcontent-eur-12] .code-container[_ngcontent-eur-12] .line-numbers[_ngcontent-eur-12] .line-number[_ngcontent-eur-12] {
        color: #aaa;
        font-style: italic; }</style></head><body><universal-styles></universal-styles>


<app _nghost-eur-1=""><md-toolbar _ngcontent-eur-1="" class="main-toolbar md-primary"><div class="md-toolbar-layout"> <md-toolbar-row> 
    <a _ngcontent-eur-1="" href="/"><img _ngcontent-eur-1="" class="logo" src="/assets/images/logo.png"></a>
    <div _ngcontent-eur-1="" class="tutorials-dropdown">
        <button _ngcontent-eur-1="" md-button=""><span class="md-button-wrapper">Tutorials</span> </button>
        <div _ngcontent-eur-1="" class="dropdown-content">
            <steps-list _ngcontent-eur-1="" prefix="/tutorials/socially"><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/folder-structure">8. Folder Structure</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/css-sass-and-bootstrap">18. CSS, SASS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ionic2">23. Ionic2</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/next-steps">25. Next Steps</a>
    </li>
    <!--template bindings={}--><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/whatsapp">WhatsApp clone with Angular &amp; Meteor</a>
    </li><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/migration/angular2/introduction">Blaze to Angular 2 Migration tutorial</a>
    </li>
</ul>
</steps-list>
        </div>
    </div>
    <a _ngcontent-eur-1="" href="/angular2/"><button _ngcontent-eur-1="" md-button=""><span class="md-button-wrapper">Angular 2</span> </button></a>
    <a _ngcontent-eur-1="" href="/api/angular2-meteor/latest/MeteorComponent"><button _ngcontent-eur-1="" md-button=""><span class="md-button-wrapper">API Reference</span> </button></a>
    <span _ngcontent-eur-1="" class="fill-remaining-space"></span>
    <a _ngcontent-eur-1="" href="https://github.com/Urigo/angular2-meteor" target="_blank"><button _ngcontent-eur-1="" md-button=""><span class="md-button-wrapper">GitHub</span> </button></a>
    <a _ngcontent-eur-1="" href="http://info.meteor.com/blog/author/uri-goldshtein?__hstc=219992390.b4a81f3b906b078dac633307097097f5.1471207723059.1471890076881.1471938647239.7&amp;__hssc=219992390.3.1471938647239&amp;__hsfp=714783454" target="_blank"><button _ngcontent-eur-1="" md-button=""><span class="md-button-wrapper">Blog</span> </button></a>
    <a _ngcontent-eur-1="" href="https://docs.google.com/forms/d/e/1FAIpQLSed3JZ0EAcSzkX8Y-iEtvNQRfjeyP2ICQvYMs00ewdmKaplwA/viewform" target="_blank"><button _ngcontent-eur-1="" md-button=""><span class="md-button-wrapper">Contact Us</span> </button></a>
    <a _ngcontent-eur-1="" href="/manifesto"><button _ngcontent-eur-1="" md-button=""><span class="md-button-wrapper">Manifesto</span> </button></a>
    <a _ngcontent-eur-1="" href="/about"><button _ngcontent-eur-1="" md-button=""><span class="md-button-wrapper">About us</span> </button></a>
 </md-toolbar-row>  </div></md-toolbar>
<router-outlet _ngcontent-eur-1=""></router-outlet><tutorial _nghost-eur-6=""><div _ngcontent-eur-6="" class="tutorials-container">
    <nav _ngcontent-eur-6="" class="side-nav l-pinned-left l-layer-4 l-offset-nav">
        <tutorials-versions _ngcontent-eur-6="" _nghost-eur-7=""><!--template bindings={}--></tutorials-versions>
        <steps-list _ngcontent-eur-6=""><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/setup">1. Initial setup</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/chats-page">2. Chats page</a>
    </li><li class="step-item active-step" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/meteor-server-side">3. Realtime Meteor Server</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/messages-page">4. Messages Page</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/authentication">5. Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/chats-mutations">6. Chats Creation &amp; Removal</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/privacy">7. Privacy &amp; Security</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/summary">8. Summary</a>
    </li>
    <!--template bindings={}-->
</ul>
</steps-list>
    </nav>
    <div _ngcontent-eur-6="" class="top-navigation">
        <span _ngcontent-eur-6="" class="tutorial-title" stepName="">Realtime Meteor Server</span>
        <div _ngcontent-eur-6="" class="right-buttons">
            <a _ngcontent-eur-6="" class="md-primary" md-raised-button="" tutorialNavigation="previous" href="/tutorials/whatsapp2/ionic/chats-page">Previous</a>
            <a _ngcontent-eur-6="" class="md-primary" codeDiffLink="" md-raised-button="" href="https://github.com/DAB0mB/ionic2-meteor-messenger/compare/step_01...step_02">Code Diff</a>
            <a _ngcontent-eur-6="" class="md-primary" md-raised-button="" tutorialNavigation="next" href="/tutorials/whatsapp2/ionic/messages-page">Next</a>
            <a _ngcontent-eur-6="" class="md-primary improv-button" md-raised-button="" href="https://github.com/Urigo/tutorial-infrastructure/edit/master/static-website/tutorials/whatsapp2/ionic/meteor-server-side.html">Improve This Document</a>
        </div>
    </div>
    <div _ngcontent-eur-6="" class="tutorial-content">
        <router-outlet _ngcontent-eur-6=""></router-outlet><tutorial-page><div class="tutorial-container"></div></tutorial-page><tutorial-page-content><p>Now that we have the initial chats layout and its component, we will take it a step further by providing the chats data from a server instead of having it locally. In this step we will be implementing the API server and we will do so using Meteor.</p>

<p>First make sure that you have Meteor installed. If not, install it by typing the following command:</p>

<pre><code ngNonBindable="">$ curl https://install.meteor.com/ | sh</code></pre>

<p>We will start by creating the Meteor project which will be placed inside the <code ngNonBindable="">api</code> dir:</p>

<pre><code ngNonBindable="">$ meteor create api --release 1.3.5.1</code></pre>

<blockquote><p><strong>NOTE:</strong> Despite our decision to stick to Ionic's CLI, there is no other way to create a proper Meteor project except for using its CLI.</p></blockquote>

<p>Since we will be writing our app using Typescript and not Javascript, we will need to support it in our Meteor project as well, especially when the client and the server share some of the script files. To add this support let's add the following package to our Meteor project:</p>

<pre><code ngNonBindable="">$ cd api
$ meteor add meteortypescript:compiler</code></pre>

<p>And let's link the necessary Typescript assets in both projects so they can have the same declerations and rules:</p>

<pre><code ngNonBindable="">$ ln -s ../typings
$ ln -s ../tsconfig.json
$ ln -s ../tslint.json</code></pre>

<p>As you can probably see this is not a NodeJS package we're dealing with, rather than a Meteor package. All Meteor packages are defined in a package manager called <a href="atmospherejs.com">Atmosphere</a>. Normally we should use NPM since we don't want to be messing around with several package managers, but some functionalities are related exclusively to Meteor, in which case we gonna use Atmosphere.</p>

<p>We also wanna have Meteor decleration Typescript files so we can have Meteor data-types available to us once we use Typescript. For this we gonna use a decleration files manager called <a href="">typings</a>. All of the decleration files we installed are gonna be available to us in the <code ngNonBindable="">typings.json</code> file. To add Meteor decleration files, type the following in the command line:</p>

<pre><code ngNonBindable="">$ typings install registry:env/meteor --global --save</code></pre>

<p>A Meteor project will contain the following dirs by default:</p>

<ul><li>client - A dir containing all client scripts.</li><li>server - A dir containing all server scripts.</li></ul>

<p>These scripts should be loaded automatically by their alphabetic order on their belonging platform, e.g. a script defined under the client dir should be loaded by Meteor only on the client. A script defined in neither of these folders should be loaded on both. Since we're using Ionic's CLI for the client code we have no need in the client dir in the Meteor project. Let's get rid of it:</p>

<pre><code ngNonBindable="">$ rm -rf client</code></pre>

<p>We want our server and client to share the same resources, which means that once we install an NPM package in the Ionic project it's gonna be available in the Meteor project as well. To achieve that we gonna add a symbolic link to <code ngNonBindable="">node_modules</code> dir in our Meteor project:</p>

<pre><code ngNonBindable="">$ ln -s ../node_modules</code></pre>

<p>Since they share the same packages we have no need to configure our Meteor project using <code ngNonBindable="">package.json</code>:</p>

<pre><code ngNonBindable="">$ rm package.json</code></pre>

<p>And let's not forget to add the Meteor NPM dependencies to the Ionic project as well:</p>

<pre><code ngNonBindable="">$ npm install meteor-node-stubs --save</code></pre>

<p>Our API server is set! Now instead of fabricating the chats data in the chats component we can do so during the server initialization. We will start by creating a <code ngNonBindable="">chats</code> collection which will be used to insert new chat documents into the database:</p>

<p><diffbox step="3.9" tutorial="whatsapp2-ionic-tutorial" _nghost-eur-12=""><div _ngcontent-eur-12="" class="diffbox">
    <div _ngcontent-eur-12="" class="title-panel">
        <span _ngcontent-eur-12="" class="step-number">3.9</span> <span _ngcontent-eur-12="" class="commit-summary">Define chats and messages collections</span>
        <a _ngcontent-eur-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/5e5fa8e8bd4481d3745fa2a69e661d9104d34998">api/server/collections.ts</a>
    </div>
    <div _ngcontent-eur-12="" class="code-container">
        <div _ngcontent-eur-12="" class="scroll-container">
            <div _ngcontent-eur-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-number">1</pre><pre _ngcontent-eur-12="" class="line-number">2</pre><pre _ngcontent-eur-12="" class="line-number">3</pre><pre _ngcontent-eur-12="" class="line-number">4</pre><pre _ngcontent-eur-12="" class="line-number">5</pre><pre _ngcontent-eur-12="" class="line-number">6</pre>
            </div>
            <div _ngcontent-eur-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Mongo} from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Chat, Message} from <span class="hljs-string">'api/models'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Chats = <span class="hljs-keyword">new</span> Mongo.Collection&lt;Chat&gt;(<span class="hljs-string">'chats'</span>);</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Messages = <span class="hljs-keyword">new</span> Mongo.Collection&lt;Message&gt;(<span class="hljs-string">'messages'</span>);</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>This collection is actually a reference to a <a href="http://mongodb.com">MongoDB</a> collection, and it is provided to us by a Meteor package called <a href="meteor.com/mini-databases">Minimongo</a>, and it shares almost the same API as a native MongoDB collection.</p>

<p>Now we will go into the server's entry file located in <code ngNonBindable="">server/main.js</code> and we will use the chats collection we've just created to insert some chat documents. First we need to rename this file since we're using Typesript and we want it to have a <code ngNonBindable="">.ts</code> extension:</p>

<pre><code ngNonBindable="">$ cd server
$ mv main.js main.ts</code></pre>

<p>And afterwards we can go ahead and write our code:</p>

<p><diffbox step="3.11" tutorial="whatsapp2-ionic-tutorial" _nghost-eur-12=""><div _ngcontent-eur-12="" class="diffbox">
    <div _ngcontent-eur-12="" class="title-panel">
        <span _ngcontent-eur-12="" class="step-number">3.11</span> <span _ngcontent-eur-12="" class="commit-summary">Create chats on server initialization</span>
        <a _ngcontent-eur-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/3df1af2ca957e6b6ba11e03340e35500d802a368">api/server/main.ts</a>
    </div>
    <div _ngcontent-eur-12="" class="code-container">
        <div _ngcontent-eur-12="" class="scroll-container">
            <div _ngcontent-eur-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-number">1</pre><pre _ngcontent-eur-12="" class="line-number">2</pre><pre _ngcontent-eur-12="" class="line-number">3</pre><pre _ngcontent-eur-12="" class="line-number">4</pre><pre _ngcontent-eur-12="" class="line-number">5</pre><pre _ngcontent-eur-12="" class="line-number">6</pre><pre _ngcontent-eur-12="" class="line-number">7</pre><pre _ngcontent-eur-12="" class="line-number">8</pre><pre _ngcontent-eur-12="" class="line-number">9</pre><pre _ngcontent-eur-12="" class="line-number">10</pre><pre _ngcontent-eur-12="" class="line-number">11</pre><pre _ngcontent-eur-12="" class="line-number">12</pre><pre _ngcontent-eur-12="" class="line-number">13</pre><pre _ngcontent-eur-12="" class="line-number">14</pre><pre _ngcontent-eur-12="" class="line-number">15</pre><pre _ngcontent-eur-12="" class="line-number">16</pre><pre _ngcontent-eur-12="" class="line-number">17</pre><pre _ngcontent-eur-12="" class="line-number">18</pre><pre _ngcontent-eur-12="" class="line-number">19</pre><pre _ngcontent-eur-12="" class="line-number">20</pre><pre _ngcontent-eur-12="" class="line-number">21</pre><pre _ngcontent-eur-12="" class="line-number">22</pre><pre _ngcontent-eur-12="" class="line-number">23</pre><pre _ngcontent-eur-12="" class="line-number">24</pre><pre _ngcontent-eur-12="" class="line-number">25</pre><pre _ngcontent-eur-12="" class="line-number">26</pre><pre _ngcontent-eur-12="" class="line-number">27</pre><pre _ngcontent-eur-12="" class="line-number">28</pre><pre _ngcontent-eur-12="" class="line-number">29</pre><pre _ngcontent-eur-12="" class="line-number">30</pre><pre _ngcontent-eur-12="" class="line-number">31</pre><pre _ngcontent-eur-12="" class="line-number">32</pre><pre _ngcontent-eur-12="" class="line-number">33</pre><pre _ngcontent-eur-12="" class="line-number">34</pre><pre _ngcontent-eur-12="" class="line-number">35</pre><pre _ngcontent-eur-12="" class="line-number">36</pre><pre _ngcontent-eur-12="" class="line-number">37</pre><pre _ngcontent-eur-12="" class="line-number">38</pre><pre _ngcontent-eur-12="" class="line-number">39</pre><pre _ngcontent-eur-12="" class="line-number">40</pre><pre _ngcontent-eur-12="" class="line-number">41</pre><pre _ngcontent-eur-12="" class="line-number">42</pre><pre _ngcontent-eur-12="" class="line-number">43</pre><pre _ngcontent-eur-12="" class="line-number">44</pre><pre _ngcontent-eur-12="" class="line-number">45</pre><pre _ngcontent-eur-12="" class="line-number">46</pre><pre _ngcontent-eur-12="" class="line-number">47</pre><pre _ngcontent-eur-12="" class="line-number">48</pre><pre _ngcontent-eur-12="" class="line-number">49</pre><pre _ngcontent-eur-12="" class="line-number">50</pre><pre _ngcontent-eur-12="" class="line-number">51</pre><pre _ngcontent-eur-12="" class="line-number">52</pre><pre _ngcontent-eur-12="" class="line-number">53</pre><pre _ngcontent-eur-12="" class="line-number">54</pre><pre _ngcontent-eur-12="" class="line-number">55</pre><pre _ngcontent-eur-12="" class="line-number">56</pre><pre _ngcontent-eur-12="" class="line-number">57</pre><pre _ngcontent-eur-12="" class="line-number">58</pre><pre _ngcontent-eur-12="" class="line-number">59</pre><pre _ngcontent-eur-12="" class="line-number">60</pre><pre _ngcontent-eur-12="" class="line-number">61</pre><pre _ngcontent-eur-12="" class="line-number">62</pre><pre _ngcontent-eur-12="" class="line-number">63</pre><pre _ngcontent-eur-12="" class="line-number">64</pre><pre _ngcontent-eur-12="" class="line-number">65</pre>
            </div>
            <div _ngcontent-eur-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> * as Moment from <span class="hljs-string">'moment'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Chats, Messages} from <span class="hljs-string">'./collections'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">Meteor.startup(() =&gt; {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  <span class="hljs-keyword">if</span> (Chats.find().count()) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  <span class="hljs-keyword">let</span> chatId;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  chatId = Chats.insert({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    title: <span class="hljs-string">'Ethan Gonzalez'</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    picture: <span class="hljs-string">'https://randomuser.me/api/portraits/thumb/men/1.jpg'</span></pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  Messages.insert({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    chatId: chatId,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    content: <span class="hljs-string">'You on your way?'</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    createdAt: Moment().subtract(<span class="hljs-number">1</span>, <span class="hljs-string">'hours'</span>).toDate()</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  chatId = Chats.insert({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    title: <span class="hljs-string">'Bryan Wallace'</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    picture: <span class="hljs-string">'https://randomuser.me/api/portraits/thumb/lego/1.jpg'</span></pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  Messages.insert({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    chatId: chatId,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    content: <span class="hljs-string">'Hey, it\'s me'</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    createdAt: Moment().subtract(<span class="hljs-number">2</span>, <span class="hljs-string">'hours'</span>).toDate()</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  chatId = Chats.insert({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    title: <span class="hljs-string">'Avery Stewart'</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    picture: <span class="hljs-string">'https://randomuser.me/api/portraits/thumb/women/1.jpg'</span></pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  Messages.insert({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    chatId: chatId,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    content: <span class="hljs-string">'I should buy a boat'</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    createdAt: Moment().subtract(<span class="hljs-number">1</span>, <span class="hljs-string">'days'</span>).toDate()</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  chatId = Chats.insert({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    title: <span class="hljs-string">'Katie Peterson'</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    picture: <span class="hljs-string">'https://randomuser.me/api/portraits/thumb/women/2.jpg'</span></pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  Messages.insert({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    chatId: chatId,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    content: <span class="hljs-string">'Look at my mukluks!'</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    createdAt: Moment().subtract(<span class="hljs-number">4</span>, <span class="hljs-string">'days'</span>).toDate()</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  chatId = Chats.insert({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    title: <span class="hljs-string">'Ray Edwards'</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    picture: <span class="hljs-string">'https://randomuser.me/api/portraits/thumb/men/2.jpg'</span></pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  Messages.insert({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    chatId: chatId,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    content: <span class="hljs-string">'This is wicked good ice cream.'</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    createdAt: Moment().subtract(<span class="hljs-number">2</span>, <span class="hljs-string">'weeks'</span>).toDate()</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>What we did is simple. Once the server is ready, we look for existing chats, if no chat exists we will proceed the method and create new ones.</p>

<p>We also need to update the message model decleration to contain a <code ngNonBindable="">chatId</code> field:</p>

<p><diffbox step="3.12" tutorial="whatsapp2-ionic-tutorial" _nghost-eur-12=""><div _ngcontent-eur-12="" class="diffbox">
    <div _ngcontent-eur-12="" class="title-panel">
        <span _ngcontent-eur-12="" class="step-number">3.12</span> <span _ngcontent-eur-12="" class="commit-summary">Add 'chatId' property to message model</span>
        <a _ngcontent-eur-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/5b3ba44a4e11c21e1b6d58954af7860a2c1292d2">typings/models.d.ts</a>
    </div>
    <div _ngcontent-eur-12="" class="code-container">
        <div _ngcontent-eur-12="" class="scroll-container">
            <div _ngcontent-eur-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-number">8</pre><pre _ngcontent-eur-12="" class="line-number">9</pre><pre _ngcontent-eur-12="" class="line-number">10</pre><pre _ngcontent-eur-12="" class="line-number">11</pre><pre _ngcontent-eur-12="" class="line-number">12</pre><pre _ngcontent-eur-12="" class="line-number">13</pre><pre _ngcontent-eur-12="" class="line-number">14</pre>
            </div>
            <div _ngcontent-eur-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  <span class="hljs-keyword">interface</span> Message {</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">    _id?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    chatId?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">    content?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">    createdAt?: <span class="hljs-built_in">Date</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  }</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Since Meteor's API requires us to share some of the code in both client and server, we gonna have to import some of the files in our Meteor project in our Ionic project, and we wanna make these files as easyily to access accessable as possible. Thanks to Webpack, we can define module aliases instead of writing a full relative path, e.g. instead of writing:</p>

<pre><code ngNonBindable="">import * as Collections from '../../api/server/collections';</code></pre>

<p>We gonna write:</p>

<pre><code ngNonBindable="">import * as Collections from 'api/collections';</code></pre>

<p>All it requires is a simple adjustment in our <code ngNonBindable="">webpack.config.js</code>:</p>

<p><diffbox step="3.13" tutorial="whatsapp2-ionic-tutorial" _nghost-eur-12=""><div _ngcontent-eur-12="" class="diffbox">
    <div _ngcontent-eur-12="" class="title-panel">
        <span _ngcontent-eur-12="" class="step-number">3.13</span> <span _ngcontent-eur-12="" class="commit-summary">Add alias to api dir in webpack config</span>
        <a _ngcontent-eur-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/0fcce2322ae30e27857317ffb7b4bfc065d9a941">webpack.config.js</a>
    </div>
    <div _ngcontent-eur-12="" class="code-container">
        <div _ngcontent-eur-12="" class="scroll-container">
            <div _ngcontent-eur-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-number">15</pre><pre _ngcontent-eur-12="" class="line-number">16</pre><pre _ngcontent-eur-12="" class="line-number">17</pre><pre _ngcontent-eur-12="" class="line-number">18</pre><pre _ngcontent-eur-12="" class="line-number">19</pre><pre _ngcontent-eur-12="" class="line-number">20</pre><pre _ngcontent-eur-12="" class="line-number">21</pre><pre _ngcontent-eur-12="" class="line-number">22</pre><pre _ngcontent-eur-12="" class="line-number">23</pre><pre _ngcontent-eur-12="" class="line-number">24</pre>
            </div>
            <div _ngcontent-eur-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-context" className="line-context">    resolveExternals</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  ],</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  resolve: {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    extensions: [<span class="hljs-string">''</span>, <span class="hljs-string">'.webpack.js'</span>, <span class="hljs-string">'.web.js'</span>, <span class="hljs-string">'.ts'</span>, <span class="hljs-string">'.js'</span>],</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    alias: {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">      api: __dirname + <span class="hljs-string">'/api/server'</span></pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  },</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  <span class="hljs-built_in">module</span>: {</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">    loaders: [</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now we wanna have Meteor essentials available in our client so we can interface with our Meteor server. We gonna install a package called <code ngNonBindable="">meteor-client-side</code> which gonna provide us with them:</p>

<pre><code ngNonBindable="">$ npm install meteor-client-side --save</code></pre>

<p>And we gonna need to import it so it will be a part of our bundle:</p>

<p><diffbox step="3.15" tutorial="whatsapp2-ionic-tutorial" _nghost-eur-12=""><div _ngcontent-eur-12="" class="diffbox">
    <div _ngcontent-eur-12="" class="title-panel">
        <span _ngcontent-eur-12="" class="step-number">3.15</span> <span _ngcontent-eur-12="" class="commit-summary">Import 'meteor-client-side'</span>
        <a _ngcontent-eur-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/186917271c97625b7c3b8de10a7ffabc702506b5">app/app.ts</a>
    </div>
    <div _ngcontent-eur-12="" class="code-container">
        <div _ngcontent-eur-12="" class="scroll-container">
            <div _ngcontent-eur-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-number">1</pre><pre _ngcontent-eur-12="" class="line-number">2</pre><pre _ngcontent-eur-12="" class="line-number">3</pre><pre _ngcontent-eur-12="" class="line-number">4</pre><pre _ngcontent-eur-12="" class="line-number">5</pre>
            </div>
            <div _ngcontent-eur-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> <span class="hljs-string">'meteor-client-side'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Component} from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Platform, ionicBootstrap} from <span class="hljs-string">'ionic-angular'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {StatusBar} from <span class="hljs-string">'ionic-native'</span>;</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<blockquote><p><em>NOTE</em>: <code ngNonBindable="">meteor-client-side</code> will try to connect to <code ngNonBindable="">localhost:3000</code> by default. To change it, simply set a global object named <code ngNonBindable="">__meteor_runtime_config__</code> with a property called <code ngNonBindable="">DDP_DEFAULT_CONNECTION_URL</code> and set whatever server url you'd like to connect to.</p><p><em>TIP</em>: You can have a static separate front end app that works with a <code ngNonBindable="">Meteor</code> server. you can use <code ngNonBindable="">Meteor</code> as a back end server to any front end app without changing anything in your app structure or build process.</p></blockquote>

<p>As for now, Meteor packages can be accessed in the client using the following syntax:</p>

<pre><code ngNonBindable="">const {EJSON} = window.Package['ejson'];</code></pre>

<p>But in the server the method is different:</p>

<pre><code ngNonBindable="">import {EJSON} from 'meteor/ejson';</code></pre>

<p>Since we want this behavior to be consistent and identical, we gonna make the server's method for loading Meteor packages available in the client as well. Then again it only takes a simple configuration adjustment:</p>

<p><diffbox step="3.16" tutorial="whatsapp2-ionic-tutorial" _nghost-eur-12=""><div _ngcontent-eur-12="" class="diffbox">
    <div _ngcontent-eur-12="" class="title-panel">
        <span _ngcontent-eur-12="" class="step-number">3.16</span> <span _ngcontent-eur-12="" class="commit-summary">Add Meteor packages aliases to webpack config</span>
        <a _ngcontent-eur-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/cfd1a91039969649d4c9c71a025f1109228f79cd">webpack.config.js</a>
    </div>
    <div _ngcontent-eur-12="" class="code-container">
        <div _ngcontent-eur-12="" class="scroll-container">
            <div _ngcontent-eur-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-number">37</pre><pre _ngcontent-eur-12="" class="line-number">38</pre><pre _ngcontent-eur-12="" class="line-number">39</pre><pre _ngcontent-eur-12="" class="line-number">40</pre><pre _ngcontent-eur-12="" class="line-number">41</pre><pre _ngcontent-eur-12="" class="line-number">42</pre><pre _ngcontent-eur-12="" class="line-number">43</pre><pre _ngcontent-eur-12="" class="line-number">44</pre><pre _ngcontent-eur-12="" class="line-number">45</pre><pre _ngcontent-eur-12="" class="line-number">46</pre><pre _ngcontent-eur-12="" class="line-number">47</pre><pre _ngcontent-eur-12="" class="line-number">48</pre><pre _ngcontent-eur-12="" class="line-number">49</pre><pre _ngcontent-eur-12="" class="line-number">50</pre><pre _ngcontent-eur-12="" class="line-number">51</pre><pre _ngcontent-eur-12="" class="line-number">52</pre><pre _ngcontent-eur-12="" class="line-number">53</pre><pre _ngcontent-eur-12="" class="line-number">54</pre><pre _ngcontent-eur-12="" class="line-number">55</pre><pre _ngcontent-eur-12="" class="line-number">56</pre><pre _ngcontent-eur-12="" class="line-number">57</pre>
            </div>
            <div _ngcontent-eur-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-context" className="line-context">}</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveExternals</span>(<span class="hljs-params">context, request, callback</span>) </span>{</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> meteorPack(request, callback) ||</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">         cordovaPlugin(request, callback) ||</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">         callback();</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">}</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">meteorPack</span>(<span class="hljs-params">request, callback</span>) </span>{</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  <span class="hljs-keyword">var</span> match = request.match(<span class="hljs-regexp">/^meteor\/(.+)$/</span>);</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  <span class="hljs-keyword">var</span> pack = match &amp;&amp; match[<span class="hljs-number">1</span>];</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  <span class="hljs-keyword">if</span> (pack) {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    callback(<span class="hljs-literal">null</span>, <span class="hljs-string">'window.Package &amp;&amp; Package["'</span> + pack + <span class="hljs-string">'"]'</span>);</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">}</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cordovaPlugin</span>(<span class="hljs-params">request, callback</span>) </span>{</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  <span class="hljs-keyword">var</span> match = request.match(<span class="hljs-regexp">/^cordova\/(.+)$/</span>);</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  <span class="hljs-keyword">var</span> plugin = match &amp;&amp; match[<span class="hljs-number">1</span>];</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Our Meteor configuration in the client is ready! Now we can use the chats collection in the chats component as well. Instead of using an array of chats, we will be using a <a href="docs.meteor.com/api/collections.html#mongo_cursor">Mongo.Cursor</a> returned to us by queries we run on the chats collection:</p>

<p><diffbox step="3.17" tutorial="whatsapp2-ionic-tutorial" _nghost-eur-12=""><div _ngcontent-eur-12="" class="diffbox">
    <div _ngcontent-eur-12="" class="title-panel">
        <span _ngcontent-eur-12="" class="step-number">3.17</span> <span _ngcontent-eur-12="" class="commit-summary">Use chats collection in chats component</span>
        <a _ngcontent-eur-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/1f6785b60b178951a50f980fdff9c099e71d3068">app/pages/chats/chats.ts</a>
    </div>
    <div _ngcontent-eur-12="" class="code-container">
        <div _ngcontent-eur-12="" class="scroll-container">
            <div _ngcontent-eur-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-number">1</pre><pre _ngcontent-eur-12="" class="line-number">2</pre><pre _ngcontent-eur-12="" class="line-number">3</pre><pre _ngcontent-eur-12="" class="line-number">4</pre><pre _ngcontent-eur-12="" class="line-number">5</pre><pre _ngcontent-eur-12="" class="line-number">6</pre><pre _ngcontent-eur-12="" class="line-number">7</pre><pre _ngcontent-eur-12="" class="line-number">8</pre><pre _ngcontent-eur-12="" class="line-number">9</pre><pre _ngcontent-eur-12="" class="line-number">10</pre><pre _ngcontent-eur-12="" class="line-number">11</pre><pre _ngcontent-eur-12="" class="line-number">12</pre><pre _ngcontent-eur-12="" class="line-number">13</pre><pre _ngcontent-eur-12="" class="line-number">14</pre><pre _ngcontent-eur-12="" class="line-number">15</pre><pre _ngcontent-eur-12="" class="line-number">16</pre><pre _ngcontent-eur-12="" class="line-number">17</pre><pre _ngcontent-eur-12="" class="line-number">18</pre><pre _ngcontent-eur-12="" class="line-number">19</pre><pre _ngcontent-eur-12="" class="line-number">20</pre><pre _ngcontent-eur-12="" class="line-number">21</pre><pre _ngcontent-eur-12="" class="line-number">22</pre><pre _ngcontent-eur-12="" class="line-number">23</pre><pre _ngcontent-eur-12="" class="line-number">24</pre><pre _ngcontent-eur-12="" class="line-number">25</pre><pre _ngcontent-eur-12="" class="line-number">26</pre><pre _ngcontent-eur-12="" class="line-number">27</pre><pre _ngcontent-eur-12="" class="line-number">28</pre><pre _ngcontent-eur-12="" class="line-number">29</pre><pre _ngcontent-eur-12="" class="line-number">30</pre><pre _ngcontent-eur-12="" class="line-number">31</pre><pre _ngcontent-eur-12="" class="line-number">32</pre><pre _ngcontent-eur-12="" class="line-number">33</pre><pre _ngcontent-eur-12="" class="line-number">34</pre><pre _ngcontent-eur-12="" class="line-number">35</pre><pre _ngcontent-eur-12="" class="line-number">36</pre><pre _ngcontent-eur-12="" class="line-number">37</pre><pre _ngcontent-eur-12="" class="line-number">38</pre><pre _ngcontent-eur-12="" class="line-number">39</pre><pre _ngcontent-eur-12="" class="line-number">40</pre><pre _ngcontent-eur-12="" class="line-number">41</pre><pre _ngcontent-eur-12="" class="line-number">42</pre><pre _ngcontent-eur-12="" class="line-number">43</pre><pre _ngcontent-eur-12="" class="line-number">44</pre><pre _ngcontent-eur-12="" class="line-number">45</pre><pre _ngcontent-eur-12="" class="line-number">46</pre><pre _ngcontent-eur-12="" class="line-number">47</pre><pre _ngcontent-eur-12="" class="line-number">48</pre><pre _ngcontent-eur-12="" class="line-number">49</pre><pre _ngcontent-eur-12="" class="line-number">50</pre><pre _ngcontent-eur-12="" class="line-number">51</pre><pre _ngcontent-eur-12="" class="line-number">52</pre><pre _ngcontent-eur-12="" class="line-number">53</pre><pre _ngcontent-eur-12="" class="line-number">54</pre><pre _ngcontent-eur-12="" class="line-number">55</pre><pre _ngcontent-eur-12="" class="line-number">56</pre><pre _ngcontent-eur-12="" class="line-number">57</pre><pre _ngcontent-eur-12="" class="line-number">58</pre><pre _ngcontent-eur-12="" class="line-number">59</pre><pre _ngcontent-eur-12="" class="line-number">60</pre><pre _ngcontent-eur-12="" class="line-number">61</pre><pre _ngcontent-eur-12="" class="line-number">62</pre>
            </div>
            <div _ngcontent-eur-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Component} from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {MeteorComponent} from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {CalendarPipe} from <span class="hljs-string">'angular2-moment'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Mongo} from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Chat, Message} from <span class="hljs-string">'api/models'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Chats, Messages} from <span class="hljs-string">'api/collections'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">@Component({</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  templateUrl: <span class="hljs-string">'build/pages/chats/chats.html'</span>,</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  pipes: [CalendarPipe]</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">})</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> ChatsPage extends MeteorComponent {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  chats: Mongo.Cursor&lt;Chat&gt;;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    <span class="hljs-keyword">super</span>();</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.chats = <span class="hljs-keyword">this</span>.findChats();</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  removeChat(chat): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    Chats.remove(chat._id);</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  <span class="hljs-keyword">private</span> findChats(): Mongo.Cursor&lt;Chat&gt;{</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> chats = Chats.find({}, {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">      transform: <span class="hljs-keyword">this</span>.transformChat.bind(<span class="hljs-keyword">this</span>)</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    chats.observe({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">      changed: (newChat, oldChat) =&gt; <span class="hljs-keyword">this</span>.disposeChat(oldChat),</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">      removed: (chat) =&gt; <span class="hljs-keyword">this</span>.disposeChat(chat)</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> chats;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  <span class="hljs-keyword">private</span> transformChat(chat): Chat {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    chat.lastMessageComp = <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">      chat.lastMessage = <span class="hljs-keyword">this</span>.findLastMessage(chat);</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> chat;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  <span class="hljs-keyword">private</span> findLastMessage(chat): Message {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> Messages.findOne({</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">      chatId: chat._id</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    }, {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">      sort: {createdAt: <span class="hljs-number">-1</span>}</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  <span class="hljs-keyword">private</span> disposeChat(chat): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (chat.lastMessageComp) {</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">      chat.lastMessageComp.stop();</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>If you will look closely you will see that the component inherits from <a href="http://angular-meteor.com/api/angular2/0.4.2/meteorComponent">MeteorComponent</a> which exposes Meteor's API on the component and binds subscriptions and computations to our component, which means that once our component is destroyed then our subsriptions and computations are gonna be destroyed as well.</p>

<p>Since the messages are defined in a seperate collection and not as a nested object inside a chat document anymore, they need to be queried seperately. In addition, the last message of a chat can be changed, so we want it to be recomputated anytime the result of its query changes, therefore we wrapped its calculation insdie a <a href="docs.meteor.com/api/tracker.html#Tracker-autorun">Computation</a>. However, this method causes a memory leak issue since whenever a chat is being removed or replaced with another one, the computation is gonna keep running in the background until the entire component is destroyed. To solve it, we observed changes in the returned cursor using the <a href="docs.meteor.com/api/collections.html#Mongo-Cursor-observe">Mongo.Cursor.observe()</a> method, and now whenever a chat is removed or chaned its belonging last message computation is gonna stop as well, thanks to a callbak we defined called <code ngNonBindable="">disposeChat()</code>.</p>

<p>Inorder to be able to store a computation on a chat document we also need to update the chat model decleration to contain a <code ngNonBindable="">lastMessageComp</code> field:</p>

<p><diffbox step="3.18" tutorial="whatsapp2-ionic-tutorial" _nghost-eur-12=""><div _ngcontent-eur-12="" class="diffbox">
    <div _ngcontent-eur-12="" class="title-panel">
        <span _ngcontent-eur-12="" class="step-number">3.18</span> <span _ngcontent-eur-12="" class="commit-summary">Add 'lastMessageComp' property to chat model</span>
        <a _ngcontent-eur-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/1b37d993c059e98f0e9cf18b4f293e8c1e356783">typings/models.d.ts</a>
    </div>
    <div _ngcontent-eur-12="" class="code-container">
        <div _ngcontent-eur-12="" class="scroll-container">
            <div _ngcontent-eur-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-number">4</pre><pre _ngcontent-eur-12="" class="line-number">5</pre><pre _ngcontent-eur-12="" class="line-number">6</pre><pre _ngcontent-eur-12="" class="line-number">7</pre><pre _ngcontent-eur-12="" class="line-number">8</pre><pre _ngcontent-eur-12="" class="line-number">9</pre><pre _ngcontent-eur-12="" class="line-number">10</pre>
            </div>
            <div _ngcontent-eur-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-context" className="line-context">    title?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">    picture?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">    lastMessage?: Message;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">    lastMessageComp?: Tracker.Computation;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  <span class="hljs-keyword">interface</span> Message {</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Since we're not dealing with an array anymore, we can't iterate it in the view. We need a way to iterate a Mongo.Cursor using the <code ngNonBindable="">*ngFor</code> directive. That's where <a href="angular-meteor.com/angular2">Angular2-Meteor</a> kicks in. Let's install it:</p>

<pre><code ngNonBindable="">$ npm install angular2-meteor@0.6.2 --save</code></pre>

<p>And we gonna apply its providers during bootstrap in our app's main component, which will actually give us the iteration abilities:</p>

<p><diffbox step="3.20" tutorial="whatsapp2-ionic-tutorial" _nghost-eur-12=""><div _ngcontent-eur-12="" class="diffbox">
    <div _ngcontent-eur-12="" class="title-panel">
        <span _ngcontent-eur-12="" class="step-number">3.20</span> <span _ngcontent-eur-12="" class="commit-summary">Apply angular2-meteor providers on bootstrap</span>
        <a _ngcontent-eur-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/9d8f04d2df0e98a11dbd53a97fba1d688307f22b">app/app.ts</a>
    </div>
    <div _ngcontent-eur-12="" class="code-container">
        <div _ngcontent-eur-12="" class="scroll-container">
            <div _ngcontent-eur-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-number">3</pre><pre _ngcontent-eur-12="" class="line-number">4</pre><pre _ngcontent-eur-12="" class="line-number">5</pre><pre _ngcontent-eur-12="" class="line-number">6</pre><pre _ngcontent-eur-12="" class="line-number">7</pre><pre _ngcontent-eur-12="" class="line-number">8</pre><pre _ngcontent-eur-12="" class="line-number">9</pre><pre _ngcontent-eur-12="" class="line-number"> </pre><pre _ngcontent-eur-12="" class="line-number">25</pre><pre _ngcontent-eur-12="" class="line-number">26</pre><pre _ngcontent-eur-12="" class="line-number">27</pre><pre _ngcontent-eur-12="" class="line-number">28</pre>
            </div>
            <div _ngcontent-eur-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Component} from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Platform, ionicBootstrap} from <span class="hljs-string">'ionic-angular'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {StatusBar} from <span class="hljs-string">'ionic-native'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {METEOR_PROVIDERS} from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {TabsPage} from <span class="hljs-string">'./pages/tabs/tabs'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">}</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">ionicBootstrap(MyApp, [METEOR_PROVIDERS]);</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Angular2-Meteor provides us with more abilities which will be revealed and explained further in this tutorial.</p>

<p>The current version of angular2-meteor relies on Meteor packages called <code ngNonBindable="">check</code> and <code ngNonBindable="">ejson</code> to be global otherwise it breaks. Normally that's the way it should be, but since we're not using on a Meteor environment then we gonna have to explicitly define them inorder for angular2-meteor to properly work:</p>

<p><diffbox step="3.21" tutorial="whatsapp2-ionic-tutorial" _nghost-eur-12=""><div _ngcontent-eur-12="" class="diffbox">
    <div _ngcontent-eur-12="" class="title-panel">
        <span _ngcontent-eur-12="" class="step-number">3.21</span> <span _ngcontent-eur-12="" class="commit-summary">Expose 'check' and 'ejson' Meteor packages on window</span>
        <a _ngcontent-eur-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/c5aba23b56a4ad276aa732ef2e6aec8ac0543f87">app/app.ts</a>
    </div>
    <div _ngcontent-eur-12="" class="code-container">
        <div _ngcontent-eur-12="" class="scroll-container">
            <div _ngcontent-eur-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-number">4</pre><pre _ngcontent-eur-12="" class="line-number">5</pre><pre _ngcontent-eur-12="" class="line-number">6</pre><pre _ngcontent-eur-12="" class="line-number">7</pre><pre _ngcontent-eur-12="" class="line-number">8</pre><pre _ngcontent-eur-12="" class="line-number">9</pre><pre _ngcontent-eur-12="" class="line-number">10</pre><pre _ngcontent-eur-12="" class="line-number">11</pre><pre _ngcontent-eur-12="" class="line-number">12</pre><pre _ngcontent-eur-12="" class="line-number">13</pre><pre _ngcontent-eur-12="" class="line-number">14</pre><pre _ngcontent-eur-12="" class="line-number">15</pre><pre _ngcontent-eur-12="" class="line-number">16</pre><pre _ngcontent-eur-12="" class="line-number">17</pre><pre _ngcontent-eur-12="" class="line-number">18</pre>
            </div>
            <div _ngcontent-eur-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Platform, ionicBootstrap} from <span class="hljs-string">'ionic-angular'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {StatusBar} from <span class="hljs-string">'ionic-native'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {METEOR_PROVIDERS} from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> * as Check from <span class="hljs-string">'meteor/check'</span>;</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> * as EJSON from <span class="hljs-string">'meteor/ejson'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {TabsPage} from <span class="hljs-string">'./pages/tabs/tabs'</span>;</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"><span class="hljs-built_in">Object</span>.assign(<span class="hljs-built_in">window</span>,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  Check,</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">  EJSON</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added">);</pre><pre _ngcontent-eur-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">@Component({</pre><pre _ngcontent-eur-12="" class="line-context" className="line-context">  template: <span class="hljs-string">'&lt;ion-nav [root]="rootPage"&gt;&lt;/ion-nav&gt;'</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now all the clients can be synced with our server in real time!</p>

<p>If you will go ahead and open another instance of the app, you can see that once you remove one of the chats in one instance, it will update the other instance's view as well.</p>

<p>You can also update the chats collection directly from the database as well and see how the view re-renders. To do so, simply navigate to the <code ngNonBindable="">api</code> dir and type <code ngNonBindable="">meteor mongo</code> while our Meteor server is up.</p>

<p>Once your'e connected to the database, simply type:</p>

<pre><code ngNonBindable="">chat = db.chats.findOne({})
db.chats.remove({_id: chat._id})</code></pre>

<p>And see how the view updates.</p></tutorial-page-content>
    </div>
</div></tutorial></app>


</body></html>