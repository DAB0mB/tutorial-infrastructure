<!DOCTYPE html><html lang="en"><head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic,800italic" rel="stylesheet" type="text/css">
    <title>Angular2-Meteor</title>
    <meta charset="UTF-8">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <base href="/">
    <style>.logo[_ngcontent-cxe-1] {
  width: auto;
  height: 2em; }

.main-toolbar[_ngcontent-cxe-1] {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  box-shadow: 3px 0 6px rgba(0, 0, 0, 0.3);
  background: #90A4AE; }
  .main-toolbar[_ngcontent-cxe-1] a[_ngcontent-cxe-1] {
    color: white;
    text-decoration: none; }

.fill-remaining-space[_ngcontent-cxe-1] {
  -ms-flex: 1 1 auto;
      flex: 1 1 auto; }

.tutorials-dropdown[_ngcontent-cxe-1] {
  position: relative;
  display: inline-block; }
  .tutorials-dropdown[_ngcontent-cxe-1] .dropdown-content[_ngcontent-cxe-1] {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 500px;
    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    padding: 7px; }

.tutorials-dropdown[_ngcontent-cxe-1]:hover .dropdown-content[_ngcontent-cxe-1] {
  display: block; }</style><style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0; }

/* Base color: saturation 0; */
.hljs,
.hljs-subst {
  color: #444; }

.hljs-comment {
  color: #888888; }

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold; }

/* User color: hue: 0 */
.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000; }

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold; }

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060; }

/* Language color: hue: 90; */
.hljs-literal {
  color: #78A960; }

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300; }

/* Meta color: hue: 200 */
.hljs-meta {
  color: #1f7199; }

.hljs-meta-string {
  color: #4d99bf; }

/* Misc effects */
.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8; }

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic; }

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold; }

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080; }

.hljs-string,
.hljs-doctag {
  color: #d14; }

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold; }

.hljs-subst {
  font-weight: normal; }

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold; }

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal; }

.hljs-regexp,
.hljs-link {
  color: #009926; }

.hljs-symbol,
.hljs-bullet {
  color: #990073; }

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3; }

.hljs-meta {
  color: #999;
  font-weight: bold; }

.hljs-deletion {
  background: #fdd; }

.hljs-addition {
  background: #dfd; }

.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

a {
  color: black; }

body {
  padding: 0;
  margin: 0;
  padding-top: 64px;
  font-family: 'Open Sans', sans-serif; }

pre {
  background: transparent;
  border: none;
  white-space: pre-wrap; }

code {
  white-space: pre-wrap; }

img[alt="angular1-wa-ionic-cli"], img[alt="angular1-wa-meteor-cli"] {
  width: 30%; }

.side-nav .step-item, .side-nav .api-list-item {
  margin: 0;
  padding: 0;
  border-bottom: 1px solid #CFD8DC;
  color: #546E7A; }

.side-nav .step-link, .side-nav .api-item-link, .side-nav .apis-versions-list li {
  text-decoration: none;
  color: #536E7A;
  display: block;
  font-size: 14px;
  padding: 16px 16px;
  margin: 0;
  background-color: #ECEFF1; }

.side-nav .active-step a {
  font-weight: bold; }

.side-nav .tutorial-steps-list, .side-nav .apis-list, .side-nav .apis-versions-list {
  list-style: none;
  padding-left: 0;
  margin-top: 8px; }

.apis-versions-list {
  margin: 0 !important; }
  .apis-versions-list li {
    padding: 8px !important; }
    .apis-versions-list li a {
      text-decoration: none; }

.dropdown-content {
  column-count: 2;
  column-width: 220px;
  column-rule: 1px solid #ECEFF1;
  column-gap: 0; }
  .dropdown-content .tutorial-steps-list {
    margin: 0 !important;
    list-style: none;
    padding: 0; }
    .dropdown-content .tutorial-steps-list .step-item {
      padding: 5px 0 5px 10px;
      border-bottom: 1px solid #ECEFF1;
      break-inside: avoid-column; }
      .dropdown-content .tutorial-steps-list .step-item a {
        text-decoration: none;
        font-size: small;
        color: black; }
      .dropdown-content .tutorial-steps-list .step-item .bold {
        font-weight: bold; }

.md-primary {
  background: #263238 !important;
  color: white !important;
  cursor: pointer !important; }
  .md-primary[disabled] {
    color: lightgray !important;
    cursor: not-allowed !important; }

tutorial-page-content pre code[ngnonbindable] {
  background: #eee;
  display: block;
  width: 90%;
  border-radius: 5px;
  padding: 10px; }

tutorial-page-content blockquote {
  margin: 0;
  position: relative;
  background: #eee;
  border-radius: 5px; }
  tutorial-page-content blockquote:before {
    content: '!';
    font-weight: bold;
    position: absolute;
    vertical-align: top;
    font-size: 2vw;
    color: white;
    margin-left: 6px; }
  tutorial-page-content blockquote p {
    border-left: 1px solid white;
    padding: 10px;
    margin-left: 20px; }

.diffbox {
  border-radius: 10px; }
  .diffbox .title-panel {
    border-radius: 10px 10px 0 0; }
  .diffbox .code-container {
    border-radius: 0 0 10px 10px; }

api-ref-container p code, api-ref-container ul li code {
  font-family: 'Open Sans', sans-serif; }

api-ref-container a {
  color: #263238;
  text-decoration: none;
  font-weight: bold; }

api-ref-container h3 {
  background: #eee;
  border-radius: 5px;
  padding: 4px;
  margin-top: 30px; }

api-ref-container table {
  width: 100%;
  background: #eee;
  border-radius: 5px;
  border-spacing: 0; }
  api-ref-container table thead {
    background: #546E7A;
    color: #eee;
    border-radius: 5px; }
    api-ref-container table thead tr {
      background: #546E7A;
      border-radius: 5px; }
      api-ref-container table thead tr th {
        padding: 6px; }
  api-ref-container table tbody td {
    padding: 5px; }
</style><style>/** * Mixin that creates a new stacking context. * see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */ /** * This mixin hides an element visually. * That means it's still accessible for screen-readers but not visible in view. */ /** * Forces an element to grow to fit floated contents; used as as an alternative to * `overflow: hidden;` because it doesn't cut off contents. */ /** * A mixin, which generates temporary ink ripple on a given component. * When $bindToParent is set to true, it will check for the focused class on the same selector as you included * that mixin. * It is also possible to specify the color palette of the temporary ripple. By default it uses the * accent palette for its background. */ md-toolbar { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; min-height: 64px; font-size: 20px; font-weight: 400; font-family: Roboto, "Helvetica Neue", sans-serif; padding: 0 16px; -webkit-box-orient: vertical; -webkit-box-direction: normal; -ms-flex-direction: column; flex-direction: column; background: whitesmoke; color: rgba(0, 0, 0, 0.87); } md-toolbar.md-primary { background: #009688; color: white; } md-toolbar.md-accent { background: #9c27b0; color: rgba(255, 255, 255, 0.870588); } md-toolbar.md-warn { background: #f44336; color: white; } md-toolbar md-toolbar-row { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; height: 64px; -webkit-box-orient: horizontal; -webkit-box-direction: normal; -ms-flex-direction: row; flex-direction: row; -webkit-box-align: center; -ms-flex-align: center; align-items: center; } </style><style>/** * A collection of mixins and CSS classes that can be used to apply elevation to a material * element. * See: https://www.google.com/design/spec/what-is-material/elevation-shadows.html * Examples: * * * .md-foo { *   @include $md-elevation(2); * *   &:active { *     @include $md-elevation(8); *   } * } * * <div id="external-card" class="md-elevation-z2"><p>Some content</p></div> * * For an explanation of the design behind how elevation is implemented, see the design doc at * https://goo.gl/Kq0k9Z. */ /** * The css property used for elevation. In most cases this should not be changed. It is exposed * as a variable for abstraction / easy use when needing to reference the property directly, for * example in a will-change rule. */ /** The default duration value for elevation transitions. */ /** The default easing value for elevation transitions. */ /** * Applies the correct css rules to an element to give it the elevation specified by $zValue. * The $zValue must be between 0 and 24. */ /** * Returns a string that can be used as the value for a transition property for elevation. * Calling this function directly is useful in situations where a component needs to transition * more than one property. * * .foo { *   transition: md-elevation-transition-property-value(), opacity 100ms ease; *   will-change: $md-elevation-property, opacity; * } */ /** * Applies the correct css rules needed to have an element transition between elevations. * This mixin should be applied to elements whose elevation values will change depending on their * context (e.g. when active or disabled). */ /** Applies a property to an md-button element for each of the supported palettes. */ /** Applies a focus style to an md-button element for each of the supported palettes. */ [md-raised-button], [md-fab], [md-mini-fab], [md-button], [md-icon-button] { box-sizing: border-box; position: relative; background: transparent; text-align: center; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; outline: none; border: none; display: inline-block; white-space: nowrap; text-decoration: none; vertical-align: baseline; font-size: 14px; font-family: Roboto, "Helvetica Neue", sans-serif; font-weight: 500; color: currentColor; margin: 0; min-width: 88px; line-height: 36px; padding: 0 16px; border-radius: 3px; } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab], .md-primary[md-button], .md-primary[md-icon-button] { color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab], .md-accent[md-button], .md-accent[md-icon-button] { color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab], .md-warn[md-button], .md-warn[md-icon-button] { color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-primary[disabled][md-button], .md-primary[disabled][md-icon-button], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-accent[disabled][md-button], .md-accent[disabled][md-icon-button], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], .md-warn[disabled][md-button], .md-warn[disabled][md-icon-button], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab], [disabled][disabled][md-button], [disabled][disabled][md-icon-button] { color: rgba(0, 0, 0, 0.38); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab], [disabled][md-button], [disabled][md-icon-button] { cursor: default; } .md-button-focus[md-raised-button]::after, .md-button-focus[md-fab]::after, .md-button-focus[md-mini-fab]::after, .md-button-focus[md-button]::after, .md-button-focus[md-icon-button]::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } .md-button-focus.md-primary[md-raised-button]::after, .md-button-focus.md-primary[md-fab]::after, .md-button-focus.md-primary[md-mini-fab]::after, .md-button-focus.md-primary[md-button]::after, .md-button-focus.md-primary[md-icon-button]::after { background-color: rgba(0, 150, 136, 0.12); } .md-button-focus.md-accent[md-raised-button]::after, .md-button-focus.md-accent[md-fab]::after, .md-button-focus.md-accent[md-mini-fab]::after, .md-button-focus.md-accent[md-button]::after, .md-button-focus.md-accent[md-icon-button]::after { background-color: rgba(156, 39, 176, 0.12); } .md-button-focus.md-warn[md-raised-button]::after, .md-button-focus.md-warn[md-fab]::after, .md-button-focus.md-warn[md-mini-fab]::after, .md-button-focus.md-warn[md-button]::after, .md-button-focus.md-warn[md-icon-button]::after { background-color: rgba(244, 67, 54, 0.12); } [md-raised-button], [md-fab], [md-mini-fab] { box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); background-color: #fafafa; -webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0); -webkit-transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { color: white; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { color: rgba(255, 255, 255, 0.870588); } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { color: white; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { color: rgba(0, 0, 0, 0.38); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { background-color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { background-color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { background-color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { background-color: rgba(0, 0, 0, 0.12); } [md-raised-button]:active, [md-fab]:active, [md-mini-fab]:active { box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab] { box-shadow: none; } [md-button][disabled]:hover.md-primary, [md-button][disabled]:hover.md-accent, [md-button][disabled]:hover.md-warn, [md-button][disabled]:hover:hover { background-color: transparent; } [md-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 56px; height: 56px; padding: 0; } [md-fab] i, [md-fab] md-icon { padding: 16px 0; } [md-mini-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 40px; height: 40px; padding: 0; } [md-mini-fab] i, [md-mini-fab] md-icon { padding: 8px 0; } [md-icon-button] { min-width: 0; padding: 0; width: 40px; height: 40px; line-height: 24px; border-radius: 50%; } [md-icon-button] .md-button-wrapper > * { vertical-align: middle; } [md-button]:hover::after, [md-icon-button]:hover::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } [md-button]:hover.md-primary::after, [md-icon-button]:hover.md-primary::after { background-color: rgba(0, 150, 136, 0.12); } [md-button]:hover.md-accent::after, [md-icon-button]:hover.md-accent::after { background-color: rgba(156, 39, 176, 0.12); } [md-button]:hover.md-warn::after, [md-icon-button]:hover.md-warn::after { background-color: rgba(244, 67, 54, 0.12); } @media screen and (-ms-high-contrast: active) { .md-raised-button, .md-fab, .md-mini-fab { border: 1px solid #fff; } } </style><style>.side-nav[_ngcontent-cxe-6] {
  background: #ECEFF1;
  width: 232px;
  bottom: 0;
  overflow: auto;
  z-index: 100;
  border-right: 1px solid rgba(0, 0, 0, 0.3); }
  .side-nav[_ngcontent-cxe-6] ul[_ngcontent-cxe-6] {
    margin-top: 8px; }

tutorials-versions[_ngcontent-cxe-6] {
  margin-left: 10px;
  margin-top: 10px;
  display: block; }

.improv-button[_ngcontent-cxe-6] {
  margin-left: 50px; }

.right-buttons[_ngcontent-cxe-6] {
  float: right;
  margin-right: 250px;
  margin-top: 10px; }

.tutorial-title[_ngcontent-cxe-6] {
  margin: 15px;
  float: left;
  font-size: larger;
  font-weight: bold; }

.top-navigation[_ngcontent-cxe-6] {
  position: fixed;
  margin-top: -60px;
  width: 100%;
  background-color: #ECEFF1;
  height: 60px;
  z-index: 50; }

.tutorial-content[_ngcontent-cxe-6] {
  margin-top: 60px;
  padding: 20px; }

.tutorials-container[_ngcontent-cxe-6] {
  padding-left: 230px; }

.l-pinned-top[_ngcontent-cxe-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px; }

.l-pinned-left[_ngcontent-cxe-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px; }

.l-left[_ngcontent-cxe-6] {
  float: left; }

.l-right[_ngcontent-cxe-6] {
  float: right; }

.l-relative[_ngcontent-cxe-6], .docs-content[_ngcontent-cxe-6] {
  position: relative; }

.l-absolute[_ngcontent-cxe-6] {
  position: absolute; }

.l-fixed[_ngcontent-cxe-6] {
  position: fixed; }

.l-offset-side-nav[_ngcontent-cxe-6] {
  padding-left: 232px; }

.l-offset-nav[_ngcontent-cxe-6] {
  padding-top: 64px; }</style><style>.tutorial-version[_ngcontent-cxe-7] {
            margin-left: 10px;
        }
        
        .active[_ngcontent-cxe-7] {
            color: #b3e5fc !important;
        }</style><style>.diffbox[_ngcontent-cxe-12] {
  border: 1px solid #eee;
  -webkit-text-size-adjust: 100%;
  margin: 1.5em 0; }
  .diffbox[_ngcontent-cxe-12] .title-panel[_ngcontent-cxe-12] {
    padding: 5px 12px;
    background: #eee;
    border-bottom: solid 1px #eee;
    color: #333;
    overflow: auto; }
    .diffbox[_ngcontent-cxe-12] .title-panel[_ngcontent-cxe-12] .github-commit-link[_ngcontent-cxe-12] {
      float: right;
      color: black;
      text-decoration: none;
      border-bottom: none !important; }
  .diffbox[_ngcontent-cxe-12] .code-container[_ngcontent-cxe-12] {
    overflow-x: auto;
    position: relative;
    padding: 9px 3px 3px 0;
    background: #f8f8f8; }
    .diffbox[_ngcontent-cxe-12] .code-container[_ngcontent-cxe-12] .scroll-container[_ngcontent-cxe-12] {
      display: inline-block;
      min-width: 100%;
      overflow: hidden; }
    .diffbox[_ngcontent-cxe-12] .code-container[_ngcontent-cxe-12] pre[_ngcontent-cxe-12] {
      margin: 0;
      padding: 0;
      background-color: transparent; }
      .diffbox[_ngcontent-cxe-12] .code-container[_ngcontent-cxe-12] pre.line-added[_ngcontent-cxe-12] {
        background: #eaffea; }
      .diffbox[_ngcontent-cxe-12] .code-container[_ngcontent-cxe-12] pre.line-removed[_ngcontent-cxe-12] {
        background: #ff9ea2; }
    .diffbox[_ngcontent-cxe-12] .code-container[_ngcontent-cxe-12] .line-content[_ngcontent-cxe-12] {
      padding-left: 36px;
      overflow: hidden; }
      .diffbox[_ngcontent-cxe-12] .code-container[_ngcontent-cxe-12] .line-content[_ngcontent-cxe-12] .hljs-comment[_ngcontent-cxe-12] {
        color: #777; }
    .diffbox[_ngcontent-cxe-12] .code-container[_ngcontent-cxe-12] .line-numbers[_ngcontent-cxe-12] {
      text-align: right;
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      -o-user-select: none;
      position: absolute;
      width: 25px; }
      .diffbox[_ngcontent-cxe-12] .code-container[_ngcontent-cxe-12] .line-numbers[_ngcontent-cxe-12] .line-number[_ngcontent-cxe-12] {
        color: #aaa;
        font-style: italic; }</style></head><body><universal-styles></universal-styles>


<app _nghost-cxe-1=""><md-toolbar _ngcontent-cxe-1="" class="main-toolbar md-primary"><div class="md-toolbar-layout"> <md-toolbar-row> 
    <a _ngcontent-cxe-1="" href="/"><img _ngcontent-cxe-1="" class="logo" src="/assets/images/logo.png"></a>
    <div _ngcontent-cxe-1="" class="tutorials-dropdown">
        <button _ngcontent-cxe-1="" md-button=""><span class="md-button-wrapper">Tutorials</span> </button>
        <div _ngcontent-cxe-1="" class="dropdown-content">
            <steps-list _ngcontent-cxe-1="" prefix="/tutorials/socially"><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/folder-structure">8. Folder Structure</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/css-sass-and-bootstrap">18. CSS, SASS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ionic2">23. Ionic2</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/next-steps">25. Next Steps</a>
    </li>
    <!--template bindings={}--><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/whatsapp">WhatsApp clone with Angular &amp; Meteor</a>
    </li><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/migration/angular2/introduction">Blaze to Angular 2 Migration tutorial</a>
    </li>
</ul>
</steps-list>
        </div>
    </div>
    <a _ngcontent-cxe-1="" href="/angular2/"><button _ngcontent-cxe-1="" md-button=""><span class="md-button-wrapper">Angular 2</span> </button></a>
    <a _ngcontent-cxe-1="" href="/api/angular2-meteor/latest/MeteorComponent"><button _ngcontent-cxe-1="" md-button=""><span class="md-button-wrapper">API Reference</span> </button></a>
    <span _ngcontent-cxe-1="" class="fill-remaining-space"></span>
    <a _ngcontent-cxe-1="" href="https://github.com/Urigo/angular2-meteor" target="_blank"><button _ngcontent-cxe-1="" md-button=""><span class="md-button-wrapper">GitHub</span> </button></a>
    <a _ngcontent-cxe-1="" href="http://info.meteor.com/blog/author/uri-goldshtein?__hstc=219992390.b4a81f3b906b078dac633307097097f5.1471207723059.1471890076881.1471938647239.7&amp;__hssc=219992390.3.1471938647239&amp;__hsfp=714783454" target="_blank"><button _ngcontent-cxe-1="" md-button=""><span class="md-button-wrapper">Blog</span> </button></a>
    <a _ngcontent-cxe-1="" href="https://docs.google.com/forms/d/e/1FAIpQLSed3JZ0EAcSzkX8Y-iEtvNQRfjeyP2ICQvYMs00ewdmKaplwA/viewform" target="_blank"><button _ngcontent-cxe-1="" md-button=""><span class="md-button-wrapper">Contact Us</span> </button></a>
    <a _ngcontent-cxe-1="" href="/manifesto"><button _ngcontent-cxe-1="" md-button=""><span class="md-button-wrapper">Manifesto</span> </button></a>
    <a _ngcontent-cxe-1="" href="/about"><button _ngcontent-cxe-1="" md-button=""><span class="md-button-wrapper">About us</span> </button></a>
 </md-toolbar-row>  </div></md-toolbar>
<router-outlet _ngcontent-cxe-1=""></router-outlet><tutorial _nghost-cxe-6=""><div _ngcontent-cxe-6="" class="tutorials-container">
    <nav _ngcontent-cxe-6="" class="side-nav l-pinned-left l-layer-4 l-offset-nav">
        <tutorials-versions _ngcontent-cxe-6="" _nghost-cxe-7=""><!--template bindings={}--></tutorials-versions>
        <steps-list _ngcontent-cxe-6=""><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/setup">1. Initial setup</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/chats-page">2. Chats page</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/meteor-server-side">3. Realtime Meteor Server</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/messages-page">4. Messages Page</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/authentication">5. Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/chats-mutations">6. Chats Creation &amp; Removal</a>
    </li><li class="step-item active-step" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/privacy">7. Privacy &amp; Security</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp2/ionic/summary">8. Summary</a>
    </li>
    <!--template bindings={}-->
</ul>
</steps-list>
    </nav>
    <div _ngcontent-cxe-6="" class="top-navigation">
        <span _ngcontent-cxe-6="" class="tutorial-title" stepName="">Privacy &amp; Security</span>
        <div _ngcontent-cxe-6="" class="right-buttons">
            <a _ngcontent-cxe-6="" class="md-primary" md-raised-button="" tutorialNavigation="previous" href="/tutorials/whatsapp2/ionic/chats-mutations">Previous</a>
            <a _ngcontent-cxe-6="" class="md-primary" codeDiffLink="" md-raised-button="" href="https://github.com/DAB0mB/ionic2-meteor-messenger/compare/step_05...step_06">Code Diff</a>
            <a _ngcontent-cxe-6="" class="md-primary" md-raised-button="" tutorialNavigation="next" href="/tutorials/whatsapp2/ionic/summary">Next</a>
            <a _ngcontent-cxe-6="" class="md-primary improv-button" md-raised-button="" href="https://github.com/Urigo/tutorial-infrastructure/edit/master/static-website/tutorials/whatsapp2/ionic/privacy.html">Improve This Document</a>
        </div>
    </div>
    <div _ngcontent-cxe-6="" class="tutorial-content">
        <router-outlet _ngcontent-cxe-6=""></router-outlet><tutorial-page><div class="tutorial-container"></div></tutorial-page><tutorial-page-content><p>In this step we gonna take care of the app's security and encapsulation, since we don't want the users to do whatever they want, and we don't want them to be able to see content which is unrelevant for them.</p>

<p>We gonna start by removing a Meteor package named <code ngNonBindable="">insecure</code>.</p>

<p>This package provides the client with the ability to run collection mutation methods. This is a behavior we are not intrested in since removing data and creating data should be done in the server and only after certain validations.</p>

<p>Meteor includes this package by default only for development purposes and it should be removed once our app is ready for production.</p>

<p>So let's remove this package by running this command:</p>

<pre><code ngNonBindable="">$ meteor remove insecure</code></pre>

<p>Now that we don't have the ability to remove whatever document we want anymore, we need to update the logic for the <code ngNonBindable="">removeChat()</code> method in our chats component.</p>

<p>First we need to implement the corresponding method in our server:</p>

<p><diffbox step="7.2" tutorial="whatsapp2-ionic-tutorial" _nghost-cxe-12=""><div _ngcontent-cxe-12="" class="diffbox">
    <div _ngcontent-cxe-12="" class="title-panel">
        <span _ngcontent-cxe-12="" class="step-number">7.2</span> <span _ngcontent-cxe-12="" class="commit-summary">Add 'removeChat()' method to api</span>
        <a _ngcontent-cxe-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/7f931357876ca3a44d8a1e17e7ac3dc9a27df11c">api/server/methods.ts</a>
    </div>
    <div _ngcontent-cxe-12="" class="code-container">
        <div _ngcontent-cxe-12="" class="scroll-container">
            <div _ngcontent-cxe-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-number">47</pre><pre _ngcontent-cxe-12="" class="line-number">48</pre><pre _ngcontent-cxe-12="" class="line-number">49</pre><pre _ngcontent-cxe-12="" class="line-number">50</pre><pre _ngcontent-cxe-12="" class="line-number">51</pre><pre _ngcontent-cxe-12="" class="line-number">52</pre><pre _ngcontent-cxe-12="" class="line-number">53</pre><pre _ngcontent-cxe-12="" class="line-number">54</pre><pre _ngcontent-cxe-12="" class="line-number">55</pre><pre _ngcontent-cxe-12="" class="line-number">56</pre><pre _ngcontent-cxe-12="" class="line-number">57</pre><pre _ngcontent-cxe-12="" class="line-number">58</pre><pre _ngcontent-cxe-12="" class="line-number">59</pre><pre _ngcontent-cxe-12="" class="line-number">60</pre><pre _ngcontent-cxe-12="" class="line-number">61</pre><pre _ngcontent-cxe-12="" class="line-number">62</pre><pre _ngcontent-cxe-12="" class="line-number">63</pre><pre _ngcontent-cxe-12="" class="line-number">64</pre><pre _ngcontent-cxe-12="" class="line-number">65</pre><pre _ngcontent-cxe-12="" class="line-number">66</pre><pre _ngcontent-cxe-12="" class="line-number">67</pre>
            </div>
            <div _ngcontent-cxe-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-context" className="line-context">    Chats.insert(chat);</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">  },</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  removeChat(chatId: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'unauthorized'</span>,</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      <span class="hljs-string">'User must be logged-in to remove chat'</span>);</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    check(chatId, nonEmptyString);</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> chatExists = !!Chats.find(chatId).count();</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (!chatExists) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'chat-not-exists'</span>,</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      <span class="hljs-string">'Chat doesn\'t exist'</span>);</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    Messages.remove({chatId});</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    Chats.remove(chatId);</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  },</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">  addMessage(chatId: <span class="hljs-built_in">string</span>, content: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'unauthorized'</span>,</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">      <span class="hljs-string">'User must be logged-in to create a new chat'</span>);</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And now we need to call this method from the component:</p>

<p><diffbox step="7.3" tutorial="whatsapp2-ionic-tutorial" _nghost-cxe-12=""><div _ngcontent-cxe-12="" class="diffbox">
    <div _ngcontent-cxe-12="" class="title-panel">
        <span _ngcontent-cxe-12="" class="step-number">7.3</span> <span _ngcontent-cxe-12="" class="commit-summary">Replace direct chat removal with 'removeChat()' method in chats component</span>
        <a _ngcontent-cxe-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/734ab1557747402ccdcc5ea0cad2dc11019256d8">app/pages/chats/chats.ts</a>
    </div>
    <div _ngcontent-cxe-12="" class="code-container">
        <div _ngcontent-cxe-12="" class="scroll-container">
            <div _ngcontent-cxe-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-number">35</pre><pre _ngcontent-cxe-12="" class="line-number">36</pre><pre _ngcontent-cxe-12="" class="line-number">37</pre><pre _ngcontent-cxe-12="" class="line-number">38</pre><pre _ngcontent-cxe-12="" class="line-number">39</pre><pre _ngcontent-cxe-12="" class="line-number">40</pre><pre _ngcontent-cxe-12="" class="line-number">41</pre>
            </div>
            <div _ngcontent-cxe-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">  removeChat(chat): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.call(<span class="hljs-string">'removeChat'</span>, chat._id);</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">  showMessages(chat): <span class="hljs-built_in">void</span> {</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Right now all the chats are published to all the clients which is not very good for privacy. Let's fix that.</p>

<p>First thing we need to do inorder to stop all the automatic publication of information is to remove the <code ngNonBindable="">autopublish</code> package from the Meteor server:</p>

<pre><code ngNonBindable="">$ meteor remove autopublish</code></pre>

<p>We will now add the <a href="https://atmospherejs.com/reywood/publish-composite">publish-composite</a> package which will help us implement joined collection pubications.</p>

<pre><code ngNonBindable="">$ meteor add reywood:publish-composite</code></pre>

<p>And we will install its belonging typings as well</p>

<pre><code ngNonBindable="">$ typings install dt~meteor-publish-composite --save --global</code></pre>

<p>Now we need to explicitly define our publications. Let's start by sending the users' information.</p>

<p>Create a file named <code ngNonBindable="">publications.ts</code> under the <code ngNonBindable="">api/server</code> dir with the following contents:</p>

<p><diffbox step="7.7" tutorial="whatsapp2-ionic-tutorial" _nghost-cxe-12=""><div _ngcontent-cxe-12="" class="diffbox">
    <div _ngcontent-cxe-12="" class="title-panel">
        <span _ngcontent-cxe-12="" class="step-number">7.7</span> <span _ngcontent-cxe-12="" class="commit-summary">Add publications file to api</span>
        <a _ngcontent-cxe-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/669968268688055d39261182aba80cf6d4ca5488">api/server/publications.ts</a>
    </div>
    <div _ngcontent-cxe-12="" class="code-container">
        <div _ngcontent-cxe-12="" class="scroll-container">
            <div _ngcontent-cxe-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-number">1</pre><pre _ngcontent-cxe-12="" class="line-number">2</pre><pre _ngcontent-cxe-12="" class="line-number">3</pre><pre _ngcontent-cxe-12="" class="line-number">4</pre><pre _ngcontent-cxe-12="" class="line-number">5</pre><pre _ngcontent-cxe-12="" class="line-number">6</pre><pre _ngcontent-cxe-12="" class="line-number">7</pre><pre _ngcontent-cxe-12="" class="line-number">8</pre><pre _ngcontent-cxe-12="" class="line-number">9</pre><pre _ngcontent-cxe-12="" class="line-number">10</pre><pre _ngcontent-cxe-12="" class="line-number">11</pre><pre _ngcontent-cxe-12="" class="line-number">12</pre><pre _ngcontent-cxe-12="" class="line-number">13</pre><pre _ngcontent-cxe-12="" class="line-number">14</pre><pre _ngcontent-cxe-12="" class="line-number">15</pre><pre _ngcontent-cxe-12="" class="line-number">16</pre><pre _ngcontent-cxe-12="" class="line-number">17</pre><pre _ngcontent-cxe-12="" class="line-number">18</pre><pre _ngcontent-cxe-12="" class="line-number">19</pre><pre _ngcontent-cxe-12="" class="line-number">20</pre><pre _ngcontent-cxe-12="" class="line-number">21</pre><pre _ngcontent-cxe-12="" class="line-number">22</pre><pre _ngcontent-cxe-12="" class="line-number">23</pre><pre _ngcontent-cxe-12="" class="line-number">24</pre><pre _ngcontent-cxe-12="" class="line-number">25</pre><pre _ngcontent-cxe-12="" class="line-number">26</pre><pre _ngcontent-cxe-12="" class="line-number">27</pre><pre _ngcontent-cxe-12="" class="line-number">28</pre><pre _ngcontent-cxe-12="" class="line-number">29</pre><pre _ngcontent-cxe-12="" class="line-number">30</pre><pre _ngcontent-cxe-12="" class="line-number">31</pre><pre _ngcontent-cxe-12="" class="line-number">32</pre><pre _ngcontent-cxe-12="" class="line-number">33</pre><pre _ngcontent-cxe-12="" class="line-number">34</pre><pre _ngcontent-cxe-12="" class="line-number">35</pre><pre _ngcontent-cxe-12="" class="line-number">36</pre><pre _ngcontent-cxe-12="" class="line-number">37</pre><pre _ngcontent-cxe-12="" class="line-number">38</pre><pre _ngcontent-cxe-12="" class="line-number">39</pre><pre _ngcontent-cxe-12="" class="line-number">40</pre><pre _ngcontent-cxe-12="" class="line-number">41</pre><pre _ngcontent-cxe-12="" class="line-number">42</pre><pre _ngcontent-cxe-12="" class="line-number">43</pre><pre _ngcontent-cxe-12="" class="line-number">44</pre><pre _ngcontent-cxe-12="" class="line-number">45</pre><pre _ngcontent-cxe-12="" class="line-number">46</pre><pre _ngcontent-cxe-12="" class="line-number">47</pre><pre _ngcontent-cxe-12="" class="line-number">48</pre><pre _ngcontent-cxe-12="" class="line-number">49</pre><pre _ngcontent-cxe-12="" class="line-number">50</pre>
            </div>
            <div _ngcontent-cxe-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Mongo} from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Chat, Message} from <span class="hljs-string">'api/models'</span>;</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Chats, Messages} from <span class="hljs-string">'./collections'</span>;</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">Meteor.publish(<span class="hljs-string">'users'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>): <span class="hljs-title">Mongo</span>.<span class="hljs-title">Cursor</span>&lt;<span class="hljs-title">Meteor</span>.<span class="hljs-title">User</span>&gt; </span>{</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> Meteor.users.find({}, {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    fields: {profile: <span class="hljs-number">1</span>}</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">});</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">Meteor.publishComposite(<span class="hljs-string">'chats'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>): <span class="hljs-title">PublishCompositeConfig</span>&lt;<span class="hljs-title">Chat</span>&gt; </span>{</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    find: () =&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      <span class="hljs-keyword">return</span> Chats.find({memberIds: <span class="hljs-keyword">this</span>.userId});</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    },</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    children: [</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      &lt;PublishCompositeConfig1&lt;Chat, Message&gt;&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">        find: (chat) =&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">          <span class="hljs-keyword">return</span> Messages.find({chatId: chat._id}, {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">            sort: {createdAt: <span class="hljs-number">-1</span>},</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">            limit: <span class="hljs-number">1</span></pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">          });</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">        }</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      },</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      &lt;PublishCompositeConfig1&lt;Chat, Meteor.User&gt;&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">        find: (chat) =&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">          <span class="hljs-keyword">return</span> Meteor.users.find({</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">            _id: {$<span class="hljs-keyword">in</span>: chat.memberIds}</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">          }, {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">            fields: {profile: <span class="hljs-number">1</span>}</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">          });</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">        }</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      }</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    ]</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  };</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">});</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">Meteor.publish(<span class="hljs-string">'messages'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chatId: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Mongo</span>.<span class="hljs-title">Cursor</span>&lt;<span class="hljs-title">Message</span>&gt; </span>{</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  <span class="hljs-keyword">if</span> (!chatId) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> Messages.find({chatId});</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Let's have a brief overview for each of the publications and update the corresponding components to subscribe to them.</p>

<p>The chats publication is a composite publication which is made of several nodes. First we gonna find all the relevant chats for the current user logged in. After we have the chats, we gonna return the following cursor for each chat document we found. First we gonna return all the last messages, and second we gonna return all the users we're currently chatting with.</p>

<p>Let's add the subscription for the chats publication in the chats component:</p>

<p><diffbox step="7.8" tutorial="whatsapp2-ionic-tutorial" _nghost-cxe-12=""><div _ngcontent-cxe-12="" class="diffbox">
    <div _ngcontent-cxe-12="" class="title-panel">
        <span _ngcontent-cxe-12="" class="step-number">7.8</span> <span _ngcontent-cxe-12="" class="commit-summary">Add chats subscription in chats component</span>
        <a _ngcontent-cxe-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/4a5ff9137bb0fae5512c9edafa0632d305325d4d">app/pages/chats/chats.ts</a>
    </div>
    <div _ngcontent-cxe-12="" class="code-container">
        <div _ngcontent-cxe-12="" class="scroll-container">
            <div _ngcontent-cxe-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-number">24</pre><pre _ngcontent-cxe-12="" class="line-number">25</pre><pre _ngcontent-cxe-12="" class="line-number">26</pre><pre _ngcontent-cxe-12="" class="line-number">27</pre><pre _ngcontent-cxe-12="" class="line-number">28</pre><pre _ngcontent-cxe-12="" class="line-number">29</pre><pre _ngcontent-cxe-12="" class="line-number">30</pre><pre _ngcontent-cxe-12="" class="line-number">31</pre><pre _ngcontent-cxe-12="" class="line-number">32</pre><pre _ngcontent-cxe-12="" class="line-number">33</pre>
            </div>
            <div _ngcontent-cxe-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.senderId = Meteor.userId();</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.subscribe(<span class="hljs-string">'chats'</span>, () =&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">        <span class="hljs-keyword">this</span>.chats = <span class="hljs-keyword">this</span>.findChats();</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      });</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">    });</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>The users publication publishes all the users' profiles, and we need to use it in the new chat dialog whenever we wanna create a new chat.</p>

<p>Let's subscribe to the users publication in the new chat component:</p>

<p><diffbox step="7.9" tutorial="whatsapp2-ionic-tutorial" _nghost-cxe-12=""><div _ngcontent-cxe-12="" class="diffbox">
    <div _ngcontent-cxe-12="" class="title-panel">
        <span _ngcontent-cxe-12="" class="step-number">7.9</span> <span _ngcontent-cxe-12="" class="commit-summary">Add users subscriptions to new-chat component</span>
        <a _ngcontent-cxe-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/7a6583f3edb78f05901cdb1a6a04a1b27baca433">app/pages/new-chat/new-chat.ts</a>
    </div>
    <div _ngcontent-cxe-12="" class="code-container">
        <div _ngcontent-cxe-12="" class="scroll-container">
            <div _ngcontent-cxe-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-number">18</pre><pre _ngcontent-cxe-12="" class="line-number">19</pre><pre _ngcontent-cxe-12="" class="line-number">20</pre><pre _ngcontent-cxe-12="" class="line-number">21</pre><pre _ngcontent-cxe-12="" class="line-number">22</pre><pre _ngcontent-cxe-12="" class="line-number">23</pre><pre _ngcontent-cxe-12="" class="line-number">24</pre><pre _ngcontent-cxe-12="" class="line-number">25</pre><pre _ngcontent-cxe-12="" class="line-number">26</pre><pre _ngcontent-cxe-12="" class="line-number">27</pre>
            </div>
            <div _ngcontent-cxe-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.senderId = Meteor.userId();</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.subscribe(<span class="hljs-string">'users'</span>, () =&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">        <span class="hljs-keyword">this</span>.users = <span class="hljs-keyword">this</span>.findUsers();</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      });</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">    });</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>The messages publication is responsible for biringing all the relevant messages for a certain chat. This publication is actually parameterized and it requires us to pass a chat id during subscription.</p>

<p>Let's subscribe to the messages publication in the messages component, and pass the current active chat id provided to us by the nav params:</p>

<p><diffbox step="7.10" tutorial="whatsapp2-ionic-tutorial" _nghost-cxe-12=""><div _ngcontent-cxe-12="" class="diffbox">
    <div _ngcontent-cxe-12="" class="title-panel">
        <span _ngcontent-cxe-12="" class="step-number">7.10</span> <span _ngcontent-cxe-12="" class="commit-summary">Add messages subscription to messages component</span>
        <a _ngcontent-cxe-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic2-meteor-messenger/commit/45cbf5cb483cfcb55b03ab05f67d76d00c0ad79a">app/pages/messages/messages.ts</a>
    </div>
    <div _ngcontent-cxe-12="" class="code-container">
        <div _ngcontent-cxe-12="" class="scroll-container">
            <div _ngcontent-cxe-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-number">33</pre><pre _ngcontent-cxe-12="" class="line-number">34</pre><pre _ngcontent-cxe-12="" class="line-number">35</pre><pre _ngcontent-cxe-12="" class="line-number">36</pre><pre _ngcontent-cxe-12="" class="line-number">37</pre><pre _ngcontent-cxe-12="" class="line-number">38</pre><pre _ngcontent-cxe-12="" class="line-number">39</pre><pre _ngcontent-cxe-12="" class="line-number">40</pre><pre _ngcontent-cxe-12="" class="line-number">41</pre><pre _ngcontent-cxe-12="" class="line-number">42</pre><pre _ngcontent-cxe-12="" class="line-number">43</pre>
            </div>
            <div _ngcontent-cxe-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-cxe-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.title = receiver.profile.name;</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.picture = receiver.profile.picture;</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.subscribe(<span class="hljs-string">'messages'</span>, <span class="hljs-keyword">this</span>.activeChat._id, () =&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">        <span class="hljs-keyword">this</span>.messages = <span class="hljs-keyword">this</span>.findMessages();</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">      });</pre><pre _ngcontent-cxe-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-cxe-12="" class="line-context" className="line-context">  ngOnInit(): <span class="hljs-built_in">void</span> {</pre>
            </div>
        </div>
    </div>
</div></diffbox></p></tutorial-page-content>
    </div>
</div></tutorial></app>


</body></html>