<!DOCTYPE html><html lang="en"><head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic,800italic" rel="stylesheet" type="text/css">
    <title>Angular2-Meteor</title>
    <meta charset="UTF-8">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <base href="/">
    <style>.logo[_ngcontent-rbd-1] {
  width: auto;
  height: 2em; }

.main-toolbar[_ngcontent-rbd-1] {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  box-shadow: 3px 0 6px rgba(0, 0, 0, 0.3);
  background: #90A4AE; }
  .main-toolbar[_ngcontent-rbd-1] a[_ngcontent-rbd-1] {
    color: white;
    text-decoration: none; }

.fill-remaining-space[_ngcontent-rbd-1] {
  -ms-flex: 1 1 auto;
      flex: 1 1 auto; }

.tutorials-dropdown[_ngcontent-rbd-1] {
  position: relative;
  display: inline-block; }
  .tutorials-dropdown[_ngcontent-rbd-1] .dropdown-content[_ngcontent-rbd-1] {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 500px;
    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    padding: 7px; }

.tutorials-dropdown[_ngcontent-rbd-1]:hover .dropdown-content[_ngcontent-rbd-1] {
  display: block; }</style><style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0; }

/* Base color: saturation 0; */
.hljs,
.hljs-subst {
  color: #444; }

.hljs-comment {
  color: #888888; }

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold; }

/* User color: hue: 0 */
.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000; }

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold; }

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060; }

/* Language color: hue: 90; */
.hljs-literal {
  color: #78A960; }

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300; }

/* Meta color: hue: 200 */
.hljs-meta {
  color: #1f7199; }

.hljs-meta-string {
  color: #4d99bf; }

/* Misc effects */
.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8; }

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic; }

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold; }

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080; }

.hljs-string,
.hljs-doctag {
  color: #d14; }

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold; }

.hljs-subst {
  font-weight: normal; }

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold; }

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal; }

.hljs-regexp,
.hljs-link {
  color: #009926; }

.hljs-symbol,
.hljs-bullet {
  color: #990073; }

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3; }

.hljs-meta {
  color: #999;
  font-weight: bold; }

.hljs-deletion {
  background: #fdd; }

.hljs-addition {
  background: #dfd; }

.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

a {
  color: black; }

body {
  padding: 0;
  margin: 0;
  padding-top: 64px;
  font-family: 'Open Sans', sans-serif; }

pre {
  background: transparent;
  border: none;
  white-space: pre-wrap; }

code {
  white-space: pre-wrap; }

.side-nav .step-item {
  margin: 0;
  padding: 0;
  border-bottom: 1px solid #CFD8DC;
  color: #546E7A; }

.side-nav .step-link {
  text-decoration: none;
  color: #536E7A;
  display: block;
  font-size: 14px;
  padding: 16px 16px;
  margin: 0;
  background-color: #ECEFF1; }

.side-nav .active-step a {
  font-weight: bold; }

.side-nav .tutorial-steps-list {
  list-style: none;
  padding-left: 0;
  margin-top: 8px; }

.dropdown-content {
  column-count: 2;
  column-width: 220px;
  column-rule: 1px solid #ECEFF1;
  column-gap: 0; }
  .dropdown-content .tutorial-steps-list {
    margin: 0 !important;
    list-style: none;
    padding: 0; }
    .dropdown-content .tutorial-steps-list .step-item {
      padding: 5px 0 5px 10px;
      border-bottom: 1px solid #ECEFF1;
      break-inside: avoid-column; }
      .dropdown-content .tutorial-steps-list .step-item a {
        text-decoration: none;
        font-size: small;
        color: black; }
      .dropdown-content .tutorial-steps-list .step-item .bold {
        font-weight: bold; }

.md-primary {
  background: #263238 !important;
  color: white !important;
  cursor: pointer !important; }
  .md-primary[disabled] {
    color: lightgray !important;
    cursor: not-allowed !important; }

tutorial-page-content pre code[ngnonbindable] {
  background: #eee;
  display: block;
  width: 90%;
  border-radius: 5px;
  padding: 10px; }

tutorial-page-content blockquote {
  margin: 0;
  position: relative;
  background: #eee;
  border-radius: 5px; }
  tutorial-page-content blockquote:before {
    content: '!';
    font-weight: bold;
    position: absolute;
    vertical-align: top;
    font-size: 2vw;
    color: white;
    margin-left: 6px; }
  tutorial-page-content blockquote p {
    border-left: 1px solid white;
    padding: 10px;
    margin-left: 20px; }

.diffbox {
  border-radius: 10px; }
  .diffbox .title-panel {
    border-radius: 10px 10px 0 0; }
  .diffbox .code-container {
    border-radius: 0 0 10px 10px; }
</style><style>/** * Mixin that creates a new stacking context. * see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */ /** * This mixin hides an element visually. * That means it's still accessible for screen-readers but not visible in view. */ /** * Forces an element to grow to fit floated contents; used as as an alternative to * `overflow: hidden;` because it doesn't cut off contents. */ /** * A mixin, which generates temporary ink ripple on a given component. * When $bindToParent is set to true, it will check for the focused class on the same selector as you included * that mixin. * It is also possible to specify the color palette of the temporary ripple. By default it uses the * accent palette for its background. */ md-toolbar { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; min-height: 64px; font-size: 20px; font-weight: 400; font-family: Roboto, "Helvetica Neue", sans-serif; padding: 0 16px; -webkit-box-orient: vertical; -webkit-box-direction: normal; -ms-flex-direction: column; flex-direction: column; background: whitesmoke; color: rgba(0, 0, 0, 0.87); } md-toolbar.md-primary { background: #009688; color: white; } md-toolbar.md-accent { background: #9c27b0; color: rgba(255, 255, 255, 0.870588); } md-toolbar.md-warn { background: #f44336; color: white; } md-toolbar md-toolbar-row { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; height: 64px; -webkit-box-orient: horizontal; -webkit-box-direction: normal; -ms-flex-direction: row; flex-direction: row; -webkit-box-align: center; -ms-flex-align: center; align-items: center; } </style><style>/** * A collection of mixins and CSS classes that can be used to apply elevation to a material * element. * See: https://www.google.com/design/spec/what-is-material/elevation-shadows.html * Examples: * * * .md-foo { *   @include $md-elevation(2); * *   &:active { *     @include $md-elevation(8); *   } * } * * <div id="external-card" class="md-elevation-z2"><p>Some content</p></div> * * For an explanation of the design behind how elevation is implemented, see the design doc at * https://goo.gl/Kq0k9Z. */ /** * The css property used for elevation. In most cases this should not be changed. It is exposed * as a variable for abstraction / easy use when needing to reference the property directly, for * example in a will-change rule. */ /** The default duration value for elevation transitions. */ /** The default easing value for elevation transitions. */ /** * Applies the correct css rules to an element to give it the elevation specified by $zValue. * The $zValue must be between 0 and 24. */ /** * Returns a string that can be used as the value for a transition property for elevation. * Calling this function directly is useful in situations where a component needs to transition * more than one property. * * .foo { *   transition: md-elevation-transition-property-value(), opacity 100ms ease; *   will-change: $md-elevation-property, opacity; * } */ /** * Applies the correct css rules needed to have an element transition between elevations. * This mixin should be applied to elements whose elevation values will change depending on their * context (e.g. when active or disabled). */ /** Applies a property to an md-button element for each of the supported palettes. */ /** Applies a focus style to an md-button element for each of the supported palettes. */ [md-raised-button], [md-fab], [md-mini-fab], [md-button], [md-icon-button] { box-sizing: border-box; position: relative; background: transparent; text-align: center; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; outline: none; border: none; display: inline-block; white-space: nowrap; text-decoration: none; vertical-align: baseline; font-size: 14px; font-family: Roboto, "Helvetica Neue", sans-serif; font-weight: 500; color: currentColor; margin: 0; min-width: 88px; line-height: 36px; padding: 0 16px; border-radius: 3px; } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab], .md-primary[md-button], .md-primary[md-icon-button] { color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab], .md-accent[md-button], .md-accent[md-icon-button] { color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab], .md-warn[md-button], .md-warn[md-icon-button] { color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-primary[disabled][md-button], .md-primary[disabled][md-icon-button], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-accent[disabled][md-button], .md-accent[disabled][md-icon-button], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], .md-warn[disabled][md-button], .md-warn[disabled][md-icon-button], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab], [disabled][disabled][md-button], [disabled][disabled][md-icon-button] { color: rgba(0, 0, 0, 0.38); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab], [disabled][md-button], [disabled][md-icon-button] { cursor: default; } .md-button-focus[md-raised-button]::after, .md-button-focus[md-fab]::after, .md-button-focus[md-mini-fab]::after, .md-button-focus[md-button]::after, .md-button-focus[md-icon-button]::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } .md-button-focus.md-primary[md-raised-button]::after, .md-button-focus.md-primary[md-fab]::after, .md-button-focus.md-primary[md-mini-fab]::after, .md-button-focus.md-primary[md-button]::after, .md-button-focus.md-primary[md-icon-button]::after { background-color: rgba(0, 150, 136, 0.12); } .md-button-focus.md-accent[md-raised-button]::after, .md-button-focus.md-accent[md-fab]::after, .md-button-focus.md-accent[md-mini-fab]::after, .md-button-focus.md-accent[md-button]::after, .md-button-focus.md-accent[md-icon-button]::after { background-color: rgba(156, 39, 176, 0.12); } .md-button-focus.md-warn[md-raised-button]::after, .md-button-focus.md-warn[md-fab]::after, .md-button-focus.md-warn[md-mini-fab]::after, .md-button-focus.md-warn[md-button]::after, .md-button-focus.md-warn[md-icon-button]::after { background-color: rgba(244, 67, 54, 0.12); } [md-raised-button], [md-fab], [md-mini-fab] { box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); background-color: #fafafa; -webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0); -webkit-transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { color: white; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { color: rgba(255, 255, 255, 0.870588); } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { color: white; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { color: rgba(0, 0, 0, 0.38); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { background-color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { background-color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { background-color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { background-color: rgba(0, 0, 0, 0.12); } [md-raised-button]:active, [md-fab]:active, [md-mini-fab]:active { box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab] { box-shadow: none; } [md-button][disabled]:hover.md-primary, [md-button][disabled]:hover.md-accent, [md-button][disabled]:hover.md-warn, [md-button][disabled]:hover:hover { background-color: transparent; } [md-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 56px; height: 56px; padding: 0; } [md-fab] i, [md-fab] md-icon { padding: 16px 0; } [md-mini-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 40px; height: 40px; padding: 0; } [md-mini-fab] i, [md-mini-fab] md-icon { padding: 8px 0; } [md-icon-button] { min-width: 0; padding: 0; width: 40px; height: 40px; line-height: 24px; border-radius: 50%; } [md-icon-button] .md-button-wrapper > * { vertical-align: middle; } [md-button]:hover::after, [md-icon-button]:hover::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } [md-button]:hover.md-primary::after, [md-icon-button]:hover.md-primary::after { background-color: rgba(0, 150, 136, 0.12); } [md-button]:hover.md-accent::after, [md-icon-button]:hover.md-accent::after { background-color: rgba(156, 39, 176, 0.12); } [md-button]:hover.md-warn::after, [md-icon-button]:hover.md-warn::after { background-color: rgba(244, 67, 54, 0.12); } @media screen and (-ms-high-contrast: active) { .md-raised-button, .md-fab, .md-mini-fab { border: 1px solid #fff; } } </style><style>.side-nav[_ngcontent-rbd-6] {
  background: #ECEFF1;
  width: 232px;
  bottom: 0;
  overflow: auto;
  z-index: 100;
  border-right: 1px solid rgba(0, 0, 0, 0.3); }
  .side-nav[_ngcontent-rbd-6] ul[_ngcontent-rbd-6] {
    margin-top: 8px; }

tutorials-versions[_ngcontent-rbd-6] {
  margin-left: 10px;
  margin-top: 10px;
  display: block; }

.right-buttons[_ngcontent-rbd-6] {
  float: right;
  margin-right: 250px;
  margin-top: 10px; }

.tutorial-title[_ngcontent-rbd-6] {
  margin: 15px;
  float: left;
  font-size: larger;
  font-weight: bold; }

.top-navigation[_ngcontent-rbd-6] {
  position: fixed;
  margin-top: -60px;
  width: 100%;
  background-color: #ECEFF1;
  height: 60px;
  z-index: 50; }

.tutorial-content[_ngcontent-rbd-6] {
  margin-top: 60px;
  padding: 20px; }

.tutorials-container[_ngcontent-rbd-6] {
  padding-left: 230px; }

.l-pinned-top[_ngcontent-rbd-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px; }

.l-pinned-left[_ngcontent-rbd-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px; }

.l-left[_ngcontent-rbd-6] {
  float: left; }

.l-right[_ngcontent-rbd-6] {
  float: right; }

.l-relative[_ngcontent-rbd-6], .docs-content[_ngcontent-rbd-6] {
  position: relative; }

.l-absolute[_ngcontent-rbd-6] {
  position: absolute; }

.l-fixed[_ngcontent-rbd-6] {
  position: fixed; }

.l-offset-side-nav[_ngcontent-rbd-6] {
  padding-left: 232px; }

.l-offset-nav[_ngcontent-rbd-6] {
  padding-top: 64px; }</style><style>.tutorial-version[_ngcontent-rbd-7] {
            margin-left: 10px;
        }
        
        .active[_ngcontent-rbd-7] {
            color: #b3e5fc !important;
        }</style><style>.diffbox[_ngcontent-rbd-12] {
  border: 1px solid #eee;
  -webkit-text-size-adjust: 100%;
  margin: 1.5em 0; }
  .diffbox[_ngcontent-rbd-12] .title-panel[_ngcontent-rbd-12] {
    padding: 5px 12px;
    background: #eee;
    border-bottom: solid 1px #eee;
    color: #333;
    overflow: auto; }
    .diffbox[_ngcontent-rbd-12] .title-panel[_ngcontent-rbd-12] .github-commit-link[_ngcontent-rbd-12] {
      float: right;
      color: black;
      text-decoration: none;
      border-bottom: none !important; }
  .diffbox[_ngcontent-rbd-12] .code-container[_ngcontent-rbd-12] {
    overflow-x: auto;
    position: relative;
    padding: 9px 3px 3px 0;
    background: #f8f8f8; }
    .diffbox[_ngcontent-rbd-12] .code-container[_ngcontent-rbd-12] .scroll-container[_ngcontent-rbd-12] {
      display: inline-block;
      min-width: 100%;
      overflow: hidden; }
    .diffbox[_ngcontent-rbd-12] .code-container[_ngcontent-rbd-12] pre[_ngcontent-rbd-12] {
      margin: 0;
      padding: 0;
      background-color: transparent; }
      .diffbox[_ngcontent-rbd-12] .code-container[_ngcontent-rbd-12] pre.line-added[_ngcontent-rbd-12] {
        background: #eaffea; }
      .diffbox[_ngcontent-rbd-12] .code-container[_ngcontent-rbd-12] pre.line-removed[_ngcontent-rbd-12] {
        background: #ff9ea2; }
    .diffbox[_ngcontent-rbd-12] .code-container[_ngcontent-rbd-12] .line-content[_ngcontent-rbd-12] {
      padding-left: 36px;
      overflow: hidden; }
      .diffbox[_ngcontent-rbd-12] .code-container[_ngcontent-rbd-12] .line-content[_ngcontent-rbd-12] .hljs-comment[_ngcontent-rbd-12] {
        color: #777; }
    .diffbox[_ngcontent-rbd-12] .code-container[_ngcontent-rbd-12] .line-numbers[_ngcontent-rbd-12] {
      text-align: right;
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      -o-user-select: none;
      position: absolute;
      width: 25px; }
      .diffbox[_ngcontent-rbd-12] .code-container[_ngcontent-rbd-12] .line-numbers[_ngcontent-rbd-12] .line-number[_ngcontent-rbd-12] {
        color: #aaa;
        font-style: italic; }</style></head><body><universal-styles></universal-styles>


<app _nghost-rbd-1=""><md-toolbar _ngcontent-rbd-1="" class="main-toolbar md-primary"><div class="md-toolbar-layout"> <md-toolbar-row> 
    <a _ngcontent-rbd-1="" href="/"><img _ngcontent-rbd-1="" class="logo" src="/assets/images/logo.png"></a>
    <div _ngcontent-rbd-1="" class="tutorials-dropdown">
        <button _ngcontent-rbd-1="" md-button=""><span class="md-button-wrapper">Tutorials</span> </button>
        <div _ngcontent-rbd-1="" class="dropdown-content">
            <steps-list _ngcontent-rbd-1="" prefix="/tutorials"><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/folder-structure">8. Folder Structure</a>
    </li><li class="step-item active-step" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/css-sass-and-bootstrap">18. CSS, SASS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/ionic2">23. Ionic2</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/next-steps">25. Next Steps</a>
    </li>
    <!--template bindings={}--><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/whatsapp2">WhatsApp clone with Angular &amp; Meteor</a>
    </li><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/migration/angular2/introduction">Blaze to Angular 2 Migration tutorial</a>
    </li>
</ul>
</steps-list>
        </div>
    </div>
    <a _ngcontent-rbd-1="" href="/angular2/"><button _ngcontent-rbd-1="" md-button=""><span class="md-button-wrapper">Angular 2</span> </button></a>
    <a _ngcontent-rbd-1="" href="/api/angular2/latest/"><button _ngcontent-rbd-1="" md-button=""><span class="md-button-wrapper">API Reference</span> </button></a>
    <span _ngcontent-rbd-1="" class="fill-remaining-space"></span>
    <a _ngcontent-rbd-1="" href="https://github.com/Urigo/angular2-meteor" target="_blank"><button _ngcontent-rbd-1="" md-button=""><span class="md-button-wrapper">GitHub</span> </button></a>
    <a _ngcontent-rbd-1="" href="http://info.meteor.com/blog/author/uri-goldshtein?__hstc=219992390.b4a81f3b906b078dac633307097097f5.1471207723059.1471890076881.1471938647239.7&amp;__hssc=219992390.3.1471938647239&amp;__hsfp=714783454" target="_blank"><button _ngcontent-rbd-1="" md-button=""><span class="md-button-wrapper">Blog</span> </button></a>
    <a _ngcontent-rbd-1="" href="https://docs.google.com/forms/d/e/1FAIpQLSed3JZ0EAcSzkX8Y-iEtvNQRfjeyP2ICQvYMs00ewdmKaplwA/viewform" target="_blank"><button _ngcontent-rbd-1="" md-button=""><span class="md-button-wrapper">Contact Us</span> </button></a>
    <a _ngcontent-rbd-1="" href="/manifesto"><button _ngcontent-rbd-1="" md-button=""><span class="md-button-wrapper">Manifesto</span> </button></a>
    <a _ngcontent-rbd-1="" href="/about"><button _ngcontent-rbd-1="" md-button=""><span class="md-button-wrapper">About us</span> </button></a>
 </md-toolbar-row>  </div></md-toolbar>
<router-outlet _ngcontent-rbd-1=""></router-outlet><tutorial _nghost-rbd-6=""><div _ngcontent-rbd-6="" class="tutorials-container">
    <nav _ngcontent-rbd-6="" class="side-nav l-pinned-left l-layer-4 l-offset-nav">
        <tutorials-versions _ngcontent-rbd-6="" _nghost-rbd-7=""><!--template bindings={}--><a _ngcontent-rbd-7="" md-raised-button="" class="tutorial-version md-primary " className="tutorial-version md-primary " href="/tutorials/angular1/socially/users-and-authentication">Angular 1</a><a _ngcontent-rbd-7="" md-raised-button="" class="tutorial-version md-primary active" className="tutorial-version md-primary active" href="/tutorials/angular2/socially/users-and-authentication">Angular 2</a></tutorials-versions>
        <steps-list _ngcontent-rbd-6=""><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/folder-structure">8. Folder Structure</a>
    </li><li class="step-item active-step" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/css-sass-and-bootstrap">18. CSS, SASS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/ionic2">23. Ionic2</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/next-steps">25. Next Steps</a>
    </li>
    <!--template bindings={}-->
</ul>
</steps-list>
    </nav>
    <div _ngcontent-rbd-6="" class="top-navigation">
        <span _ngcontent-rbd-6="" class="tutorial-title" stepName="">Users &amp; Authentication</span>
        <div _ngcontent-rbd-6="" class="right-buttons">
            <a _ngcontent-rbd-6="" class="md-primary" md-raised-button="" tutorialNavigation="previous" href="/tutorials/angular2/socially/folder-structure">Previous</a>
            <a _ngcontent-rbd-6="" class="md-primary" codeDiffButton="" md-raised-button="">Code Diff</a>
            <a _ngcontent-rbd-6="" class="md-primary" md-raised-button="" tutorialNavigation="next" href="/tutorials/angular2/socially/privacy-and-publish-subscribe-functions">Next</a>
        </div>
    </div>
    <div _ngcontent-rbd-6="" class="tutorial-content">
        <router-outlet _ngcontent-rbd-6=""></router-outlet><tutorial-page><div class="tutorial-container"></div></tutorial-page><tutorial-page-content><p>In this section we'll look at how to:</p>

<ul><li>implement security for an app using Meteor and Angular 2 API</li><li>setup user accounts in meteor using a login and password</li><li>setup OAuth login for Facebook &amp; Twitter</li><li>restrict access to views based on user permissions</li></ul>

<h1>Removing Insecure</h1>

<p>Right now, our app is publishing all parties to all clients, allowing any client to change those parties. The changes are then reflected back to all the other clients automatically.</p>

<p>This is super powerful and easy, but what about security?  We don't want any user to be able to change any party...</p>

<p>For quick and easy setup, Meteor automatically includes a package called <code ngNonBindable="">insecure</code>. As the name implies, the packages provides a default behavior to Meteor collections allowing all reads and writes.</p>

<p>The first thing we should do is to remove the "insecure" package. By removing that package, the default behavior is changed to deny all.</p>

<p>Execute this command in the command line:</p>

<pre><code ngNonBindable="">$ meteor remove insecure
&gt; insecure removed from your project</code></pre>

<p>Let's try to change the parties array or a specific party. Nothing's working.</p>

<p>That's because now we have to write an explicit security rule for each operation we want to make on the Mongo collection.</p>

<p>We can assume we will allow a user to alter data if any of the following are true:</p>

<ul><li>the user is logged in</li><li>the user created the party</li><li>the user is an admin</li></ul>

<h1>User Accounts</h1>

<p>One of Meteor's most powerful packages is the <a href="https://www.meteor.com/accounts">Meteor accounts</a> system.</p>

<p>Add the "accounts-password" Meteor package. It's a very powerful package for all the user operations you can think of: login, signup, change password, password recovery, email confirmation and more.</p>

<pre><code ngNonBindable="">$ meteor add accounts-password</code></pre>

<p>Now we are going to add <code ngNonBindable="">angular2-meteor-accounts-ui</code> which is a package that contains all the HTML and CSS we need for the user operation forms.</p>

<pre><code ngNonBindable="">$ meteor npm install --save angular2-meteor-accounts-ui</code></pre>

<p>Let's add the <code ngNonBindable="">&lt;login-buttons&gt;</code> tag below of the party form in the PartiesList's template:</p>

<p><diffbox step="8.2" tutorial="angular2-meteor-socially" _nghost-rbd-12=""><div _ngcontent-rbd-12="" class="diffbox">
    <div _ngcontent-rbd-12="" class="title-panel">
        <span _ngcontent-rbd-12="" class="step-number">8.2</span> <span _ngcontent-rbd-12="" class="commit-summary">Add Accounts UI component to the PartiesList template</span>
        <a _ngcontent-rbd-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/ff09e89b8e818c8f790a561927ccf5b0f415506c">client/imports/parties-list/parties-list.html</a>
    </div>
    <div _ngcontent-rbd-12="" class="code-container">
        <div _ngcontent-rbd-12="" class="scroll-container">
            <div _ngcontent-rbd-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-number">1</pre><pre _ngcontent-rbd-12="" class="line-number">2</pre><pre _ngcontent-rbd-12="" class="line-number">3</pre><pre _ngcontent-rbd-12="" class="line-number">4</pre><pre _ngcontent-rbd-12="" class="line-number">5</pre><pre _ngcontent-rbd-12="" class="line-number">6</pre>
            </div>
            <div _ngcontent-rbd-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">parties-form</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">parties-form</span>&gt;</span></pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">login-buttons</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">login-buttons</span>&gt;</span></pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> *<span class="hljs-attr">ngFor</span>=<span class="hljs-string">"let party of parties"</span>&gt;</span></pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> [<span class="hljs-attr">routerLink</span>]=<span class="hljs-string">"['/party', party._id]"</span>&gt;</span>{{party.name}}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Then, import the dependencies:</p>

<p><diffbox step="8.3" tutorial="angular2-meteor-socially" _nghost-rbd-12=""><div _ngcontent-rbd-12="" class="diffbox">
    <div _ngcontent-rbd-12="" class="title-panel">
        <span _ngcontent-rbd-12="" class="step-number">8.3</span> <span _ngcontent-rbd-12="" class="commit-summary">Import dependencies</span>
        <a _ngcontent-rbd-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/52ec1ee9fbdaa3061f65cf709a00cc14006c7f46">client/imports/parties-list/parties-list.ts</a>
    </div>
    <div _ngcontent-rbd-12="" class="code-container">
        <div _ngcontent-rbd-12="" class="scroll-container">
            <div _ngcontent-rbd-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-number">3</pre><pre _ngcontent-rbd-12="" class="line-number">4</pre><pre _ngcontent-rbd-12="" class="line-number">5</pre><pre _ngcontent-rbd-12="" class="line-number">6</pre><pre _ngcontent-rbd-12="" class="line-number">7</pre><pre _ngcontent-rbd-12="" class="line-number">8</pre><pre _ngcontent-rbd-12="" class="line-number">9</pre><pre _ngcontent-rbd-12="" class="line-number">10</pre><pre _ngcontent-rbd-12="" class="line-number">11</pre><pre _ngcontent-rbd-12="" class="line-number">12</pre><pre _ngcontent-rbd-12="" class="line-number">13</pre><pre _ngcontent-rbd-12="" class="line-number">14</pre><pre _ngcontent-rbd-12="" class="line-number">15</pre><pre _ngcontent-rbd-12="" class="line-number">16</pre>
            </div>
            <div _ngcontent-rbd-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { PartiesForm } from <span class="hljs-string">'../parties-form/parties-form'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Mongo }       from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { ROUTER_DIRECTIVES }  from <span class="hljs-string">'@angular/router'</span>;</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { LoginButtons } from <span class="hljs-string">'angular2-meteor-accounts-ui'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./parties-list.html'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">@Component({</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  selector: <span class="hljs-string">'parties-list'</span>,</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  template,</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">  directives: [PartiesForm, ROUTER_DIRECTIVES, LoginButtons]</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">})</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartiesList {</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  parties: Mongo.Cursor&lt;Party&gt;;</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now let's create main stylesheet file (with <code ngNonBindable="">.scss</code> extension), and import the SCSS file from the package:</p>

<p><diffbox step="8.4" tutorial="angular2-meteor-socially" _nghost-rbd-12=""><div _ngcontent-rbd-12="" class="diffbox">
    <div _ngcontent-rbd-12="" class="title-panel">
        <span _ngcontent-rbd-12="" class="step-number">8.4</span> <span _ngcontent-rbd-12="" class="commit-summary">Add import for SCSS file</span>
        <a _ngcontent-rbd-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/501c6d9301358b788e972dc414747822072187fc">client/css/main.scss</a>
    </div>
    <div _ngcontent-rbd-12="" class="code-container">
        <div _ngcontent-rbd-12="" class="scroll-container">
            <div _ngcontent-rbd-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-number">1</pre>
            </div>
            <div _ngcontent-rbd-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-added" className="line-added">@<span class="hljs-keyword">import</span> <span class="hljs-string">"{}/node_modules/angular2-meteor-accounts-ui/build/login-buttons.scss"</span>;</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Run the code, you'll see a login link below the form. Click on the link and then "create  account" to sign up. Try to log in and log out.</p>

<p>That's it! As you can see, it's very easy to add basic login support with the help of the Meteor accounts package.</p>

<h2>Parties.allow()</h2>

<p>Now that we have our account system, we can start defining our security rules for the parties.</p>

<p>Let's go to the "collection" folder and specify what actions are allowed:</p>

<p><diffbox step="8.5" tutorial="angular2-meteor-socially" _nghost-rbd-12=""><div _ngcontent-rbd-12="" class="diffbox">
    <div _ngcontent-rbd-12="" class="title-panel">
        <span _ngcontent-rbd-12="" class="step-number">8.5</span> <span _ngcontent-rbd-12="" class="commit-summary">Add parties collection security</span>
        <a _ngcontent-rbd-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/9cbc41a2083a2a760f640d365638cda7abb8870b">collections/parties.ts</a>
    </div>
    <div _ngcontent-rbd-12="" class="code-container">
        <div _ngcontent-rbd-12="" class="scroll-container">
            <div _ngcontent-rbd-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-number">1</pre><pre _ngcontent-rbd-12="" class="line-number">2</pre><pre _ngcontent-rbd-12="" class="line-number">3</pre><pre _ngcontent-rbd-12="" class="line-number">4</pre><pre _ngcontent-rbd-12="" class="line-number">5</pre><pre _ngcontent-rbd-12="" class="line-number">6</pre><pre _ngcontent-rbd-12="" class="line-number">7</pre><pre _ngcontent-rbd-12="" class="line-number">8</pre><pre _ngcontent-rbd-12="" class="line-number">9</pre><pre _ngcontent-rbd-12="" class="line-number">10</pre><pre _ngcontent-rbd-12="" class="line-number">11</pre><pre _ngcontent-rbd-12="" class="line-number">12</pre><pre _ngcontent-rbd-12="" class="line-number">13</pre><pre _ngcontent-rbd-12="" class="line-number">14</pre><pre _ngcontent-rbd-12="" class="line-number">15</pre><pre _ngcontent-rbd-12="" class="line-number">16</pre><pre _ngcontent-rbd-12="" class="line-number">17</pre><pre _ngcontent-rbd-12="" class="line-number">18</pre><pre _ngcontent-rbd-12="" class="line-number">19</pre><pre _ngcontent-rbd-12="" class="line-number">20</pre><pre _ngcontent-rbd-12="" class="line-number">21</pre><pre _ngcontent-rbd-12="" class="line-number">22</pre>
            </div>
            <div _ngcontent-rbd-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Mongo} from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> Parties = <span class="hljs-keyword">new</span> Mongo.Collection&lt;Party&gt;(<span class="hljs-string">'parties'</span>);</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">Parties.allow({</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">  insert: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> user = Meteor.user();</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    </pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> !!user;</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">  },</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">  update: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> user = Meteor.user();</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    </pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> !!user;</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">  },</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">  remove: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> user = Meteor.user();</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    </pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> !!user;</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>In only 10 lines of code we've specified that inserts, updates and removes can only be completed if a user is logged in.</p>

<p>The callbacks passed to the Parties.allow are executed on the server only. The client optimistically assumes that any action (such as removal of a party) will succeed, and reverts the action as soon as the server denies permission.
If you want to learn more about those parameters passed into Parties.allow or how this method works in general, please, read the official Meteor <a href="http://docs.meteor.com/#/full/allow">docs on allow</a>.</p>

<h2>Meteor.user()</h2>

<p>Let's work on ensuring only the party creator (owner) can change the party data.</p>

<p>First we must define an owner for each party that gets created. We do this by taking our current user's ID and setting it as the owner ID of the created party.</p>

<p>Meteor's base accounts package provides two reactive functions that we are going to
use, <a href="http://docs.meteor.com/#/full/meteor_user"><code ngNonBindable="">Meteor.user()</code></a> and <a href="http://docs.meteor.com/#/full/meteor_users"><code ngNonBindable="">Meteor.userId()</code></a>.</p>

<p>For now, we are going to keep it simple in this app and allow every logged-in user to change a party.
Change the click handler of the "Add" button in the <code ngNonBindable="">parties-form.ts</code>, <code ngNonBindable="">addParty</code>, to save the user ID as well. Also, it'd be useful to add an alert prompting the user to log in if she wants to add or update a party:</p>

<p><diffbox step="8.6" tutorial="angular2-meteor-socially" _nghost-rbd-12=""><div _ngcontent-rbd-12="" class="diffbox">
    <div _ngcontent-rbd-12="" class="title-panel">
        <span _ngcontent-rbd-12="" class="step-number">8.6</span> <span _ngcontent-rbd-12="" class="commit-summary">Check access and add party owner ID</span>
        <a _ngcontent-rbd-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/e78a9cf261745b9ad3854e3480c36740b83852e1">client/imports/parties-form/parties-form.ts</a>
    </div>
    <div _ngcontent-rbd-12="" class="code-container">
        <div _ngcontent-rbd-12="" class="scroll-container">
            <div _ngcontent-rbd-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-number">2</pre><pre _ngcontent-rbd-12="" class="line-number">3</pre><pre _ngcontent-rbd-12="" class="line-number">4</pre><pre _ngcontent-rbd-12="" class="line-number">5</pre><pre _ngcontent-rbd-12="" class="line-number">6</pre><pre _ngcontent-rbd-12="" class="line-number">7</pre><pre _ngcontent-rbd-12="" class="line-number">8</pre><pre _ngcontent-rbd-12="" class="line-number"> </pre><pre _ngcontent-rbd-12="" class="line-number">25</pre><pre _ngcontent-rbd-12="" class="line-number">26</pre><pre _ngcontent-rbd-12="" class="line-number">27</pre><pre _ngcontent-rbd-12="" class="line-number">28</pre><pre _ngcontent-rbd-12="" class="line-number">29</pre><pre _ngcontent-rbd-12="" class="line-number">30</pre><pre _ngcontent-rbd-12="" class="line-number">31</pre><pre _ngcontent-rbd-12="" class="line-number">32</pre><pre _ngcontent-rbd-12="" class="line-number">33</pre><pre _ngcontent-rbd-12="" class="line-number">34</pre><pre _ngcontent-rbd-12="" class="line-number">35</pre><pre _ngcontent-rbd-12="" class="line-number">36</pre><pre _ngcontent-rbd-12="" class="line-number">37</pre><pre _ngcontent-rbd-12="" class="line-number">38</pre><pre _ngcontent-rbd-12="" class="line-number">39</pre><pre _ngcontent-rbd-12="" class="line-number">40</pre><pre _ngcontent-rbd-12="" class="line-number">41</pre><pre _ngcontent-rbd-12="" class="line-number">42</pre><pre _ngcontent-rbd-12="" class="line-number">43</pre><pre _ngcontent-rbd-12="" class="line-number">44</pre>
            </div>
            <div _ngcontent-rbd-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Component } from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { FormBuilder, ControlGroup, Validators, Control } from <span class="hljs-string">'@angular/common'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Parties } from <span class="hljs-string">'../../../collections/parties.ts'</span>;</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./parties-form.html'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  addParty(party) {</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.partiesForm.valid) {</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">      <span class="hljs-keyword">if</span> (Meteor.userId()) {</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">        Parties.insert({</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">          name: party.name,</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">          description: party.description,</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">          location: party.location,</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">          owner: Meteor.userId()</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">        });</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">        (&lt;Control&gt;<span class="hljs-keyword">this</span>.partiesForm.controls[<span class="hljs-string">'name'</span>]).updateValue(<span class="hljs-string">''</span>);</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">        (&lt;Control&gt;<span class="hljs-keyword">this</span>.partiesForm.controls[<span class="hljs-string">'description'</span>]).updateValue(<span class="hljs-string">''</span>);</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">        (&lt;Control&gt;<span class="hljs-keyword">this</span>.partiesForm.controls[<span class="hljs-string">'location'</span>]).updateValue(<span class="hljs-string">''</span>);</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">      } <span class="hljs-keyword">else</span> {</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">        alert(<span class="hljs-string">'Please log in to add a party'</span>);</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">      }</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">    }</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<blockquote><p>Notice that you'll need to update the Party type in the <code ngNonBindable="">party.d.ts</code> definition file with the optional new property: <code ngNonBindable="">owner?: string</code>.</p></blockquote>

<p>Let's do the user check in <code ngNonBindable="">party-details.ts</code>:</p>

<p><diffbox step="8.7" tutorial="angular2-meteor-socially" _nghost-rbd-12=""><div _ngcontent-rbd-12="" class="diffbox">
    <div _ngcontent-rbd-12="" class="title-panel">
        <span _ngcontent-rbd-12="" class="step-number">8.7</span> <span _ngcontent-rbd-12="" class="commit-summary">Check access to change party</span>
        <a _ngcontent-rbd-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/5bcef2d7db38a5aa88287eac4a4700f3b080ce78">client/imports/party-details/party-details.ts</a>
    </div>
    <div _ngcontent-rbd-12="" class="code-container">
        <div _ngcontent-rbd-12="" class="scroll-container">
            <div _ngcontent-rbd-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-number">2</pre><pre _ngcontent-rbd-12="" class="line-number">3</pre><pre _ngcontent-rbd-12="" class="line-number">4</pre><pre _ngcontent-rbd-12="" class="line-number">5</pre><pre _ngcontent-rbd-12="" class="line-number">6</pre><pre _ngcontent-rbd-12="" class="line-number">7</pre><pre _ngcontent-rbd-12="" class="line-number">8</pre><pre _ngcontent-rbd-12="" class="line-number"> </pre><pre _ngcontent-rbd-12="" class="line-number">30</pre><pre _ngcontent-rbd-12="" class="line-number">31</pre><pre _ngcontent-rbd-12="" class="line-number">32</pre><pre _ngcontent-rbd-12="" class="line-number">33</pre><pre _ngcontent-rbd-12="" class="line-number">34</pre><pre _ngcontent-rbd-12="" class="line-number">35</pre><pre _ngcontent-rbd-12="" class="line-number">36</pre><pre _ngcontent-rbd-12="" class="line-number">37</pre><pre _ngcontent-rbd-12="" class="line-number">38</pre><pre _ngcontent-rbd-12="" class="line-number">39</pre><pre _ngcontent-rbd-12="" class="line-number">40</pre><pre _ngcontent-rbd-12="" class="line-number">41</pre><pre _ngcontent-rbd-12="" class="line-number">42</pre><pre _ngcontent-rbd-12="" class="line-number">43</pre><pre _ngcontent-rbd-12="" class="line-number">44</pre><pre _ngcontent-rbd-12="" class="line-number">45</pre>
            </div>
            <div _ngcontent-rbd-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { ActivatedRoute, ROUTER_DIRECTIVES } from <span class="hljs-string">'@angular/router'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Tracker } from <span class="hljs-string">'meteor/tracker'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Parties} from <span class="hljs-string">'../../../collections/parties.ts'</span>;</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./party-details.html'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  saveParty(party) {</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (Meteor.userId()) {</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">      Parties.update(party._id, {</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">        $<span class="hljs-keyword">set</span>: {</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">          name: party.name,</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">          description: party.description,</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">          location: party.location</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">        }</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">      });</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    } <span class="hljs-keyword">else</span> {</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">      alert(<span class="hljs-string">'Please log in to change this party'</span>);</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Typing each time <code ngNonBindable="">Meteor.user()</code> or <code ngNonBindable="">Meteor.userId()</code> might seems tedious.
Not to mention that there is no way to use these functions in the component templates currently.</p>

<h1>RequireUser</h1>

<p>How can you simplify life here? You can try out the decorator that comes with the accounts package, which wraps around all Meteor Accounts API (login with password and social logins features)
and exports two services for the usage in Angular 2. Besides that, it has two convenient annotations: <code ngNonBindable="">InjectUser</code> and <code ngNonBindable="">RequireUser</code>.</p>

<p>Now you can specify if a component can be accessed only when a user is logged in using the <code ngNonBindable="">@RequireUser</code> annotation.</p>

<p><diffbox step="8.9" tutorial="angular2-meteor-socially" _nghost-rbd-12=""><div _ngcontent-rbd-12="" class="diffbox">
    <div _ngcontent-rbd-12="" class="title-panel">
        <span _ngcontent-rbd-12="" class="step-number">8.9</span> <span _ngcontent-rbd-12="" class="commit-summary">Require user to access PartyDetails</span>
        <a _ngcontent-rbd-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/38697d15c2d567a27ae99dd8f9294a77ce7455a3">client/imports/party-details/party-details.ts</a>
    </div>
    <div _ngcontent-rbd-12="" class="code-container">
        <div _ngcontent-rbd-12="" class="scroll-container">
            <div _ngcontent-rbd-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-number">3</pre><pre _ngcontent-rbd-12="" class="line-number">4</pre><pre _ngcontent-rbd-12="" class="line-number">5</pre><pre _ngcontent-rbd-12="" class="line-number">6</pre><pre _ngcontent-rbd-12="" class="line-number">7</pre><pre _ngcontent-rbd-12="" class="line-number">8</pre><pre _ngcontent-rbd-12="" class="line-number">9</pre><pre _ngcontent-rbd-12="" class="line-number"> </pre><pre _ngcontent-rbd-12="" class="line-number">12</pre><pre _ngcontent-rbd-12="" class="line-number">13</pre><pre _ngcontent-rbd-12="" class="line-number">14</pre><pre _ngcontent-rbd-12="" class="line-number">15</pre><pre _ngcontent-rbd-12="" class="line-number">16</pre><pre _ngcontent-rbd-12="" class="line-number">17</pre><pre _ngcontent-rbd-12="" class="line-number">18</pre>
            </div>
            <div _ngcontent-rbd-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Tracker } from <span class="hljs-string">'meteor/tracker'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Parties} from <span class="hljs-string">'../../../collections/parties.ts'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { RequireUser } from <span class="hljs-string">'angular2-meteor-accounts-ui'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./party-details.html'</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-rbd-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  template,</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  directives: [ROUTER_DIRECTIVES]</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">})</pre><pre _ngcontent-rbd-12="" class="line-added" className="line-added">@RequireUser()</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartyDetails {</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  partyId: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-rbd-12="" class="line-context" className="line-context">  party: Party;</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<h1>InjectUser</h1>

<p>If you place <code ngNonBindable="">@InjectUser</code> above the PartiesForm it will inject a new user property:</p>

<p><strong><code ngNonBindable="">client/imports/parties-form/parties-form.ts</code></strong>:</p>

<pre><code ngNonBindable="">...
import {MeteorComponent} from 'angular2-meteor';
import {InjectUser} from 'angular2-meteor-accounts-ui';

import template from './parties-form.html';

@Component({
  selector: 'parties-form',
  template,
})
@InjectUser("user")
export class PartiesForm extends MeteorComponent {
  user: Meteor.User;
  constructor() {
    super();
    ...
    console.log(this.user);
  }
  ...
}</code></pre>

<blockquote><p>Notice that you have to extend <code ngNonBindable="">PartiesForm</code> with <code ngNonBindable="">MeteorComponent</code> to make the user property reactive.
That's because this class adds a few Meteor specific methods to a child inheritor, used to implement reactivity (as above) or Meteor's pub/sub data transfer.
We'll learn more about MeteorComponent later on the next step, where we'll be subscribing to server publications.</p></blockquote>

<p>Call <code ngNonBindable="">this.user</code> and you will see that it returns the same object as <code ngNonBindable="">Meteor.user()</code>.
The new property is reactive and can be used in any template, for example:</p>

<p><strong><code ngNonBindable="">client/imports/parties-form/parties-form.html</code></strong>:</p>

<pre><code ngNonBindable="">&lt;div *ngIf="!user"&gt;Please, log in to change party&lt;/div&gt;
&lt;form [ngFormModel]="partiesForm" #f="form" (submit)="addParty(f.value)"&gt;
  ...
&lt;/form&gt;</code></pre>

<p>As you can see, we've added a label "Please, login to change party" that is
conditioned to be shown if <code ngNonBindable="">user</code> is not defined with help of an <code ngNonBindable="">ngIf</code> attribute, and
will be hidden otherwise.</p>

<h1>Routing Permissions</h1>

<p>Let's imagine now that we allow to see and change party details only for logged-in users.
An ideal way to implement this would be to restrict redirecting to the party details page when
someone clicks on a party link. In this case, we don't need to check access manually in the party details component itself because the route request is denied early on.</p>

<p>This can be easily done again with help of "angular2-meteor-accounts-ui" package
that has a simple <code ngNonBindable="">RequireUser</code> annotation. Just place it above <code ngNonBindable="">PartyDetails</code>
and you will see if a user is not logged-in to the system, that user won't be able to access the route.</p>

<p>Now log out and try to click on any party link. See, links don't work!</p>

<p>But what about more sophisticated access? Say, let's prevent access into the PartyDetails view for those
who don't own that particular party.</p>

<p>It's easy to implement in Angular 2 as well using <a href="https://angular.io/docs/ts/latest/api/router/CanActivate-decorator.html"><code ngNonBindable="">@CanActivate</code></a> annotation
(BTW, <code ngNonBindable="">RequireUser</code> itself is just a simple inheritor of <code ngNonBindable="">@CanActivate</code>).</p>

<p>Let's add a <code ngNonBindable="">checkPermissions</code> function, where we get the current route's <code ngNonBindable="">partyId</code> parameter
and check if the corresponding party's owner is the same as the currently logged-in user.
And then pass the partyId into the <code ngNonBindable="">@CanActivate</code> attribute:</p>

<p>  <strong><code ngNonBindable="">client/party-details/party-details.ts</code></strong>:</p>

<pre><code ngNonBindable="">import {CanActivate, ComponentInstruction} from '@angular/router';

import template from './party-details.html';

function checkPermissions(instruction: ComponentInstruction) {
  var partyId = instruction.params['partyId'];
  var party = Parties.findOne(partyId);
  return (party &amp;&amp; party.owner == Meteor.userId());
}

@Component({
  selector: 'party-details',
  template,
  directives: [ROUTER_DIRECTIVES]
})
@CanActivate(checkPermissions)
export class PartyDetails {
  ...
}</code></pre>

<p>Now log in, then add a new party, log out and click on the party link.
Nothing happens meaning that access is restricted to party owners.</p>

<p>Please note it is possible for someone with malicious intent to override your routing restrictions on the client.
You should never restrict access to sensitive data, sensitive areas, using the client router only.</p>

<p>This is the reason we also made restrictions on the server using the allow/deny functionality, so even if someone gets in they cannot make updates.
While this prevents writes from happening from unintended sources, reads can still be an issue.
The next step will take care of privacy, not showing users parties they are not allowed to see.</p>

<h1>Summary</h1>

<p>Amazing, only a few lines of code and we have a much more secure application!</p>

<p>We've added two powerful features to our app:</p>

<ul><li>the "accounts-ui" package that comes with features like user login, logout, registration
and complete UI supporting them;</li><li>restricted access to the party details page, with access available for logged-in users only.</li></ul></tutorial-page-content>
    </div>
</div></tutorial></app>


</body></html>