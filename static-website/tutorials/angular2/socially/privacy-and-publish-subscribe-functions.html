<!DOCTYPE html><html lang="en"><head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic,800italic" rel="stylesheet" type="text/css">
    <title>Angular2-Meteor</title>
    <meta charset="UTF-8">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <base href="/">
    <style>.logo[_ngcontent-hgo-1] {
  width: auto;
  height: 2em; }

.main-toolbar[_ngcontent-hgo-1] {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  box-shadow: 3px 0 6px rgba(0, 0, 0, 0.3);
  background: #90A4AE; }

.fill-remaining-space[_ngcontent-hgo-1] {
  -ms-flex: 1 1 auto;
      flex: 1 1 auto; }</style><style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0; }

/* Base color: saturation 0; */
.hljs,
.hljs-subst {
  color: #444; }

.hljs-comment {
  color: #888888; }

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold; }

/* User color: hue: 0 */
.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000; }

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold; }

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060; }

/* Language color: hue: 90; */
.hljs-literal {
  color: #78A960; }

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300; }

/* Meta color: hue: 200 */
.hljs-meta {
  color: #1f7199; }

.hljs-meta-string {
  color: #4d99bf; }

/* Misc effects */
.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8; }

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic; }

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold; }

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080; }

.hljs-string,
.hljs-doctag {
  color: #d14; }

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold; }

.hljs-subst {
  font-weight: normal; }

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold; }

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal; }

.hljs-regexp,
.hljs-link {
  color: #009926; }

.hljs-symbol,
.hljs-bullet {
  color: #990073; }

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3; }

.hljs-meta {
  color: #999;
  font-weight: bold; }

.hljs-deletion {
  background: #fdd; }

.hljs-addition {
  background: #dfd; }

.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

body {
  padding: 0;
  margin: 0;
  padding-top: 64px;
  font-family: 'Open Sans', sans-serif; }

pre {
  background: transparent;
  border: none;
  white-space: pre-wrap; }

code {
  white-space: pre-wrap; }

.step-item {
  margin: 0;
  padding: 0;
  border-bottom: 1px solid #CFD8DC;
  color: #546E7A; }

.step-link {
  text-decoration: none;
  color: #536E7A;
  display: block;
  font-size: 14px;
  padding: 16px 16px;
  margin: 0;
  background-color: #ECEFF1; }

.active-step a {
  font-weight: bold; }

.tutorial-steps-list {
  list-style: none;
  padding-left: 0;
  margin-top: 8px; }

.md-primary {
  background: #263238 !important; }
</style><style>/** * Mixin that creates a new stacking context. * see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */ /** * This mixin hides an element visually. * That means it's still accessible for screen-readers but not visible in view. */ /** * Forces an element to grow to fit floated contents; used as as an alternative to * `overflow: hidden;` because it doesn't cut off contents. */ /** * A mixin, which generates temporary ink ripple on a given component. * When $bindToParent is set to true, it will check for the focused class on the same selector as you included * that mixin. * It is also possible to specify the color palette of the temporary ripple. By default it uses the * accent palette for its background. */ md-toolbar { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; min-height: 64px; font-size: 20px; font-weight: 400; font-family: Roboto, "Helvetica Neue", sans-serif; padding: 0 16px; -webkit-box-orient: vertical; -webkit-box-direction: normal; -ms-flex-direction: column; flex-direction: column; background: whitesmoke; color: rgba(0, 0, 0, 0.87); } md-toolbar.md-primary { background: #009688; color: white; } md-toolbar.md-accent { background: #9c27b0; color: rgba(255, 255, 255, 0.870588); } md-toolbar.md-warn { background: #f44336; color: white; } md-toolbar md-toolbar-row { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; height: 64px; -webkit-box-orient: horizontal; -webkit-box-direction: normal; -ms-flex-direction: row; flex-direction: row; -webkit-box-align: center; -ms-flex-align: center; align-items: center; } </style><style>/** * A collection of mixins and CSS classes that can be used to apply elevation to a material * element. * See: https://www.google.com/design/spec/what-is-material/elevation-shadows.html * Examples: * * * .md-foo { *   @include $md-elevation(2); * *   &:active { *     @include $md-elevation(8); *   } * } * * <div id="external-card" class="md-elevation-z2"><p>Some content</p></div> * * For an explanation of the design behind how elevation is implemented, see the design doc at * https://goo.gl/Kq0k9Z. */ /** * The css property used for elevation. In most cases this should not be changed. It is exposed * as a variable for abstraction / easy use when needing to reference the property directly, for * example in a will-change rule. */ /** The default duration value for elevation transitions. */ /** The default easing value for elevation transitions. */ /** * Applies the correct css rules to an element to give it the elevation specified by $zValue. * The $zValue must be between 0 and 24. */ /** * Returns a string that can be used as the value for a transition property for elevation. * Calling this function directly is useful in situations where a component needs to transition * more than one property. * * .foo { *   transition: md-elevation-transition-property-value(), opacity 100ms ease; *   will-change: $md-elevation-property, opacity; * } */ /** * Applies the correct css rules needed to have an element transition between elevations. * This mixin should be applied to elements whose elevation values will change depending on their * context (e.g. when active or disabled). */ /** Applies a property to an md-button element for each of the supported palettes. */ /** Applies a focus style to an md-button element for each of the supported palettes. */ [md-raised-button], [md-fab], [md-mini-fab], [md-button], [md-icon-button] { box-sizing: border-box; position: relative; background: transparent; text-align: center; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; outline: none; border: none; display: inline-block; white-space: nowrap; text-decoration: none; vertical-align: baseline; font-size: 14px; font-family: Roboto, "Helvetica Neue", sans-serif; font-weight: 500; color: currentColor; margin: 0; min-width: 88px; line-height: 36px; padding: 0 16px; border-radius: 3px; } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab], .md-primary[md-button], .md-primary[md-icon-button] { color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab], .md-accent[md-button], .md-accent[md-icon-button] { color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab], .md-warn[md-button], .md-warn[md-icon-button] { color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-primary[disabled][md-button], .md-primary[disabled][md-icon-button], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-accent[disabled][md-button], .md-accent[disabled][md-icon-button], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], .md-warn[disabled][md-button], .md-warn[disabled][md-icon-button], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab], [disabled][disabled][md-button], [disabled][disabled][md-icon-button] { color: rgba(0, 0, 0, 0.38); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab], [disabled][md-button], [disabled][md-icon-button] { cursor: default; } .md-button-focus[md-raised-button]::after, .md-button-focus[md-fab]::after, .md-button-focus[md-mini-fab]::after, .md-button-focus[md-button]::after, .md-button-focus[md-icon-button]::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } .md-button-focus.md-primary[md-raised-button]::after, .md-button-focus.md-primary[md-fab]::after, .md-button-focus.md-primary[md-mini-fab]::after, .md-button-focus.md-primary[md-button]::after, .md-button-focus.md-primary[md-icon-button]::after { background-color: rgba(0, 150, 136, 0.12); } .md-button-focus.md-accent[md-raised-button]::after, .md-button-focus.md-accent[md-fab]::after, .md-button-focus.md-accent[md-mini-fab]::after, .md-button-focus.md-accent[md-button]::after, .md-button-focus.md-accent[md-icon-button]::after { background-color: rgba(156, 39, 176, 0.12); } .md-button-focus.md-warn[md-raised-button]::after, .md-button-focus.md-warn[md-fab]::after, .md-button-focus.md-warn[md-mini-fab]::after, .md-button-focus.md-warn[md-button]::after, .md-button-focus.md-warn[md-icon-button]::after { background-color: rgba(244, 67, 54, 0.12); } [md-raised-button], [md-fab], [md-mini-fab] { box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); background-color: #fafafa; -webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0); -webkit-transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { color: white; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { color: rgba(255, 255, 255, 0.870588); } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { color: white; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { color: rgba(0, 0, 0, 0.38); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { background-color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { background-color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { background-color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { background-color: rgba(0, 0, 0, 0.12); } [md-raised-button]:active, [md-fab]:active, [md-mini-fab]:active { box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab] { box-shadow: none; } [md-button][disabled]:hover.md-primary, [md-button][disabled]:hover.md-accent, [md-button][disabled]:hover.md-warn, [md-button][disabled]:hover:hover { background-color: transparent; } [md-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 56px; height: 56px; padding: 0; } [md-fab] i, [md-fab] md-icon { padding: 16px 0; } [md-mini-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 40px; height: 40px; padding: 0; } [md-mini-fab] i, [md-mini-fab] md-icon { padding: 8px 0; } [md-icon-button] { min-width: 0; padding: 0; width: 40px; height: 40px; line-height: 24px; border-radius: 50%; } [md-icon-button] .md-button-wrapper > * { vertical-align: middle; } [md-button]:hover::after, [md-icon-button]:hover::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } [md-button]:hover.md-primary::after, [md-icon-button]:hover.md-primary::after { background-color: rgba(0, 150, 136, 0.12); } [md-button]:hover.md-accent::after, [md-icon-button]:hover.md-accent::after { background-color: rgba(156, 39, 176, 0.12); } [md-button]:hover.md-warn::after, [md-icon-button]:hover.md-warn::after { background-color: rgba(244, 67, 54, 0.12); } @media screen and (-ms-high-contrast: active) { .md-raised-button, .md-fab, .md-mini-fab { border: 1px solid #fff; } } </style><style>.side-nav[_ngcontent-hgo-5] {
  background: #ECEFF1;
  width: 232px;
  bottom: 0;
  overflow: auto;
  z-index: 100;
  border-right: 1px solid rgba(0, 0, 0, 0.3); }
  .side-nav[_ngcontent-hgo-5] ul[_ngcontent-hgo-5] {
    margin-top: 8px; }

.right-buttons[_ngcontent-hgo-5] {
  float: right;
  margin-right: 250px;
  margin-top: 10px; }

.tutorial-title[_ngcontent-hgo-5] {
  margin: 15px;
  float: left;
  font-size: larger;
  font-weight: bold; }

.top-navigation[_ngcontent-hgo-5] {
  position: fixed;
  margin-top: -60px;
  width: 100%;
  background-color: #ECEFF1;
  height: 60px;
  z-index: 50; }

.tutorial-content[_ngcontent-hgo-5] {
  margin-top: 60px;
  padding: 20px; }

.tutorials-container[_ngcontent-hgo-5] {
  padding-left: 230px; }

.l-pinned-top[_ngcontent-hgo-5] {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px; }

.l-pinned-left[_ngcontent-hgo-5] {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px; }

.l-left[_ngcontent-hgo-5] {
  float: left; }

.l-right[_ngcontent-hgo-5] {
  float: right; }

.l-relative[_ngcontent-hgo-5], .docs-content[_ngcontent-hgo-5] {
  position: relative; }

.l-absolute[_ngcontent-hgo-5] {
  position: absolute; }

.l-fixed[_ngcontent-hgo-5] {
  position: fixed; }

.l-offset-side-nav[_ngcontent-hgo-5] {
  padding-left: 232px; }

.l-offset-nav[_ngcontent-hgo-5] {
  padding-top: 64px; }</style><style>.diffbox[_ngcontent-hgo-11] {
  border: 1px solid #eee;
  -webkit-text-size-adjust: 100%;
  margin: 1.5em 0; }
  .diffbox[_ngcontent-hgo-11] .title-panel[_ngcontent-hgo-11] {
    padding: 5px 12px;
    background: #eee;
    border-bottom: solid 1px #eee;
    color: #333;
    overflow: auto; }
    .diffbox[_ngcontent-hgo-11] .title-panel[_ngcontent-hgo-11] .github-commit-link[_ngcontent-hgo-11] {
      float: right;
      color: black;
      text-decoration: none;
      border-bottom: none !important; }
  .diffbox[_ngcontent-hgo-11] .code-container[_ngcontent-hgo-11] {
    overflow-x: auto;
    position: relative;
    padding: 9px 3px 3px 0;
    background: #f8f8f8; }
    .diffbox[_ngcontent-hgo-11] .code-container[_ngcontent-hgo-11] .scroll-container[_ngcontent-hgo-11] {
      display: inline-block;
      min-width: 100%;
      overflow: hidden; }
    .diffbox[_ngcontent-hgo-11] .code-container[_ngcontent-hgo-11] pre[_ngcontent-hgo-11] {
      margin: 0;
      padding: 0;
      background-color: transparent; }
      .diffbox[_ngcontent-hgo-11] .code-container[_ngcontent-hgo-11] pre.line-added[_ngcontent-hgo-11] {
        background: #eaffea; }
      .diffbox[_ngcontent-hgo-11] .code-container[_ngcontent-hgo-11] pre.line-removed[_ngcontent-hgo-11] {
        background: #ff9ea2; }
    .diffbox[_ngcontent-hgo-11] .code-container[_ngcontent-hgo-11] .line-content[_ngcontent-hgo-11] {
      padding-left: 36px;
      overflow: hidden; }
      .diffbox[_ngcontent-hgo-11] .code-container[_ngcontent-hgo-11] .line-content[_ngcontent-hgo-11] .hljs-comment[_ngcontent-hgo-11] {
        color: #777; }
    .diffbox[_ngcontent-hgo-11] .code-container[_ngcontent-hgo-11] .line-numbers[_ngcontent-hgo-11] {
      text-align: right;
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      -o-user-select: none;
      position: absolute;
      width: 25px; }
      .diffbox[_ngcontent-hgo-11] .code-container[_ngcontent-hgo-11] .line-numbers[_ngcontent-hgo-11] .line-number[_ngcontent-hgo-11] {
        color: #aaa;
        font-style: italic; }</style></head><body><universal-styles></universal-styles>


<app _nghost-hgo-1=""><md-toolbar _ngcontent-hgo-1="" class="main-toolbar md-primary"><div class="md-toolbar-layout"> <md-toolbar-row> 
    <a _ngcontent-hgo-1="" href="/"><img _ngcontent-hgo-1="" class="logo" src="/assets/images/logo.png"></a>
    <button _ngcontent-hgo-1="" md-button=""><span class="md-button-wrapper">Tutorials</span> </button>
    <button _ngcontent-hgo-1="" md-button=""><span class="md-button-wrapper">Angular 2</span> </button>
    <button _ngcontent-hgo-1="" md-button=""><span class="md-button-wrapper">Docs</span> </button>
    <span _ngcontent-hgo-1="" class="fill-remaining-space"></span>
    <button _ngcontent-hgo-1="" md-button=""><span class="md-button-wrapper">Github</span> </button>
    <button _ngcontent-hgo-1="" md-button=""><span class="md-button-wrapper">Blog</span> </button>
    <button _ngcontent-hgo-1="" md-button=""><span class="md-button-wrapper">Contact Us</span> </button>
    <button _ngcontent-hgo-1="" md-button=""><span class="md-button-wrapper">Manifesto</span> </button>
    <button _ngcontent-hgo-1="" md-button=""><span class="md-button-wrapper">About us</span> </button>
 </md-toolbar-row>  </div></md-toolbar>
<router-outlet _ngcontent-hgo-1=""></router-outlet><tutorial _nghost-hgo-5=""><div _ngcontent-hgo-5="" class="tutorials-container">
    <nav _ngcontent-hgo-5="" class="side-nav l-pinned-left l-layer-4 l-offset-nav">
        <steps-list _ngcontent-hgo-5=""><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/folder-structure">8. Folder Structure</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item active-step" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/css-sass-and-bootstrap">18. CSS, SASS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/ionic2">23. Ionic2</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/next-steps">25. Next Steps</a>
    </li>
</ul>
</steps-list>
    </nav>
    <div _ngcontent-hgo-5="" class="top-navigation">
        <span _ngcontent-hgo-5="" class="tutorial-title" stepName="">Privacy &amp; Subscriptions</span>
        <div _ngcontent-hgo-5="" class="right-buttons">
            <a _ngcontent-hgo-5="" class="md-primary" md-raised-button="" tutorialNavigation="previous" href="/tutorials/angular2/socially/users-and-authentication">Previous</a>
            <a _ngcontent-hgo-5="" class="md-primary" codeDiffButton="" md-raised-button="">Code Diff</a>
            <a _ngcontent-hgo-5="" class="md-primary" md-raised-button="" tutorialNavigation="next" href="/tutorials/angular2/socially/deploying-your-app">Next</a>
        </div>
    </div>
    <div _ngcontent-hgo-5="" class="tutorial-content">
        <router-outlet _ngcontent-hgo-5=""></router-outlet><tutorial-page><div class="tutorial-container"></div></tutorial-page><tutorial-page-content><p>You may have noticed that all available parties were always shown on the page
at the time, regardless of whether they had been added by a logged-in user or
anonymously.</p>

<p>In future versions of our app, we'll probably want to have a RSVP feature for parties,
which should only display:</p>

<ul><li>public parties</li><li>parties the current user has been invited to</li></ul>

<p>In this step we are going to learn how we can restrict data flow from the server side
to the client side for only desired data in Meteor, based on the user currently logged-in and some other parameters.</p>

<h2>Autopublish</h2>

<p>First we need to remove the <code ngNonBindable="">autopublish</code> Meteor package.</p>

<p><code ngNonBindable="">autopublish</code> is added to any new Meteor project.
Like it was mentioned before, it pushes a full copy of the database to each client.
It helped us rapidly developer our app, but it's not so good for privacy...</p>

<p>Write this command in the console:</p>

<pre><code ngNonBindable="">meteor remove autopublish</code></pre>

<p>Now run the app. Oops, nothing on the page!</p>

<h2>Meteor.publish</h2>

<p>Data in Meteor is published from the server and subscribed to by the client.</p>

<p>We need to tell Meteor what parties we want transferred to the client side.</p>

<p>To do that we will use Meteor's <a href="http://docs.meteor.com/#/full/meteor_publish">publish function</a>.</p>

<p>Publication functions are placed inside the "server" folder so clients won't have access to them.</p>

<p>Let's create a new file inside the "server" folder called <code ngNonBindable="">parties.ts</code>. Here we can specify which parties to pass to the client.</p>

<p><diffbox step="9.1" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.1</span> <span _ngcontent-hgo-11="" class="commit-summary">Publish parties collection</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/904e9264b78babb807195389996f472e02804265">server/parties.ts</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">1</pre><pre _ngcontent-hgo-11="" class="line-number">2</pre><pre _ngcontent-hgo-11="" class="line-number">3</pre><pre _ngcontent-hgo-11="" class="line-number">4</pre><pre _ngcontent-hgo-11="" class="line-number">5</pre><pre _ngcontent-hgo-11="" class="line-number">6</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Parties} from <span class="hljs-string">'../collections/parties'</span>;</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">Meteor.publish(<span class="hljs-string">'parties'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> Parties.find();</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>As you can see, parameters of the Meteor.publish are self-explanatory:
first one is a publication name, then there goes a function that returns
a Mongo cursor, which represents a subset of the parties collection
that server will transfer to the client.</p>

<p>The publish function can take parameters as well, but
we'll get to that in a minute.</p>

<p>We've just created a System.js module, hence, as you already know, one necessary thing is left — to import it in the <code ngNonBindable="">main.ts</code> in order to execute code inside:</p>

<p><diffbox step="9.2" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.2</span> <span _ngcontent-hgo-11="" class="commit-summary">Import parties publications on the server</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/f678ca1186c4e480063bd5da82342dff9754f57e">server/main.ts</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">1</pre><pre _ngcontent-hgo-11="" class="line-number">2</pre><pre _ngcontent-hgo-11="" class="line-number">3</pre><pre _ngcontent-hgo-11="" class="line-number">4</pre><pre _ngcontent-hgo-11="" class="line-number">5</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {loadParties} from <span class="hljs-string">'./load-parties.ts'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> <span class="hljs-string">'./parties.ts'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">Meteor.startup(loadParties);</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<h2>Meteor.subscribe</h2>

<p><a href="http://docs.meteor.com/#/full/meteor_subscribe">Meteor.subscribe</a> is the receiving end of Meteor.publish on the client.</p>

<p>let's add the following line to subscribe to the <code ngNonBindable="">parties</code> publications:</p>

<pre><code ngNonBindable="">Meteor.subscribe('parties');</code></pre>

<p>It's very simple, isn't it? And when the subscription is completed, we select parties from the collection:</p>

<pre><code ngNonBindable="">Meteor.subscribe('parties', () =&gt; {
  this.parties = Parties.find();
});</code></pre>

<p>But beyond that simplicity there are two small issues we'll need to solve:</p>

<p>1) Ending a subscription.</p>

<p>Each subscription means that Meteor will continue synchronizing (or in Meteor terms, updating reactively) the particular set of data, we've just subscribed to, between server and client.
If the PartiesList component gets destroyed, we need to inform Meteor to stop that synchronization, otherwise we'll produce a memory leak.</p>

<p>2) Updating Angular 2's UI</p>

<p>We must inform Angular 2 to perform a UI refresh when new data arrives. In other words, we should setup a subscribe callback to run in Angular 2's zone.</p>

<p>These two points were a strong reason to add a new class called <code ngNonBindable="">MeteorComponent</code>
to the Angular2-Meteor package. <code ngNonBindable="">MeteorComponent</code> has two public methods: <code ngNonBindable="">subscribe</code> and <code ngNonBindable="">autorun</code>.
If you inherit a component of this class and make use of these methods, you won't need to worry
about cleanups: <code ngNonBindable="">MeteorComponent</code> will do them for you under the hood when it's needed.</p>

<p>These methods also have a convenient boolean parameter called <code ngNonBindable="">autoBind</code>, which goes lastly.
As its name suggests, we can tell <code ngNonBindable="">subscribe</code> to run the subscription callback in the change detection zone
by setting the parameter to true.</p>

<p>So, we are going to extend the <code ngNonBindable="">PartiesList</code> component and make use of <code ngNonBindable="">this.subscribe</code>:</p>

<p><diffbox step="9.3" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.3</span> <span _ngcontent-hgo-11="" class="commit-summary">Extend PartiesList and make use of subscribe method</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/d55fb6cf3b8937aad34dccdee27b2d9853648132">client/imports/parties-list/parties-list.ts</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">4</pre><pre _ngcontent-hgo-11="" class="line-number">5</pre><pre _ngcontent-hgo-11="" class="line-number">6</pre><pre _ngcontent-hgo-11="" class="line-number">7</pre><pre _ngcontent-hgo-11="" class="line-number">8</pre><pre _ngcontent-hgo-11="" class="line-number">9</pre><pre _ngcontent-hgo-11="" class="line-number">10</pre><pre _ngcontent-hgo-11="" class="line-number"> </pre><pre _ngcontent-hgo-11="" class="line-number">13</pre><pre _ngcontent-hgo-11="" class="line-number">14</pre><pre _ngcontent-hgo-11="" class="line-number">15</pre><pre _ngcontent-hgo-11="" class="line-number">16</pre><pre _ngcontent-hgo-11="" class="line-number">17</pre><pre _ngcontent-hgo-11="" class="line-number">18</pre><pre _ngcontent-hgo-11="" class="line-number">19</pre><pre _ngcontent-hgo-11="" class="line-number">20</pre><pre _ngcontent-hgo-11="" class="line-number">21</pre><pre _ngcontent-hgo-11="" class="line-number">22</pre><pre _ngcontent-hgo-11="" class="line-number">23</pre><pre _ngcontent-hgo-11="" class="line-number">24</pre><pre _ngcontent-hgo-11="" class="line-number">25</pre><pre _ngcontent-hgo-11="" class="line-number">26</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Mongo }       from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { ROUTER_DIRECTIVES }  from <span class="hljs-string">'@angular/router'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { LoginButtons } from <span class="hljs-string">'angular2-meteor-accounts-ui'</span>;</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { MeteorComponent } from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./parties-list.html'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  template,</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  directives: [PartiesForm, ROUTER_DIRECTIVES, LoginButtons]</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">})</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartiesList extends MeteorComponent{</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  parties: Mongo.Cursor&lt;Party&gt;;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">    <span class="hljs-keyword">super</span>();</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.subscribe(<span class="hljs-string">'parties'</span>, () =&gt; {</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.parties = Parties.find();</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">    }, <span class="hljs-literal">true</span>);</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  removeParty(party) {</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<blockquote><p>Note that we are calling <code ngNonBindable="">super()</code> so that the constructor of the component we are inheriting from will run as well</p></blockquote>

<p>Now run the app. Whoa, we've just made all the parties come back using pub/sub!</p>

<p>As it's mentioned earlier, it'd be nice for the app to implement some basic security and show parties based on who owns them. Let's do it.</p>

<p>Firstly, we'll add a new <code ngNonBindable="">public</code> field to the party data several steps:</p>

<ol><li>update party in <code ngNonBindable="">typings/party.d.ts</code> to include <code ngNonBindable="">public: boolean</code>;</li><li>add UI with the new "Public" checkbox to the right of the "Location" input;</li><li>change the <code ngNonBindable="">PartiesForm</code> component and its <code ngNonBindable="">addParty</code> method particularly to reflect changes on the UI;</li><li>change the initial data on the server in <code ngNonBindable="">loadParties.ts</code> to contain the <code ngNonBindable="">public</code> field as well:</li></ol>

<p><diffbox step="9.4" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.4</span> <span _ngcontent-hgo-11="" class="commit-summary">Add "Public" checkbox</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/03681305704b8161b548e62494dbc0741042f533">client/imports/parties-form/parties-form.html</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">6</pre><pre _ngcontent-hgo-11="" class="line-number">7</pre><pre _ngcontent-hgo-11="" class="line-number">8</pre><pre _ngcontent-hgo-11="" class="line-number">9</pre><pre _ngcontent-hgo-11="" class="line-number">10</pre><pre _ngcontent-hgo-11="" class="line-number">11</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Location<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">ngControl</span>=<span class="hljs-string">"location"</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Public<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">ngControl</span>=<span class="hljs-string">"public"</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox filename="typings/party.d.ts" step="9.5" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.5</span> <span _ngcontent-hgo-11="" class="commit-summary">Update PartiesForm component</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/3ee2819b00f521b669f03e7df2b8e7d90823d3d7">typings/party.d.ts</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">4</pre><pre _ngcontent-hgo-11="" class="line-number">5</pre><pre _ngcontent-hgo-11="" class="line-number">6</pre><pre _ngcontent-hgo-11="" class="line-number">7</pre><pre _ngcontent-hgo-11="" class="line-number">8</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  description?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  location: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  owner?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-keyword">public</span>: <span class="hljs-built_in">boolean</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox filename="client/imports/parties-form/parties-form.ts" step="9.5" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.5</span> <span _ngcontent-hgo-11="" class="commit-summary">Update PartiesForm component</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/3ee2819b00f521b669f03e7df2b8e7d90823d3d7">client/imports/parties-form/parties-form.ts</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">19</pre><pre _ngcontent-hgo-11="" class="line-number">20</pre><pre _ngcontent-hgo-11="" class="line-number">21</pre><pre _ngcontent-hgo-11="" class="line-number">22</pre><pre _ngcontent-hgo-11="" class="line-number">23</pre><pre _ngcontent-hgo-11="" class="line-number">24</pre><pre _ngcontent-hgo-11="" class="line-number">25</pre><pre _ngcontent-hgo-11="" class="line-number">26</pre><pre _ngcontent-hgo-11="" class="line-number">27</pre><pre _ngcontent-hgo-11="" class="line-number">28</pre><pre _ngcontent-hgo-11="" class="line-number">29</pre><pre _ngcontent-hgo-11="" class="line-number">30</pre><pre _ngcontent-hgo-11="" class="line-number">31</pre><pre _ngcontent-hgo-11="" class="line-number">32</pre><pre _ngcontent-hgo-11="" class="line-number">33</pre><pre _ngcontent-hgo-11="" class="line-number">34</pre><pre _ngcontent-hgo-11="" class="line-number">35</pre><pre _ngcontent-hgo-11="" class="line-number">36</pre><pre _ngcontent-hgo-11="" class="line-number">37</pre><pre _ngcontent-hgo-11="" class="line-number">38</pre><pre _ngcontent-hgo-11="" class="line-number">39</pre><pre _ngcontent-hgo-11="" class="line-number">40</pre><pre _ngcontent-hgo-11="" class="line-number">41</pre><pre _ngcontent-hgo-11="" class="line-number">42</pre><pre _ngcontent-hgo-11="" class="line-number">43</pre><pre _ngcontent-hgo-11="" class="line-number">44</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.partiesForm = fb.group({</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      name: [<span class="hljs-string">''</span>, Validators.required],</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      description: [<span class="hljs-string">''</span>],</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">      location: [<span class="hljs-string">''</span>, Validators.required],</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">      <span class="hljs-string">'public'</span>: [<span class="hljs-literal">false</span>]</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">    });</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  addParty(party) {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.partiesForm.valid) {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      <span class="hljs-keyword">if</span> (Meteor.userId()) {</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        Parties.insert(&lt;Party&gt;{</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">          name: party.name,</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">          description: party.description,</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">          location: party.location,</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">          <span class="hljs-string">'public'</span>: party.public,</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">          owner: Meteor.userId()</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        });</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        (&lt;Control&gt;<span class="hljs-keyword">this</span>.partiesForm.controls[<span class="hljs-string">'name'</span>]).updateValue(<span class="hljs-string">''</span>);</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        (&lt;Control&gt;<span class="hljs-keyword">this</span>.partiesForm.controls[<span class="hljs-string">'description'</span>]).updateValue(<span class="hljs-string">''</span>);</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        (&lt;Control&gt;<span class="hljs-keyword">this</span>.partiesForm.controls[<span class="hljs-string">'location'</span>]).updateValue(<span class="hljs-string">''</span>);</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        (&lt;Control&gt;<span class="hljs-keyword">this</span>.partiesForm.controls[<span class="hljs-string">'public'</span>]).updateValue(<span class="hljs-literal">false</span>);</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      } <span class="hljs-keyword">else</span> {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        alert(<span class="hljs-string">'Please log in to add a party'</span>);</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      }</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="9.6" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.6</span> <span _ngcontent-hgo-11="" class="commit-summary">Add public field to the initial parties</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/eb505555122f42bb820daacc53561c159cc897d0">server/load-parties.ts</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">7</pre><pre _ngcontent-hgo-11="" class="line-number">8</pre><pre _ngcontent-hgo-11="" class="line-number">9</pre><pre _ngcontent-hgo-11="" class="line-number">10</pre><pre _ngcontent-hgo-11="" class="line-number">11</pre><pre _ngcontent-hgo-11="" class="line-number">12</pre><pre _ngcontent-hgo-11="" class="line-number">13</pre><pre _ngcontent-hgo-11="" class="line-number">14</pre><pre _ngcontent-hgo-11="" class="line-number">15</pre><pre _ngcontent-hgo-11="" class="line-number">16</pre><pre _ngcontent-hgo-11="" class="line-number">17</pre><pre _ngcontent-hgo-11="" class="line-number">18</pre><pre _ngcontent-hgo-11="" class="line-number">19</pre><pre _ngcontent-hgo-11="" class="line-number">20</pre><pre _ngcontent-hgo-11="" class="line-number">21</pre><pre _ngcontent-hgo-11="" class="line-number">22</pre><pre _ngcontent-hgo-11="" class="line-number">23</pre><pre _ngcontent-hgo-11="" class="line-number">24</pre><pre _ngcontent-hgo-11="" class="line-number">25</pre><pre _ngcontent-hgo-11="" class="line-number">26</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        <span class="hljs-string">'name'</span>: <span class="hljs-string">'Dubstep-Free Zone'</span>,</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        <span class="hljs-string">'description'</span>: <span class="hljs-string">'Can we please just for an evening not listen to dubstep.'</span>,</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        <span class="hljs-string">'location'</span>: <span class="hljs-string">'Palo Alto'</span>,</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        <span class="hljs-string">'public'</span>: <span class="hljs-literal">true</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      },</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        <span class="hljs-string">'name'</span>: <span class="hljs-string">'All dubstep all the time'</span>,</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        <span class="hljs-string">'description'</span>: <span class="hljs-string">'Get it on!'</span>,</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        <span class="hljs-string">'location'</span>: <span class="hljs-string">'Palo Alto'</span>,</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        <span class="hljs-string">'public'</span>: <span class="hljs-literal">true</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      },</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        <span class="hljs-string">'name'</span>: <span class="hljs-string">'Savage lounging'</span>,</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        <span class="hljs-string">'description'</span>: <span class="hljs-string">'Leisure suit required. And only fiercest manners.'</span>,</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        <span class="hljs-string">'location'</span>: <span class="hljs-string">'San Francisco'</span>,</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        <span class="hljs-string">'public'</span>: <span class="hljs-literal">false</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      }</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">    ];</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Note that since <code ngNonBindable="">public</code> is a reserved word, if we want to use it as field name, we need add quote around like this <code ngNonBindable="">'public'</code>.</p>

<p>Next, we are limiting data sent to the client. A simple check is to verify that either
the party is public or the "owner" field exists and is equal to the currently logged-in user:</p>

<p><diffbox step="9.7" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.7</span> <span _ngcontent-hgo-11="" class="commit-summary">Limit data sent to the client</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/b6d3a0f27d2310a898b64ed2e1f8f040daf19f27">server/parties.ts</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">2</pre><pre _ngcontent-hgo-11="" class="line-number">3</pre><pre _ngcontent-hgo-11="" class="line-number">4</pre><pre _ngcontent-hgo-11="" class="line-number">5</pre><pre _ngcontent-hgo-11="" class="line-number">6</pre><pre _ngcontent-hgo-11="" class="line-number">7</pre><pre _ngcontent-hgo-11="" class="line-number">8</pre><pre _ngcontent-hgo-11="" class="line-number">9</pre><pre _ngcontent-hgo-11="" class="line-number">10</pre><pre _ngcontent-hgo-11="" class="line-number">11</pre><pre _ngcontent-hgo-11="" class="line-number">12</pre><pre _ngcontent-hgo-11="" class="line-number">13</pre><pre _ngcontent-hgo-11="" class="line-number">14</pre><pre _ngcontent-hgo-11="" class="line-number">15</pre><pre _ngcontent-hgo-11="" class="line-number">16</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">Meteor.publish(<span class="hljs-string">'parties'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> Parties.find({</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">    $or: [</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">      { <span class="hljs-string">'public'</span>: <span class="hljs-literal">true</span> },</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">      {</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        $and: [</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">          { owner: <span class="hljs-keyword">this</span>.userId },</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">          { owner: { $exists: <span class="hljs-literal">true</span> } }</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        ]</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">      }</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">    ]</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  });</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<blockquote><p><code ngNonBindable="">$or</code>, <code ngNonBindable="">$and</code> and <code ngNonBindable="">$exists</code> names are part of the MongoDB query syntax.
If you are not familiar with it, please, read about them here: <a href="http://docs.mongodb.org/manual/reference/operator/query/or/">$or</a>, <a href="http://docs.mongodb.org/manual/reference/operator/query/and/">$and</a> and <a href="http://docs.mongodb.org/manual/reference/operator/query/exists/">$exists</a>.</p></blockquote>

<p>We also need to reset the database since schema of the parties inside is already invalid:</p>

<pre><code ngNonBindable="">meteor reset</code></pre>

<p>Let's check to make sure everything is working.</p>

<p>Run the app again, and you will see only two items. That's because we set the third party to be private.</p>

<p>Log in with 2 different users in 2 different browsers. Try to create a couple of public parties and a couple of private ones. Now log out and check out what parties are shown. Only public parties should be visible.</p>

<p>Now log in as a party owner user and verify that a couple of private parties got to the page as well.</p>

<h2>Subscribe with Params</h2>

<p>There is one page in our app so far where we'll need parameterized publishing — the <code ngNonBindable="">PartyDetails</code> component's page.
Besides that, let's add another cool feature to Socially, party search by location.</p>

<p>As you already know, the second parameter of Meteor.publish is a callback function that can take a variable number
of parameters, and these parameters are passed by the user to <code ngNonBindable="">Meteor.subscribe</code> on the client.</p>

<p>Let's elaborate our "party" publication on the server. We want to publish both a list of parties and a single party.</p>

<p><diffbox step="9.8" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.8</span> <span _ngcontent-hgo-11="" class="commit-summary">Add "party" publication</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/142a5a767dd42aa96caed550501aaa5cd30e3957">server/parties.ts</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">1</pre><pre _ngcontent-hgo-11="" class="line-number">2</pre><pre _ngcontent-hgo-11="" class="line-number">3</pre><pre _ngcontent-hgo-11="" class="line-number">4</pre><pre _ngcontent-hgo-11="" class="line-number">5</pre><pre _ngcontent-hgo-11="" class="line-number">6</pre><pre _ngcontent-hgo-11="" class="line-number">7</pre><pre _ngcontent-hgo-11="" class="line-number">8</pre><pre _ngcontent-hgo-11="" class="line-number"> </pre><pre _ngcontent-hgo-11="" class="line-number">12</pre><pre _ngcontent-hgo-11="" class="line-number">13</pre><pre _ngcontent-hgo-11="" class="line-number">14</pre><pre _ngcontent-hgo-11="" class="line-number">15</pre><pre _ngcontent-hgo-11="" class="line-number">16</pre><pre _ngcontent-hgo-11="" class="line-number">17</pre><pre _ngcontent-hgo-11="" class="line-number">18</pre><pre _ngcontent-hgo-11="" class="line-number">19</pre><pre _ngcontent-hgo-11="" class="line-number">20</pre><pre _ngcontent-hgo-11="" class="line-number">21</pre><pre _ngcontent-hgo-11="" class="line-number">22</pre><pre _ngcontent-hgo-11="" class="line-number">23</pre><pre _ngcontent-hgo-11="" class="line-number">24</pre><pre _ngcontent-hgo-11="" class="line-number">25</pre><pre _ngcontent-hgo-11="" class="line-number">26</pre><pre _ngcontent-hgo-11="" class="line-number">27</pre><pre _ngcontent-hgo-11="" class="line-number">28</pre><pre _ngcontent-hgo-11="" class="line-number">29</pre><pre _ngcontent-hgo-11="" class="line-number">30</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Parties} from <span class="hljs-string">'../collections/parties'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildQuery</span>(<span class="hljs-params">partyId?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Object</span> </span>{</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-keyword">var</span> isAvailable = {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">    $or: [</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      { <span class="hljs-string">'public'</span>: <span class="hljs-literal">true</span> },</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      {</pre><pre _ngcontent-hgo-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">        ]</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      }</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">    ]</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  };</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-keyword">if</span> (partyId) {</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> { $and: [{ _id: partyId }, isAvailable] };</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> isAvailable;</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">}</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">Meteor.publish(<span class="hljs-string">'parties'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> Parties.find(buildQuery.call(<span class="hljs-keyword">this</span>));</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">});</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">Meteor.publish(<span class="hljs-string">'party'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">partyId: <span class="hljs-built_in">string</span></span>) </span>{</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> Parties.find(buildQuery.call(<span class="hljs-keyword">this</span>, partyId));</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Looks like a lot of code, but it does something powerful. The privacy query, we introduced above, was moved to a separate method called <code ngNonBindable="">buildQuery</code>. We'll need this function to avoid repetition with each different parties query.</p>

<blockquote><p>Notice that we used <code ngNonBindable="">buildQuery.call(this)</code> calling syntax in order to make context of this method the same as in Meteor.publish and be able to use <code ngNonBindable="">this.userId</code> inside that method.</p></blockquote>

<p>Let's subscribe to the new publication in the PartyDetails to load one specific party:</p>

<p><diffbox step="9.9" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.9</span> <span _ngcontent-hgo-11="" class="commit-summary">Subscribe to the "party" publication</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/34519737b2b3898a40fc1bcd471dc5f9ad3ddf66">client/imports/party-details/party-details.ts</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">1</pre><pre _ngcontent-hgo-11="" class="line-number">2</pre><pre _ngcontent-hgo-11="" class="line-number">3</pre><pre _ngcontent-hgo-11="" class="line-number">4</pre><pre _ngcontent-hgo-11="" class="line-number">5</pre><pre _ngcontent-hgo-11="" class="line-number">6</pre><pre _ngcontent-hgo-11="" class="line-number">7</pre><pre _ngcontent-hgo-11="" class="line-number">8</pre><pre _ngcontent-hgo-11="" class="line-number">9</pre><pre _ngcontent-hgo-11="" class="line-number"> </pre><pre _ngcontent-hgo-11="" class="line-number">13</pre><pre _ngcontent-hgo-11="" class="line-number">14</pre><pre _ngcontent-hgo-11="" class="line-number">15</pre><pre _ngcontent-hgo-11="" class="line-number">16</pre><pre _ngcontent-hgo-11="" class="line-number">17</pre><pre _ngcontent-hgo-11="" class="line-number">18</pre><pre _ngcontent-hgo-11="" class="line-number">19</pre><pre _ngcontent-hgo-11="" class="line-number">20</pre><pre _ngcontent-hgo-11="" class="line-number">21</pre><pre _ngcontent-hgo-11="" class="line-number">22</pre><pre _ngcontent-hgo-11="" class="line-number">23</pre><pre _ngcontent-hgo-11="" class="line-number">24</pre><pre _ngcontent-hgo-11="" class="line-number">25</pre><pre _ngcontent-hgo-11="" class="line-number">26</pre><pre _ngcontent-hgo-11="" class="line-number">27</pre><pre _ngcontent-hgo-11="" class="line-number">28</pre><pre _ngcontent-hgo-11="" class="line-number">29</pre><pre _ngcontent-hgo-11="" class="line-number">30</pre><pre _ngcontent-hgo-11="" class="line-number">31</pre><pre _ngcontent-hgo-11="" class="line-number">32</pre><pre _ngcontent-hgo-11="" class="line-number">33</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Component } from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { ActivatedRoute, ROUTER_DIRECTIVES } from <span class="hljs-string">'@angular/router'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Parties} from <span class="hljs-string">'../../../collections/parties.ts'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { RequireUser } from <span class="hljs-string">'angular2-meteor-accounts-ui'</span>;</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { MeteorComponent } from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./party-details.html'</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  directives: [ROUTER_DIRECTIVES]</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">})</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">@RequireUser()</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartyDetails extends MeteorComponent {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  partyId: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  party: Party;</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-keyword">constructor</span>(private route: ActivatedRoute) {</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">    <span class="hljs-keyword">super</span>();</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  ngOnInit() {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.route.params.subscribe((params) =&gt; {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">      <span class="hljs-keyword">this</span>.partyId = params[<span class="hljs-string">'partyId'</span>];</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.subscribe(<span class="hljs-string">'party'</span>, <span class="hljs-keyword">this</span>.partyId, () =&gt; {</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">        <span class="hljs-keyword">this</span>.party = Parties.findOne(<span class="hljs-keyword">this</span>.partyId);</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">      }, <span class="hljs-literal">true</span>);</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">    });</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>As you can see above, the <code ngNonBindable="">party</code> property is undefined initially, which
means at the moment the template is being rendered it's also undefined.
The Angular 2 rendering engine doesn't check availability of template variables while rendering,
as opposed to how templates are rendered in Blaze.</p>

<p>We can add an <code ngNonBindable="">ngIf</code> directive to conditionally display the form when the party data is available:</p>

<p><diffbox step="9.10" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.10</span> <span _ngcontent-hgo-11="" class="commit-summary">Show PartyDetails when the party is loaded</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/f8ba0712fa859b8c2daa0b619c8a8306e3e2f758">client/imports/party-details/party-details.html</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">1</pre><pre _ngcontent-hgo-11="" class="line-number">2</pre><pre _ngcontent-hgo-11="" class="line-number">3</pre><pre _ngcontent-hgo-11="" class="line-number">4</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-added" className="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> (<span class="hljs-attr">submit</span>)=<span class="hljs-string">"saveParty(party)"</span> *<span class="hljs-attr">ngIf</span>=<span class="hljs-string">"party"</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> [(<span class="hljs-attr">ngModel</span>)]=<span class="hljs-string">"party.name"</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context"> </pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Run the app and click on one of the party links. You'll see that the party details page loads with full data as before.</p>

<h1>Search</h1>

<p>Now it's time for the parties search. Let's add a search input and button to the right of the "Add" button.
We are going to extend the <code ngNonBindable="">PartiesList</code> component since this features is related to the parties list itself:</p>

<p><diffbox step="9.11" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.11</span> <span _ngcontent-hgo-11="" class="commit-summary">Add search inputs</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/aaf7e7482eabc4851d06aeeea26d62551ae900a1">client/imports/parties-list/parties-list.html</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">1</pre><pre _ngcontent-hgo-11="" class="line-number">2</pre><pre _ngcontent-hgo-11="" class="line-number">3</pre><pre _ngcontent-hgo-11="" class="line-number">4</pre><pre _ngcontent-hgo-11="" class="line-number">5</pre><pre _ngcontent-hgo-11="" class="line-number">6</pre><pre _ngcontent-hgo-11="" class="line-number">7</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-context" className="line-context"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">parties-form</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"float: left"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">parties-form</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> #<span class="hljs-attr">searchtext</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Search by Location"</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"search(searchtext.value)"</span>&gt;</span>Search<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">login-buttons</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">login-buttons</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> *<span class="hljs-attr">ngFor</span>=<span class="hljs-string">"let party of parties"</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>As you may have guessed, the next thing is to process the button click event:</p>

<p><diffbox step="9.12" tutorial="angular2-meteor-socially" _nghost-hgo-11=""><div _ngcontent-hgo-11="" class="diffbox">
    <div _ngcontent-hgo-11="" class="title-panel">
        <span _ngcontent-hgo-11="" class="step-number">9.12</span> <span _ngcontent-hgo-11="" class="commit-summary">Add search click event handler</span>
        <a _ngcontent-hgo-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/47296230c8d79d29745e97abbd64116de6c80751">client/imports/parties-list/parties-list.ts</a>
    </div>
    <div _ngcontent-hgo-11="" class="code-container">
        <div _ngcontent-hgo-11="" class="scroll-container">
            <div _ngcontent-hgo-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-number">26</pre><pre _ngcontent-hgo-11="" class="line-number">27</pre><pre _ngcontent-hgo-11="" class="line-number">28</pre><pre _ngcontent-hgo-11="" class="line-number">29</pre><pre _ngcontent-hgo-11="" class="line-number">30</pre><pre _ngcontent-hgo-11="" class="line-number">31</pre><pre _ngcontent-hgo-11="" class="line-number">32</pre><pre _ngcontent-hgo-11="" class="line-number">33</pre><pre _ngcontent-hgo-11="" class="line-number">34</pre><pre _ngcontent-hgo-11="" class="line-number">35</pre><pre _ngcontent-hgo-11="" class="line-number">36</pre><pre _ngcontent-hgo-11="" class="line-number">37</pre>
            </div>
            <div _ngcontent-hgo-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  removeParty(party) {</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">    Parties.remove(party._id);</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  search(value: <span class="hljs-built_in">string</span>) {</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (value) {</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.parties = Parties.find({ location: value });</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">    } <span class="hljs-keyword">else</span> {</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.parties = Parties.find();</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">    }</pre><pre _ngcontent-hgo-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-hgo-11="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Notice that we don't re-subscribe in the <code ngNonBindable="">search</code> method because we've already loaded all parties available to
the current user from the published parties, so we just query the loaded collection.</p>

<h1>Understanding Publish-Subscribe</h1>

<p>It is very important to understand Meteor's Publish-Subscribe mechanism so you don't get confused and use it to filter things in the view!</p>

<p>Meteor accumulates all the data from the different subscriptions of the same collection in the client, so adding a different subscription in a different view won't delete the data that is already in the client.</p>

<p>Please, read more about Pub/Sub in Meteor <a href="http://www.meteorpedia.com/read/Understanding_Meteor_Publish_and_Subscribe">here</a>.</p>

<h1>Summary</h1>

<p>In this step we've clearly seen how powerful Meteor and Angular 2 are and how they become even more
powerful when used together. With rather few lines of code, we were able to add full privacy to Socially as well as
search capabilities.</p>

<p>Meanwhile, we've learned about:</p>

<ul><li>the importance of removing <code ngNonBindable="">autopublish</code>;</li><li>the Publish-Subscribe mechanism in Meteor;</li><li>how to query particular data from the database via the server side.</li></ul>

<p>In the <a href="/tutorials/angular2/deploying-your-app">next step</a>, we'll look at how quick and easy it is to deploy your Meteor app.</p></tutorial-page-content>
    </div>
</div></tutorial></app>


</body></html>