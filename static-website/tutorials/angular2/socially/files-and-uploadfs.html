<!DOCTYPE html><html lang="en"><head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic,800italic" rel="stylesheet" type="text/css">
    <title>Angular2-Meteor</title>
    <meta charset="UTF-8">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <base href="/">
    <style>.logo[_ngcontent-kfp-1] {
  width: auto;
  height: 2em; }

.main-toolbar[_ngcontent-kfp-1] {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  box-shadow: 3px 0 6px rgba(0, 0, 0, 0.3);
  background: #90A4AE; }

.fill-remaining-space[_ngcontent-kfp-1] {
  -ms-flex: 1 1 auto;
      flex: 1 1 auto; }</style><style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0; }

/* Base color: saturation 0; */
.hljs,
.hljs-subst {
  color: #444; }

.hljs-comment {
  color: #888888; }

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold; }

/* User color: hue: 0 */
.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000; }

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold; }

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060; }

/* Language color: hue: 90; */
.hljs-literal {
  color: #78A960; }

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300; }

/* Meta color: hue: 200 */
.hljs-meta {
  color: #1f7199; }

.hljs-meta-string {
  color: #4d99bf; }

/* Misc effects */
.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8; }

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic; }

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold; }

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080; }

.hljs-string,
.hljs-doctag {
  color: #d14; }

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold; }

.hljs-subst {
  font-weight: normal; }

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold; }

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal; }

.hljs-regexp,
.hljs-link {
  color: #009926; }

.hljs-symbol,
.hljs-bullet {
  color: #990073; }

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3; }

.hljs-meta {
  color: #999;
  font-weight: bold; }

.hljs-deletion {
  background: #fdd; }

.hljs-addition {
  background: #dfd; }

.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

body {
  padding: 0;
  margin: 0;
  padding-top: 64px;
  font-family: 'Open Sans', sans-serif; }

pre {
  background: transparent;
  border: none;
  white-space: pre-wrap; }

code {
  white-space: pre-wrap; }

.step-item {
  margin: 0;
  padding: 0;
  border-bottom: 1px solid #CFD8DC;
  color: #546E7A; }

.step-link {
  text-decoration: none;
  color: #536E7A;
  display: block;
  font-size: 14px;
  padding: 16px 16px;
  margin: 0;
  background-color: #ECEFF1; }

.active-step a {
  font-weight: bold; }

.tutorial-steps-list {
  list-style: none;
  padding-left: 0;
  margin-top: 8px; }

.md-primary {
  background: #263238 !important; }
</style><style>/** * Mixin that creates a new stacking context. * see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */ /** * This mixin hides an element visually. * That means it's still accessible for screen-readers but not visible in view. */ /** * Forces an element to grow to fit floated contents; used as as an alternative to * `overflow: hidden;` because it doesn't cut off contents. */ /** * A mixin, which generates temporary ink ripple on a given component. * When $bindToParent is set to true, it will check for the focused class on the same selector as you included * that mixin. * It is also possible to specify the color palette of the temporary ripple. By default it uses the * accent palette for its background. */ md-toolbar { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; min-height: 64px; font-size: 20px; font-weight: 400; font-family: Roboto, "Helvetica Neue", sans-serif; padding: 0 16px; -webkit-box-orient: vertical; -webkit-box-direction: normal; -ms-flex-direction: column; flex-direction: column; background: whitesmoke; color: rgba(0, 0, 0, 0.87); } md-toolbar.md-primary { background: #009688; color: white; } md-toolbar.md-accent { background: #9c27b0; color: rgba(255, 255, 255, 0.870588); } md-toolbar.md-warn { background: #f44336; color: white; } md-toolbar md-toolbar-row { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; height: 64px; -webkit-box-orient: horizontal; -webkit-box-direction: normal; -ms-flex-direction: row; flex-direction: row; -webkit-box-align: center; -ms-flex-align: center; align-items: center; } </style><style>/** * A collection of mixins and CSS classes that can be used to apply elevation to a material * element. * See: https://www.google.com/design/spec/what-is-material/elevation-shadows.html * Examples: * * * .md-foo { *   @include $md-elevation(2); * *   &:active { *     @include $md-elevation(8); *   } * } * * <div id="external-card" class="md-elevation-z2"><p>Some content</p></div> * * For an explanation of the design behind how elevation is implemented, see the design doc at * https://goo.gl/Kq0k9Z. */ /** * The css property used for elevation. In most cases this should not be changed. It is exposed * as a variable for abstraction / easy use when needing to reference the property directly, for * example in a will-change rule. */ /** The default duration value for elevation transitions. */ /** The default easing value for elevation transitions. */ /** * Applies the correct css rules to an element to give it the elevation specified by $zValue. * The $zValue must be between 0 and 24. */ /** * Returns a string that can be used as the value for a transition property for elevation. * Calling this function directly is useful in situations where a component needs to transition * more than one property. * * .foo { *   transition: md-elevation-transition-property-value(), opacity 100ms ease; *   will-change: $md-elevation-property, opacity; * } */ /** * Applies the correct css rules needed to have an element transition between elevations. * This mixin should be applied to elements whose elevation values will change depending on their * context (e.g. when active or disabled). */ /** Applies a property to an md-button element for each of the supported palettes. */ /** Applies a focus style to an md-button element for each of the supported palettes. */ [md-raised-button], [md-fab], [md-mini-fab], [md-button], [md-icon-button] { box-sizing: border-box; position: relative; background: transparent; text-align: center; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; outline: none; border: none; display: inline-block; white-space: nowrap; text-decoration: none; vertical-align: baseline; font-size: 14px; font-family: Roboto, "Helvetica Neue", sans-serif; font-weight: 500; color: currentColor; margin: 0; min-width: 88px; line-height: 36px; padding: 0 16px; border-radius: 3px; } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab], .md-primary[md-button], .md-primary[md-icon-button] { color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab], .md-accent[md-button], .md-accent[md-icon-button] { color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab], .md-warn[md-button], .md-warn[md-icon-button] { color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-primary[disabled][md-button], .md-primary[disabled][md-icon-button], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-accent[disabled][md-button], .md-accent[disabled][md-icon-button], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], .md-warn[disabled][md-button], .md-warn[disabled][md-icon-button], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab], [disabled][disabled][md-button], [disabled][disabled][md-icon-button] { color: rgba(0, 0, 0, 0.38); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab], [disabled][md-button], [disabled][md-icon-button] { cursor: default; } .md-button-focus[md-raised-button]::after, .md-button-focus[md-fab]::after, .md-button-focus[md-mini-fab]::after, .md-button-focus[md-button]::after, .md-button-focus[md-icon-button]::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } .md-button-focus.md-primary[md-raised-button]::after, .md-button-focus.md-primary[md-fab]::after, .md-button-focus.md-primary[md-mini-fab]::after, .md-button-focus.md-primary[md-button]::after, .md-button-focus.md-primary[md-icon-button]::after { background-color: rgba(0, 150, 136, 0.12); } .md-button-focus.md-accent[md-raised-button]::after, .md-button-focus.md-accent[md-fab]::after, .md-button-focus.md-accent[md-mini-fab]::after, .md-button-focus.md-accent[md-button]::after, .md-button-focus.md-accent[md-icon-button]::after { background-color: rgba(156, 39, 176, 0.12); } .md-button-focus.md-warn[md-raised-button]::after, .md-button-focus.md-warn[md-fab]::after, .md-button-focus.md-warn[md-mini-fab]::after, .md-button-focus.md-warn[md-button]::after, .md-button-focus.md-warn[md-icon-button]::after { background-color: rgba(244, 67, 54, 0.12); } [md-raised-button], [md-fab], [md-mini-fab] { box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); background-color: #fafafa; -webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0); -webkit-transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { color: white; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { color: rgba(255, 255, 255, 0.870588); } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { color: white; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { color: rgba(0, 0, 0, 0.38); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { background-color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { background-color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { background-color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { background-color: rgba(0, 0, 0, 0.12); } [md-raised-button]:active, [md-fab]:active, [md-mini-fab]:active { box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab] { box-shadow: none; } [md-button][disabled]:hover.md-primary, [md-button][disabled]:hover.md-accent, [md-button][disabled]:hover.md-warn, [md-button][disabled]:hover:hover { background-color: transparent; } [md-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 56px; height: 56px; padding: 0; } [md-fab] i, [md-fab] md-icon { padding: 16px 0; } [md-mini-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 40px; height: 40px; padding: 0; } [md-mini-fab] i, [md-mini-fab] md-icon { padding: 8px 0; } [md-icon-button] { min-width: 0; padding: 0; width: 40px; height: 40px; line-height: 24px; border-radius: 50%; } [md-icon-button] .md-button-wrapper > * { vertical-align: middle; } [md-button]:hover::after, [md-icon-button]:hover::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } [md-button]:hover.md-primary::after, [md-icon-button]:hover.md-primary::after { background-color: rgba(0, 150, 136, 0.12); } [md-button]:hover.md-accent::after, [md-icon-button]:hover.md-accent::after { background-color: rgba(156, 39, 176, 0.12); } [md-button]:hover.md-warn::after, [md-icon-button]:hover.md-warn::after { background-color: rgba(244, 67, 54, 0.12); } @media screen and (-ms-high-contrast: active) { .md-raised-button, .md-fab, .md-mini-fab { border: 1px solid #fff; } } </style><style>.side-nav[_ngcontent-kfp-5] {
  background: #ECEFF1;
  width: 232px;
  bottom: 0;
  overflow: auto;
  z-index: 100;
  border-right: 1px solid rgba(0, 0, 0, 0.3); }
  .side-nav[_ngcontent-kfp-5] ul[_ngcontent-kfp-5] {
    margin-top: 8px; }

.right-buttons[_ngcontent-kfp-5] {
  float: right;
  margin-right: 250px;
  margin-top: 10px; }

.tutorial-title[_ngcontent-kfp-5] {
  margin: 15px;
  float: left;
  font-size: larger;
  font-weight: bold; }

.top-navigation[_ngcontent-kfp-5] {
  position: fixed;
  margin-top: -60px;
  width: 100%;
  background-color: #ECEFF1;
  height: 60px;
  z-index: 50; }

.tutorial-content[_ngcontent-kfp-5] {
  margin-top: 60px;
  padding: 20px; }

.tutorials-container[_ngcontent-kfp-5] {
  padding-left: 230px; }

.l-pinned-top[_ngcontent-kfp-5] {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px; }

.l-pinned-left[_ngcontent-kfp-5] {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px; }

.l-left[_ngcontent-kfp-5] {
  float: left; }

.l-right[_ngcontent-kfp-5] {
  float: right; }

.l-relative[_ngcontent-kfp-5], .docs-content[_ngcontent-kfp-5] {
  position: relative; }

.l-absolute[_ngcontent-kfp-5] {
  position: absolute; }

.l-fixed[_ngcontent-kfp-5] {
  position: fixed; }

.l-offset-side-nav[_ngcontent-kfp-5] {
  padding-left: 232px; }

.l-offset-nav[_ngcontent-kfp-5] {
  padding-top: 64px; }</style><style>.diffbox[_ngcontent-kfp-11] {
  border: 1px solid #eee;
  -webkit-text-size-adjust: 100%;
  margin: 1.5em 0; }
  .diffbox[_ngcontent-kfp-11] .title-panel[_ngcontent-kfp-11] {
    padding: 5px 12px;
    background: #eee;
    border-bottom: solid 1px #eee;
    color: #333;
    overflow: auto; }
    .diffbox[_ngcontent-kfp-11] .title-panel[_ngcontent-kfp-11] .github-commit-link[_ngcontent-kfp-11] {
      float: right;
      color: black;
      text-decoration: none;
      border-bottom: none !important; }
  .diffbox[_ngcontent-kfp-11] .code-container[_ngcontent-kfp-11] {
    overflow-x: auto;
    position: relative;
    padding: 9px 3px 3px 0;
    background: #f8f8f8; }
    .diffbox[_ngcontent-kfp-11] .code-container[_ngcontent-kfp-11] .scroll-container[_ngcontent-kfp-11] {
      display: inline-block;
      min-width: 100%;
      overflow: hidden; }
    .diffbox[_ngcontent-kfp-11] .code-container[_ngcontent-kfp-11] pre[_ngcontent-kfp-11] {
      margin: 0;
      padding: 0;
      background-color: transparent; }
      .diffbox[_ngcontent-kfp-11] .code-container[_ngcontent-kfp-11] pre.line-added[_ngcontent-kfp-11] {
        background: #eaffea; }
      .diffbox[_ngcontent-kfp-11] .code-container[_ngcontent-kfp-11] pre.line-removed[_ngcontent-kfp-11] {
        background: #ff9ea2; }
    .diffbox[_ngcontent-kfp-11] .code-container[_ngcontent-kfp-11] .line-content[_ngcontent-kfp-11] {
      padding-left: 36px;
      overflow: hidden; }
      .diffbox[_ngcontent-kfp-11] .code-container[_ngcontent-kfp-11] .line-content[_ngcontent-kfp-11] .hljs-comment[_ngcontent-kfp-11] {
        color: #777; }
    .diffbox[_ngcontent-kfp-11] .code-container[_ngcontent-kfp-11] .line-numbers[_ngcontent-kfp-11] {
      text-align: right;
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      -o-user-select: none;
      position: absolute;
      width: 25px; }
      .diffbox[_ngcontent-kfp-11] .code-container[_ngcontent-kfp-11] .line-numbers[_ngcontent-kfp-11] .line-number[_ngcontent-kfp-11] {
        color: #aaa;
        font-style: italic; }</style></head><body><universal-styles></universal-styles>


<app _nghost-kfp-1=""><md-toolbar _ngcontent-kfp-1="" class="main-toolbar md-primary"><div class="md-toolbar-layout"> <md-toolbar-row> 
    <a _ngcontent-kfp-1="" href="/"><img _ngcontent-kfp-1="" class="logo" src="/assets/images/logo.png"></a>
    <button _ngcontent-kfp-1="" md-button=""><span class="md-button-wrapper">Tutorials</span> </button>
    <button _ngcontent-kfp-1="" md-button=""><span class="md-button-wrapper">Angular 2</span> </button>
    <button _ngcontent-kfp-1="" md-button=""><span class="md-button-wrapper">Docs</span> </button>
    <span _ngcontent-kfp-1="" class="fill-remaining-space"></span>
    <button _ngcontent-kfp-1="" md-button=""><span class="md-button-wrapper">Github</span> </button>
    <button _ngcontent-kfp-1="" md-button=""><span class="md-button-wrapper">Blog</span> </button>
    <button _ngcontent-kfp-1="" md-button=""><span class="md-button-wrapper">Contact Us</span> </button>
    <button _ngcontent-kfp-1="" md-button=""><span class="md-button-wrapper">Manifesto</span> </button>
    <button _ngcontent-kfp-1="" md-button=""><span class="md-button-wrapper">About us</span> </button>
 </md-toolbar-row>  </div></md-toolbar>
<router-outlet _ngcontent-kfp-1=""></router-outlet><tutorial _nghost-kfp-5=""><div _ngcontent-kfp-5="" class="tutorials-container">
    <nav _ngcontent-kfp-5="" class="side-nav l-pinned-left l-layer-4 l-offset-nav">
        <steps-list _ngcontent-kfp-5=""><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/folder-structure">8. Folder Structure</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/css-sass-and-bootstrap">18. CSS, SASS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item active-step" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/ionic2">23. Ionic2</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/angular2/socially/next-steps">25. Next Steps</a>
    </li>
</ul>
</steps-list>
    </nav>
    <div _ngcontent-kfp-5="" class="top-navigation">
        <span _ngcontent-kfp-5="" class="tutorial-title" stepName="">Files and UploadFS</span>
        <div _ngcontent-kfp-5="" class="right-buttons">
            <a _ngcontent-kfp-5="" class="md-primary" md-raised-button="" tutorialNavigation="previous" href="/tutorials/angular2/socially/3rd-party-libraries">Previous</a>
            <a _ngcontent-kfp-5="" class="md-primary" codeDiffButton="" md-raised-button="">Code Diff</a>
            <a _ngcontent-kfp-5="" class="md-primary" md-raised-button="" tutorialNavigation="next" href="/tutorials/angular2/socially/packages-isolation">Next</a>
        </div>
    </div>
    <div _ngcontent-kfp-5="" class="tutorial-content">
        <router-outlet _ngcontent-kfp-5=""></router-outlet><tutorial-page><div class="tutorial-container"></div></tutorial-page><tutorial-page-content><p>In this step we are going to add the ability to upload images into our app, and also sorting and naming them.</p>

<p>Angular-Meteor can use Meteor <a href="https://github.com/jalik/jalik-ufs">UploadFS</a> which is a suite of Meteor packages that together provide a complete file management solution including uploading, downloading, storage, synchronization, manipulation, and copying.</p>

<p>It supports several storage adapters for saving files to the local filesystem, GridFS and additional storage adapters can be created.</p>

<p>The process is very similar for handling any other MongoDB Collection!</p>

<p>So let's add image upload to our app!</p>

<p>We will start by adding UploadFS to our project, by running the following command:</p>

<pre><code ngNonBindable="">$ meteor add jalik:ufs</code></pre>

<p>Now, we will decide the storage adapter we want to use.
In this example, we will use the GridFS as storage adapters, so we will add the adapter by running this command:</p>

<pre><code ngNonBindable="">$ meteor add jalik:ufs-gridfs</code></pre>

<p>Note: you can find more information about Stores and Storage Adapters on the <a href="https://github.com/jalik/jalik-ufs">UploadFS</a>'s GitHub repository.</p>

<p>So now we have the UploadFS support and the storage adapter installed - we still need to create a UploadFS object to handle our files.
Note that you will need to define the collection as shared resource because you will need to use the collection in both client and server side.</p>

<h3>Creating the Mongo Collection and UploadFS Store</h3>

<p>Let's start by creating <code ngNonBindable="">collections/images.ts</code> file, and define a Mongo Collection object called "Images". Since we want to be able to make thumbnails we have to create another Collection called "Thumbs".</p>

<p>Also we will use the stadard Mongo Collection API that allows us to defined auth-rules.</p>

<p><diffbox step="20.3" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.3</span> <span _ngcontent-kfp-11="" class="commit-summary">Create Images and Thumbs collections</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/50077af2e181f97f422757d1b48ee3d6e752b016">collections/images.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre><pre _ngcontent-kfp-11="" class="line-number">16</pre><pre _ngcontent-kfp-11="" class="line-number">17</pre><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre><pre _ngcontent-kfp-11="" class="line-number">20</pre><pre _ngcontent-kfp-11="" class="line-number">21</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Mongo } from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Images = <span class="hljs-keyword">new</span> Mongo.Collection(<span class="hljs-string">'images'</span>);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Thumbs = <span class="hljs-keyword">new</span> Mongo.Collection(<span class="hljs-string">'thumbs'</span>);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loggedIn</span>(<span class="hljs-params">userId</span>) </span>{</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> !!userId;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">Thumbs.allow({</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  insert: loggedIn,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  update: loggedIn,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  remove: loggedIn</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">});</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">Images.allow({</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  insert: loggedIn,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  update: loggedIn,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  remove: loggedIn</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Let's now create interfaces for both collections:</p>

<p><diffbox step="20.4" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.4</span> <span _ngcontent-kfp-11="" class="commit-summary">Add Image interface</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/c5331d19691cb8bc4c425e3ffc49c5a937ae5b0a">typings/image.d.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">interface</span> Image {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  _id?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  complete: <span class="hljs-built_in">boolean</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  extension: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  name: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  progress: <span class="hljs-built_in">number</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  size: <span class="hljs-built_in">number</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  store: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  token: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  uploadedAt: <span class="hljs-built_in">Date</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  uploading: <span class="hljs-built_in">boolean</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  url: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  userId?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="20.5" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.5</span> <span _ngcontent-kfp-11="" class="commit-summary">Add Thumb interface</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/f8b82724f3c15c07b7cd3b339d3a8b123b31cebf">typings/thumb.d.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">interface</span> Thumb <span class="hljs-keyword">extends</span> Image  {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  originalStore?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  originalId?: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And use them on Images and Thumbs collections:</p>

<p><diffbox step="20.6" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.6</span> <span _ngcontent-kfp-11="" class="commit-summary">Add Image interface to Images Collection</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/03c1805d44bb445c9e0d0bcc5707d253b35f6f49">collections/images.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Mongo } from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Images = <span class="hljs-keyword">new</span> Mongo.Collection&lt;Image&gt;(<span class="hljs-string">'images'</span>);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Thumbs = <span class="hljs-keyword">new</span> Mongo.Collection&lt;Thumb&gt;(<span class="hljs-string">'thumbs'</span>);</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loggedIn</span>(<span class="hljs-params">userId</span>) </span>{</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">return</span> !!userId;</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>We have to create Stores for Images and Thumbs.</p>

<p><diffbox step="20.7" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.7</span> <span _ngcontent-kfp-11="" class="commit-summary">Create ThumbsStore and ImagesStore</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/cc8b065bbd1bb971972ea72b4758fc9d1ffb5b39">collections/images.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">20</pre><pre _ngcontent-kfp-11="" class="line-number">21</pre><pre _ngcontent-kfp-11="" class="line-number">22</pre><pre _ngcontent-kfp-11="" class="line-number">23</pre><pre _ngcontent-kfp-11="" class="line-number">24</pre><pre _ngcontent-kfp-11="" class="line-number">25</pre><pre _ngcontent-kfp-11="" class="line-number">26</pre><pre _ngcontent-kfp-11="" class="line-number">27</pre><pre _ngcontent-kfp-11="" class="line-number">28</pre><pre _ngcontent-kfp-11="" class="line-number">29</pre><pre _ngcontent-kfp-11="" class="line-number">30</pre><pre _ngcontent-kfp-11="" class="line-number">31</pre><pre _ngcontent-kfp-11="" class="line-number">32</pre><pre _ngcontent-kfp-11="" class="line-number">33</pre><pre _ngcontent-kfp-11="" class="line-number">34</pre><pre _ngcontent-kfp-11="" class="line-number">35</pre><pre _ngcontent-kfp-11="" class="line-number">36</pre><pre _ngcontent-kfp-11="" class="line-number">37</pre><pre _ngcontent-kfp-11="" class="line-number">38</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Mongo } from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { UploadFS } from <span class="hljs-string">'meteor/jalik:ufs'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Images = <span class="hljs-keyword">new</span> Mongo.Collection&lt;Image&gt;(<span class="hljs-string">'images'</span>);</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Thumbs = <span class="hljs-keyword">new</span> Mongo.Collection&lt;Thumb&gt;(<span class="hljs-string">'thumbs'</span>);</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  update: loggedIn,</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  remove: loggedIn</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">});</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ThumbsStore = <span class="hljs-keyword">new</span> UploadFS.store.GridFS({</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  collection: Thumbs,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  name: <span class="hljs-string">'thumbs'</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">});</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ImagesStore = <span class="hljs-keyword">new</span> UploadFS.store.GridFS({</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  collection: Images,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  name: <span class="hljs-string">'images'</span>,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  filter: <span class="hljs-keyword">new</span> UploadFS.Filter({</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    contentTypes: [<span class="hljs-string">'image/*'</span>]</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  }),</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  copyTo: [</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    ThumbsStore</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  ]</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Let's explain a bit what happened.</p>

<ul><li>We assigned Stores to their Collections, which is required.</li><li>We defined names of these Stores.</li><li>We added filter to ImagesStore so it can receive only images.</li><li>Every file will be copied to ThumbsStore.</li></ul>

<p>There is a reason why we called one of the Collections the <code ngNonBindable="">Thumbs</code>!</p>

<p>Since we transfer every uploaded file to ThumbsStore, we can now easily add file manipulations.</p>

<p>Let's resize every file to 32x32:</p>

<p><diffbox step="20.8" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.8</span> <span _ngcontent-kfp-11="" class="commit-summary">Resize images</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/e3e12e1d6141ab6867c9de8dd2bedd0add5de3a5">collections/images.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">23</pre><pre _ngcontent-kfp-11="" class="line-number">24</pre><pre _ngcontent-kfp-11="" class="line-number">25</pre><pre _ngcontent-kfp-11="" class="line-number">26</pre><pre _ngcontent-kfp-11="" class="line-number">27</pre><pre _ngcontent-kfp-11="" class="line-number">28</pre><pre _ngcontent-kfp-11="" class="line-number">29</pre><pre _ngcontent-kfp-11="" class="line-number">30</pre><pre _ngcontent-kfp-11="" class="line-number">31</pre><pre _ngcontent-kfp-11="" class="line-number">32</pre><pre _ngcontent-kfp-11="" class="line-number">33</pre><pre _ngcontent-kfp-11="" class="line-number">34</pre><pre _ngcontent-kfp-11="" class="line-number">35</pre><pre _ngcontent-kfp-11="" class="line-number">36</pre><pre _ngcontent-kfp-11="" class="line-number">37</pre><pre _ngcontent-kfp-11="" class="line-number">38</pre><pre _ngcontent-kfp-11="" class="line-number">39</pre><pre _ngcontent-kfp-11="" class="line-number">40</pre><pre _ngcontent-kfp-11="" class="line-number">41</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ThumbsStore = <span class="hljs-keyword">new</span> UploadFS.store.GridFS({</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  collection: Thumbs,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  name: <span class="hljs-string">'thumbs'</span>,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  transformWrite(from, to, fileId, file) {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-comment">// Resize to 32x32</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> gm = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gm'</span>);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    gm(from, file.name)</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      .resize(<span class="hljs-number">32</span>, <span class="hljs-number">32</span>)</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      .gravity(<span class="hljs-string">'Center'</span>)</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      .extent(<span class="hljs-number">32</span>, <span class="hljs-number">32</span>)</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      .quality(<span class="hljs-number">75</span>)</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      .stream()</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      .pipe(to);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">});</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ImagesStore = <span class="hljs-keyword">new</span> UploadFS.store.GridFS({</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>We used <a href="https://github.com/aheckmann/gm"><code ngNonBindable="">gm</code></a> module, let's install it:</p>

<pre><code ngNonBindable="">$ meteor npm install gm --save</code></pre>

<blockquote><p>Note: To use this module, you need download and install <a href="http://www.graphicsmagick.org/">GraphicsMagick</a> or <a href="http://www.imagemagick.org/">ImageMagick</a>. In Mac OS X, you can use <a href="http://brew.sh/">Homebrew</a> and do: <code ngNonBindable="">brew install graphicsmagick</code> or <code ngNonBindable="">brew install imagemagick</code>.</p></blockquote>

<h3>Image upload</h3>

<p>Note that for file upload you can use basic HTML <code ngNonBindable="">&lt;input type="file"&gt;</code> or any other package - you only need the HTML5 File object to be provided.</p>

<p>For our application, we would like to add ability to drag-and-drop images, so we use Angular2 directive that handles file upload and gives us more abilities such as drag &amp; drop, on the client side. In this example, We used <a href="https://github.com/jellyjs/angular2-file-drop"><code ngNonBindable="">angular2-file-drop</code></a>, which is still in develop. In order to do this, let's add the package to our project:</p>

<pre><code ngNonBindable="">$ meteor npm install angular2-file-drop --save</code></pre>

<p>Now, let's create the <code ngNonBindable="">PartiesUpload</code> component. It will be responsible for uploading photos.</p>

<p><diffbox step="20.10" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.10</span> <span _ngcontent-kfp-11="" class="commit-summary">Create a view for an upload</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/1f6f805c6080513ef495f8c8a03d7152c517c0b9">client/imports/parties-upload/parties-upload.html</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">"column"</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Drop an image to here<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="20.11" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.11</span> <span _ngcontent-kfp-11="" class="commit-summary">Create PartiesUpload component</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/fdd5be8757f05dd98aef69019870eb26a3c8dfac">client/imports/parties-upload/parties-upload.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Component } from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { FileDropDirective } from <span class="hljs-string">'angular2-file-drop'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./parties-upload.html'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">@Component({</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  selector: <span class="hljs-string">'parties-upload'</span>,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  template,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  directives: [ FileDropDirective ]</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">})</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartiesUpload {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">constructor</span>() {}</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>We want to use it in <code ngNonBindable="">PartiesForm</code>:</p>

<p><diffbox step="20.12" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.12</span> <span _ngcontent-kfp-11="" class="commit-summary">Add to PartiesForm</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/7de0abd1b3780ffdf8ee74265fdd1be072891694">client/imports/parties-form/parties-form.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre><pre _ngcontent-kfp-11="" class="line-number">16</pre><pre _ngcontent-kfp-11="" class="line-number">17</pre><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">51</pre><pre _ngcontent-kfp-11="" class="line-number">52</pre><pre _ngcontent-kfp-11="" class="line-number">53</pre><pre _ngcontent-kfp-11="" class="line-number">54</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Component } from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { FormBuilder, ControlGroup, Validators, Control } from <span class="hljs-string">'@angular/common'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Parties } from <span class="hljs-string">'../../../collections/parties.ts'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { PartiesUpload } from <span class="hljs-string">'../parties-upload/parties-upload'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {MATERIAL_DIRECTIVES} from <span class="hljs-string">'ng2-material'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {MdCheckbox} from <span class="hljs-string">'@angular2-material/checkbox'</span>;</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">@Component({</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  selector: <span class="hljs-string">'parties-form'</span>,</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  template,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  directives: [ MATERIAL_DIRECTIVES, MdCheckbox, MD_INPUT_DIRECTIVES, PartiesUpload ]</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">})</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartiesForm {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  partiesForm: ControlGroup;</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">      }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="20.13" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.13</span> <span _ngcontent-kfp-11="" class="commit-summary">Implement to the view</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/15210ae09be454239456520d6bc1d6215b857a84">client/imports/parties-form/parties-form.html</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context">        <span class="hljs-tag">&lt;<span class="hljs-name">md-checkbox</span> [(<span class="hljs-attr">checked</span>)]=<span class="hljs-string">"public"</span>&gt;</span>Public<span class="hljs-tag">&lt;/<span class="hljs-name">md-checkbox</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">parties-upload</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">parties-upload</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">md-raised-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"md-primary"</span>&gt;</span>Add Party!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now, let's implement <code ngNonBindable="">fileDrop</code> directive:</p>

<p><diffbox step="20.15" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.15</span> <span _ngcontent-kfp-11="" class="commit-summary">Use in the view</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/600e64a88ecb984f3a8f195098ab882055c164fe">client/imports/parties-upload/parties-upload.html</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">"column"</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">fileDrop</span></span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    [ngClass]="{'file-is-over': fileIsOver}"</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    (fileOver)="fileOver($event)"</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    (onFileDrop)="onFileDrop($event)"&gt;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Drop an image to here<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>As you can see we used <code ngNonBindable="">fileOver</code> event. It tells the component if file is over the drop zone.</p>

<p>We can now handle it inside the component:</p>

<p><diffbox step="20.16" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.16</span> <span _ngcontent-kfp-11="" class="commit-summary">Handle fileIsOver</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/68ab09dd7ffbbdedcbf056304f13920bfc1d0857">client/imports/parties-upload/parties-upload.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre><pre _ngcontent-kfp-11="" class="line-number">16</pre><pre _ngcontent-kfp-11="" class="line-number">17</pre><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  directives: [ FileDropDirective ]</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">})</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartiesUpload {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">public</span> fileIsOver: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {}</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">public</span> fileOver(fileIsOver: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.fileIsOver = fileIsOver;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Second thing is to handle <code ngNonBindable="">onFileDrop</code> event:</p>

<p><diffbox step="20.17" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.17</span> <span _ngcontent-kfp-11="" class="commit-summary">Implement onFileDrop method</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/e5bcf3d68afb0ffb946bc2f1b9cd9bc18e016e19">client/imports/parties-upload/parties-upload.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">16</pre><pre _ngcontent-kfp-11="" class="line-number">17</pre><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre><pre _ngcontent-kfp-11="" class="line-number">20</pre><pre _ngcontent-kfp-11="" class="line-number">21</pre><pre _ngcontent-kfp-11="" class="line-number">22</pre><pre _ngcontent-kfp-11="" class="line-number">23</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> fileOver(fileIsOver: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.fileIsOver = fileIsOver;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">public</span> onFileDrop(file: File): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Got file'</span>);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now our component is able to catch any dropped file, so let's create a function to upload that file into server.</p>

<p><diffbox step="20.18" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.18</span> <span _ngcontent-kfp-11="" class="commit-summary">Implement upload method</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/f1cbb4b8f3f9714141aa8ae3e87d41e63bc6018e">collections/methods.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">91</pre><pre _ngcontent-kfp-11="" class="line-number">92</pre><pre _ngcontent-kfp-11="" class="line-number">93</pre><pre _ngcontent-kfp-11="" class="line-number">94</pre><pre _ngcontent-kfp-11="" class="line-number">95</pre><pre _ngcontent-kfp-11="" class="line-number">96</pre><pre _ngcontent-kfp-11="" class="line-number">97</pre><pre _ngcontent-kfp-11="" class="line-number">98</pre><pre _ngcontent-kfp-11="" class="line-number">99</pre><pre _ngcontent-kfp-11="" class="line-number">100</pre><pre _ngcontent-kfp-11="" class="line-number">101</pre><pre _ngcontent-kfp-11="" class="line-number">102</pre><pre _ngcontent-kfp-11="" class="line-number">103</pre><pre _ngcontent-kfp-11="" class="line-number">104</pre><pre _ngcontent-kfp-11="" class="line-number">105</pre><pre _ngcontent-kfp-11="" class="line-number">106</pre><pre _ngcontent-kfp-11="" class="line-number">107</pre><pre _ngcontent-kfp-11="" class="line-number">108</pre><pre _ngcontent-kfp-11="" class="line-number">109</pre><pre _ngcontent-kfp-11="" class="line-number">110</pre><pre _ngcontent-kfp-11="" class="line-number">111</pre><pre _ngcontent-kfp-11="" class="line-number">112</pre><pre _ngcontent-kfp-11="" class="line-number">113</pre><pre _ngcontent-kfp-11="" class="line-number">114</pre><pre _ngcontent-kfp-11="" class="line-number">115</pre><pre _ngcontent-kfp-11="" class="line-number">116</pre><pre _ngcontent-kfp-11="" class="line-number">117</pre><pre _ngcontent-kfp-11="" class="line-number">118</pre><pre _ngcontent-kfp-11="" class="line-number">119</pre><pre _ngcontent-kfp-11="" class="line-number">120</pre><pre _ngcontent-kfp-11="" class="line-number">121</pre><pre _ngcontent-kfp-11="" class="line-number">122</pre><pre _ngcontent-kfp-11="" class="line-number">123</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Email} from <span class="hljs-string">'meteor/email'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {check} from <span class="hljs-string">'meteor/check'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { UploadFS } from <span class="hljs-string">'meteor/jalik:ufs'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { ImagesStore } from <span class="hljs-string">'./images'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getContactEmail</span>(<span class="hljs-params">user:Meteor.User</span>):<span class="hljs-title">string</span> </span>{</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">if</span> (user.emails &amp;&amp; user.emails.length)</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">        { $push: { rsvps: { userId: <span class="hljs-keyword">this</span>.userId, response: rsvp } } });</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">});</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upload</span>(<span class="hljs-params">sourceFile: File, resolve?: <span class="hljs-built_in">Function</span>, reject?: <span class="hljs-built_in">Function</span></span>) </span>{</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-comment">// pick from an object only: name, type and size</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">const</span> file = {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    name: sourceFile.name,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">type</span>: sourceFile.type,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    size: sourceFile.size,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> FileReader();</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-comment">// handle progress</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  reader.onload = (ev: ProgressEvent) =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (ev.type === <span class="hljs-string">'load'</span>) {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-keyword">const</span> upload = <span class="hljs-keyword">new</span> UploadFS.Uploader({</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">        data: ev.target.result,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">        file,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">        store: ImagesStore,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">        onError: reject,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">        onComplete: resolve</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      });</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      upload.start();</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ev.type === <span class="hljs-string">'error'</span>) {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Couldn't load file`</span>);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  };</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-comment">// as ArrayBuffer</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  reader.readAsArrayBuffer(sourceFile);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Quick explanation. We need to know the name, the type and also the size of file we want to upload. We can get it from <code ngNonBindable="">sourceFile</code> object.</p>

<p>Since <code ngNonBindable="">sourceFile</code> is a <code ngNonBindable="">File</code> type object and <code ngNonBindable="">UploadFS.Uploader()</code> requires an <code ngNonBindable="">ArrayBuffer</code>, we need to transform it somehow. This is why we use <code ngNonBindable="">FileReader</code>.</p>

<blockquote><p>You can read more about <a href="https://developer.mozilla.org/en-US/docs/Web/API/FileReader">FileReader on Mozilla Developer Network</a></p></blockquote>

<p>Now we can move on to implement that function in PartiesUpload component:</p>

<p><diffbox step="20.19" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.19</span> <span _ngcontent-kfp-11="" class="commit-summary">Use upload function</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/00d2f768cc58b1755ac0acb291ff699eaf316ec2">client/imports/parties-upload/parties-upload.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre><pre _ngcontent-kfp-11="" class="line-number">16</pre><pre _ngcontent-kfp-11="" class="line-number">17</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">20</pre><pre _ngcontent-kfp-11="" class="line-number">21</pre><pre _ngcontent-kfp-11="" class="line-number">22</pre><pre _ngcontent-kfp-11="" class="line-number">23</pre><pre _ngcontent-kfp-11="" class="line-number">24</pre><pre _ngcontent-kfp-11="" class="line-number">25</pre><pre _ngcontent-kfp-11="" class="line-number">26</pre><pre _ngcontent-kfp-11="" class="line-number">27</pre><pre _ngcontent-kfp-11="" class="line-number">28</pre><pre _ngcontent-kfp-11="" class="line-number">29</pre><pre _ngcontent-kfp-11="" class="line-number">30</pre><pre _ngcontent-kfp-11="" class="line-number">31</pre><pre _ngcontent-kfp-11="" class="line-number">32</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Component } from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { FileDropDirective } from <span class="hljs-string">'angular2-file-drop'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { upload } from <span class="hljs-string">'../../../collections/methods'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./parties-upload.html'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">})</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartiesUpload {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> fileIsOver: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">public</span> uploading: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {}</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> onFileDrop(file: File): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.uploading = <span class="hljs-literal">true</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    upload(file, (result) =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.uploading = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    }, (error) =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.uploading = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Something went wrong!`</span>, error);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    });</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Let's also add <code ngNonBindable="">file-uploading</code> class to our drop zone:</p>

<p><diffbox step="20.20" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.20</span> <span _ngcontent-kfp-11="" class="commit-summary">Implement classes</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/2c361c244981baa716f3e0765ea06c651c8ed588">client/imports/parties-upload/parties-upload.html</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">"column"</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">fileDrop</span></span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    [ngClass]="{'file-is-over': fileIsOver, 'file-uploading': uploading}"</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    (fileOver)="fileOver($event)"</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    (onFileDrop)="onFileDrop($event)"&gt;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Drop an image to here<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<h3>Display Uploaded Images</h3>

<p>Let's create a simple gallery to list the images in the new party form.</p>

<p>First thing to do is to create a Publication for thumbnails:</p>

<p><diffbox step="20.21" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.21</span> <span _ngcontent-kfp-11="" class="commit-summary">Implement publications of Images and Thumbs</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/cceb5cc83cb2db638d645139787aad97d5c126a7">server/images.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Thumbs, Images } from <span class="hljs-string">'../collections/images'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">Meteor.publish(<span class="hljs-string">'thumbs'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ids: <span class="hljs-built_in">string</span>[]</span>) </span>{</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> Thumbs.find({</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    originalStore: <span class="hljs-string">'images'</span>,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    originalId: {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      $<span class="hljs-keyword">in</span>: ids</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  });</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">});</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">Meteor.publish(<span class="hljs-string">'images'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">return</span> Images.find({});</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>As you can see we also created a Publication for images. We will use it later.</p>

<p>We still need to add it on the server-side:</p>

<p><diffbox step="20.22" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.22</span> <span _ngcontent-kfp-11="" class="commit-summary">Import those publications in the main server entry point</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/8e4149eb8c2aabb2ed311b749fc9bdec19ec389e">server/main.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {Meteor} from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'./parties.ts'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'./users.ts'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> <span class="hljs-string">'./images'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'../collections/methods.ts'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">Meteor.startup(loadParties);</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now let's take care of UI. This will need to be reactive, so we have to extend our component by <code ngNonBindable="">MeteorComponent</code> class, in order to use subscriptions.</p>

<p><diffbox step="20.23" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.23</span> <span _ngcontent-kfp-11="" class="commit-summary">Extend by MeteorComponent</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/943cb6268cd15d347edb743530dd76daeaafe9a2">client/imports/parties-upload/parties-upload.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre><pre _ngcontent-kfp-11="" class="line-number">16</pre><pre _ngcontent-kfp-11="" class="line-number">17</pre><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre><pre _ngcontent-kfp-11="" class="line-number">20</pre><pre _ngcontent-kfp-11="" class="line-number">21</pre><pre _ngcontent-kfp-11="" class="line-number">22</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Component } from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { FileDropDirective } from <span class="hljs-string">'angular2-file-drop'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { MeteorComponent } from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { upload } from <span class="hljs-string">'../../../collections/methods'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./parties-upload.html'</span>;</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  template,</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  directives: [ FileDropDirective ]</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">})</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartiesUpload extends MeteorComponent {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> fileIsOver: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> uploading: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">super</span>();</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> fileOver(fileIsOver: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span> {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.fileIsOver = fileIsOver;</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>We will keep the ids of the uploaded files in an instance of <code ngNonBindable="">ReactiveVar</code>:</p>

<p><diffbox step="20.24" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.24</span> <span _ngcontent-kfp-11="" class="commit-summary">Use ReactiveVar to keep track of files</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/010cf92bdf19859ba530f99900e7187a5b8d4801">client/imports/parties-upload/parties-upload.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre><pre _ngcontent-kfp-11="" class="line-number">16</pre><pre _ngcontent-kfp-11="" class="line-number">17</pre><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre><pre _ngcontent-kfp-11="" class="line-number">20</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Component } from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { FileDropDirective } from <span class="hljs-string">'angular2-file-drop'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { MeteorComponent } from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { ReactiveVar } from <span class="hljs-string">'meteor/reactive-var'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { upload } from <span class="hljs-string">'../../../collections/methods'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./parties-upload.html'</span>;</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartiesUpload extends MeteorComponent {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> fileIsOver: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> uploading: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">public</span> files: ReactiveVar&lt;<span class="hljs-built_in">string</span>[]&gt; = <span class="hljs-keyword">new</span> ReactiveVar&lt;<span class="hljs-built_in">string</span>[]&gt;([]);</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">super</span>();</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Let's now subscribe to <code ngNonBindable="">thumbs</code> publication with an array of those ids we created in the previous step:</p>

<p><diffbox step="20.25" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.25</span> <span _ngcontent-kfp-11="" class="commit-summary">Subscribe to Thumbs</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/04c326fd7f057d7c7124d9c9aebd5677b31486e2">client/imports/parties-upload/parties-upload.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre><pre _ngcontent-kfp-11="" class="line-number">20</pre><pre _ngcontent-kfp-11="" class="line-number">21</pre><pre _ngcontent-kfp-11="" class="line-number">22</pre><pre _ngcontent-kfp-11="" class="line-number">23</pre><pre _ngcontent-kfp-11="" class="line-number">24</pre><pre _ngcontent-kfp-11="" class="line-number">25</pre><pre _ngcontent-kfp-11="" class="line-number">26</pre><pre _ngcontent-kfp-11="" class="line-number">27</pre><pre _ngcontent-kfp-11="" class="line-number">28</pre><pre _ngcontent-kfp-11="" class="line-number">29</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">super</span>();</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.subscribe(<span class="hljs-string">'thumbs'</span>, <span class="hljs-keyword">this</span>.files.get(), () =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">        <span class="hljs-comment">// subscription ready</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      }, <span class="hljs-literal">true</span>);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    });</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> fileOver(fileIsOver: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span> {</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now we can look for thumbnails that come from ImagesStore:</p>

<p><diffbox step="20.26" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.26</span> <span _ngcontent-kfp-11="" class="commit-summary">Look for thumbnails</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/b5f69e9a29bf6ecb5e68009cd74451a25e613006">client/imports/parties-upload/parties-upload.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">17</pre><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre><pre _ngcontent-kfp-11="" class="line-number">20</pre><pre _ngcontent-kfp-11="" class="line-number">21</pre><pre _ngcontent-kfp-11="" class="line-number">22</pre><pre _ngcontent-kfp-11="" class="line-number">23</pre><pre _ngcontent-kfp-11="" class="line-number">24</pre><pre _ngcontent-kfp-11="" class="line-number">25</pre><pre _ngcontent-kfp-11="" class="line-number">26</pre><pre _ngcontent-kfp-11="" class="line-number">27</pre><pre _ngcontent-kfp-11="" class="line-number">28</pre><pre _ngcontent-kfp-11="" class="line-number">29</pre><pre _ngcontent-kfp-11="" class="line-number">30</pre><pre _ngcontent-kfp-11="" class="line-number">31</pre><pre _ngcontent-kfp-11="" class="line-number">32</pre><pre _ngcontent-kfp-11="" class="line-number">33</pre><pre _ngcontent-kfp-11="" class="line-number">34</pre><pre _ngcontent-kfp-11="" class="line-number">35</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { FileDropDirective } from <span class="hljs-string">'angular2-file-drop'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { MeteorComponent } from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { ReactiveVar } from <span class="hljs-string">'meteor/reactive-var'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Mongo } from <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { upload } from <span class="hljs-string">'../../../collections/methods'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Thumbs } from <span class="hljs-string">'../../../collections/images'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template from <span class="hljs-string">'./parties-upload.html'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> fileIsOver: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> uploading: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> files: ReactiveVar&lt;<span class="hljs-built_in">string</span>[]&gt; = <span class="hljs-keyword">new</span> ReactiveVar&lt;<span class="hljs-built_in">string</span>[]&gt;([]);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">public</span> thumbs: Mongo.Cursor&lt;Thumb&gt;;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">super</span>();</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">      <span class="hljs-keyword">this</span>.subscribe(<span class="hljs-string">'thumbs'</span>, <span class="hljs-keyword">this</span>.files.get(), () =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">        <span class="hljs-keyword">this</span>.thumbs = Thumbs.find({</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">          originalStore: <span class="hljs-string">'images'</span>,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">          originalId: {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">            $<span class="hljs-keyword">in</span>: <span class="hljs-keyword">this</span>.files.get()</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">          }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">        });</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">      }, <span class="hljs-literal">true</span>);</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    });</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>We still don't see any thumbnails:</p>

<p><diffbox step="20.27" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.27</span> <span _ngcontent-kfp-11="" class="commit-summary">Implement thumbnails in the view</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/6008aa0466fd249b25b539486839e0f376c96c40">client/imports/parties-upload/parties-upload.html</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    (onFileDrop)="onFileDrop($event)"&gt;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Drop an image to here<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">"row"</span> *<span class="hljs-attr">ngIf</span>=<span class="hljs-string">"thumbs"</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> *<span class="hljs-attr">ngFor</span>=<span class="hljs-string">"let thumb of thumbs"</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> [<span class="hljs-attr">src</span>]=<span class="hljs-string">"thumb.url"</span>/&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Since we are working on a view right now, let's add some style.</p>

<p>We need to create <code ngNonBindable="">_parties-upload.scss</code> file:</p>

<p><diffbox step="20.28" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.28</span> <span _ngcontent-kfp-11="" class="commit-summary">Basic styles</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/96d7a98c033ac9e600d5463e54a2858579384915">client/imports/parties-upload/_parties-upload.scss</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre><pre _ngcontent-kfp-11="" class="line-number">16</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-selector-class">.file-uploading</span> {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.3</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-selector-class">.file-is-over</span> {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.7</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-selector-attr">[filedrop]</span> {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">100px</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-attribute">text-align</span>: center;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f1f1f1</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>and to import that file in <code ngNonBindable="">client/css/main.scss</code>:</p>

<p><diffbox step="20.29" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.29</span> <span _ngcontent-kfp-11="" class="commit-summary">Import styles inside main.scss</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/06cdf9120d19843500433e8ac159e50abb4a11a4">client/css/main.scss</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">44</pre><pre _ngcontent-kfp-11="" class="line-number">45</pre><pre _ngcontent-kfp-11="" class="line-number">46</pre><pre _ngcontent-kfp-11="" class="line-number">47</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">@<span class="hljs-keyword">import</span> <span class="hljs-string">"../imports/parties-list/parties-list"</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">@<span class="hljs-keyword">import</span> <span class="hljs-string">"../imports/party-details/party-details"</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">@<span class="hljs-keyword">import</span> <span class="hljs-string">"../imports/parties-upload/parties-upload"</span>;</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Great! We can move on to the next step. Let's do something with the result of the <code ngNonBindable="">upload</code> function.</p>

<p>We will create the <code ngNonBindable="">addFile</code> method that updates the <code ngNonBindable="">files</code> property:</p>

<p><diffbox step="20.30" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.30</span> <span _ngcontent-kfp-11="" class="commit-summary">Handle file upload</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/4bda551dd26a36fcb6dcbce457c908a8c718025b">client/imports/parties-upload/parties-upload.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">43</pre><pre _ngcontent-kfp-11="" class="line-number">44</pre><pre _ngcontent-kfp-11="" class="line-number">45</pre><pre _ngcontent-kfp-11="" class="line-number">46</pre><pre _ngcontent-kfp-11="" class="line-number">47</pre><pre _ngcontent-kfp-11="" class="line-number">48</pre><pre _ngcontent-kfp-11="" class="line-number">49</pre><pre _ngcontent-kfp-11="" class="line-number">50</pre><pre _ngcontent-kfp-11="" class="line-number">51</pre><pre _ngcontent-kfp-11="" class="line-number">52</pre><pre _ngcontent-kfp-11="" class="line-number">53</pre><pre _ngcontent-kfp-11="" class="line-number">54</pre><pre _ngcontent-kfp-11="" class="line-number">55</pre><pre _ngcontent-kfp-11="" class="line-number">56</pre><pre _ngcontent-kfp-11="" class="line-number">57</pre><pre _ngcontent-kfp-11="" class="line-number">58</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    upload(file, (result) =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">      <span class="hljs-keyword">this</span>.uploading = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.addFile(result);</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    }, (error) =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">      <span class="hljs-keyword">this</span>.uploading = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Something went wrong!`</span>, error);</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    });</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">public</span> addFile(file) {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-comment">// update array with files</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.files.get().push(file._id);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.files.set(<span class="hljs-keyword">this</span>.files.get());</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>We want a communication between PartiesUpload and PartiesForm. Let's use <code ngNonBindable="">Output</code> decorator and the <code ngNonBindable="">EventEmitter</code> to notify PartiesForm component about every new file.</p>

<p><diffbox step="20.31" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.31</span> <span _ngcontent-kfp-11="" class="commit-summary">Emit event on new file</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/b0a60372a856f9a0da349167fad8c367d20eb2c5">client/imports/parties-upload/parties-upload.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">1</pre><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre><pre _ngcontent-kfp-11="" class="line-number">20</pre><pre _ngcontent-kfp-11="" class="line-number">21</pre><pre _ngcontent-kfp-11="" class="line-number">22</pre><pre _ngcontent-kfp-11="" class="line-number">23</pre><pre _ngcontent-kfp-11="" class="line-number">24</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">55</pre><pre _ngcontent-kfp-11="" class="line-number">56</pre><pre _ngcontent-kfp-11="" class="line-number">57</pre><pre _ngcontent-kfp-11="" class="line-number">58</pre><pre _ngcontent-kfp-11="" class="line-number">59</pre><pre _ngcontent-kfp-11="" class="line-number">60</pre><pre _ngcontent-kfp-11="" class="line-number">61</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Component, Output, EventEmitter } from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { FileDropDirective } from <span class="hljs-string">'angular2-file-drop'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { MeteorComponent } from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { ReactiveVar } from <span class="hljs-string">'meteor/reactive-var'</span>;</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> uploading: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> files: ReactiveVar&lt;<span class="hljs-built_in">string</span>[]&gt; = <span class="hljs-keyword">new</span> ReactiveVar&lt;<span class="hljs-built_in">string</span>[]&gt;([]);</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">public</span> thumbs: Mongo.Cursor&lt;Thumb&gt;;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  @Output() <span class="hljs-keyword">public</span> onFile: EventEmitter&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> EventEmitter&lt;<span class="hljs-built_in">string</span>&gt;();</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">super</span>();</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-comment">// update array with files</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.files.get().push(file._id);</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.files.set(<span class="hljs-keyword">this</span>.files.get());</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-comment">// emit new file</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.onFile.emit(file._id);</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>On the receiving side of this connection we have the PartiesForm component.</p>

<p>Create a method that handles an event with the new file and put images inside the FormBuilder.</p>

<p><diffbox step="20.32" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.32</span> <span _ngcontent-kfp-11="" class="commit-summary">Add images to PartiesForm</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/121402435b0212f9c44fccb959d248e70976270d">client/imports/parties-form/parties-form.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">17</pre><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre><pre _ngcontent-kfp-11="" class="line-number">20</pre><pre _ngcontent-kfp-11="" class="line-number">21</pre><pre _ngcontent-kfp-11="" class="line-number">22</pre><pre _ngcontent-kfp-11="" class="line-number">23</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">39</pre><pre _ngcontent-kfp-11="" class="line-number">40</pre><pre _ngcontent-kfp-11="" class="line-number">41</pre><pre _ngcontent-kfp-11="" class="line-number">42</pre><pre _ngcontent-kfp-11="" class="line-number">43</pre><pre _ngcontent-kfp-11="" class="line-number">44</pre><pre _ngcontent-kfp-11="" class="line-number">45</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">53</pre><pre _ngcontent-kfp-11="" class="line-number">54</pre><pre _ngcontent-kfp-11="" class="line-number">55</pre><pre _ngcontent-kfp-11="" class="line-number">56</pre><pre _ngcontent-kfp-11="" class="line-number">57</pre><pre _ngcontent-kfp-11="" class="line-number">58</pre><pre _ngcontent-kfp-11="" class="line-number">59</pre><pre _ngcontent-kfp-11="" class="line-number">60</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context">})</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartiesForm {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  partiesForm: ControlGroup;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  images: <span class="hljs-built_in">string</span>[] = [];</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">let</span> fb = <span class="hljs-keyword">new</span> FormBuilder();</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">          location: {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">            name: party.location</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">          },</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">          images: <span class="hljs-keyword">this</span>.images,</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">          <span class="hljs-string">'public'</span>: party.public,</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">          owner: Meteor.userId()</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">        });</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">      }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  onImage(imageId: <span class="hljs-built_in">string</span>) {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.images.push(imageId);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>To keep Party interface up to date, we need to add <code ngNonBindable="">images</code> to it:</p>

<p><diffbox step="20.33" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.33</span> <span _ngcontent-kfp-11="" class="commit-summary">Add images property to Party interface</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/3799796bc286fda08cef120ae98afd526f30c7b1">typings/party.d.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number">15</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">17</pre><pre _ngcontent-kfp-11="" class="line-number">18</pre><pre _ngcontent-kfp-11="" class="line-number">19</pre><pre _ngcontent-kfp-11="" class="line-number">20</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    lat?: <span class="hljs-built_in">number</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    lng?: <span class="hljs-built_in">number</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  };</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  images?: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;,</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  invited?: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  rsvps?: <span class="hljs-built_in">Array</span>&lt;RSVP&gt;;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">}</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">interface</span> RSVP {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  userId: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  response: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>The last step will be to create an event binding for <code ngNonBindable="">onFile</code>.</p>

<p><diffbox step="20.34" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.34</span> <span _ngcontent-kfp-11="" class="commit-summary">Add event binding</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/bf98ac8be3e6a9d70b95e54b1116e3dd13ec322b">client/imports/parties-form/parties-form.html</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context">        <span class="hljs-tag">&lt;<span class="hljs-name">md-checkbox</span> [(<span class="hljs-attr">checked</span>)]=<span class="hljs-string">"public"</span>&gt;</span>Public<span class="hljs-tag">&lt;/<span class="hljs-name">md-checkbox</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">parties-upload</span> (<span class="hljs-attr">onFile</span>)=<span class="hljs-string">"onImage($event)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">parties-upload</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">md-raised-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"md-primary"</span>&gt;</span>Add Party!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<h3>Display the main image of each party on the list</h3>

<p>We will use Pipes to achieve this.</p>

<p>Let's create the <code ngNonBindable="">DisplayMainImagePipe</code> inside <code ngNonBindable="">client/imports/pipes/pipes.ts</code>:</p>

<p><diffbox step="20.35" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.35</span> <span _ngcontent-kfp-11="" class="commit-summary">Create DisplayMainImage pipe</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/72f8627a594954aa6adfeef3bf2f1925e5178caf">client/imports/pipes/pipes.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">2</pre><pre _ngcontent-kfp-11="" class="line-number">3</pre><pre _ngcontent-kfp-11="" class="line-number">4</pre><pre _ngcontent-kfp-11="" class="line-number">5</pre><pre _ngcontent-kfp-11="" class="line-number">6</pre><pre _ngcontent-kfp-11="" class="line-number">7</pre><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">26</pre><pre _ngcontent-kfp-11="" class="line-number">27</pre><pre _ngcontent-kfp-11="" class="line-number">28</pre><pre _ngcontent-kfp-11="" class="line-number">29</pre><pre _ngcontent-kfp-11="" class="line-number">30</pre><pre _ngcontent-kfp-11="" class="line-number">31</pre><pre _ngcontent-kfp-11="" class="line-number">32</pre><pre _ngcontent-kfp-11="" class="line-number">33</pre><pre _ngcontent-kfp-11="" class="line-number">34</pre><pre _ngcontent-kfp-11="" class="line-number">35</pre><pre _ngcontent-kfp-11="" class="line-number">36</pre><pre _ngcontent-kfp-11="" class="line-number">37</pre><pre _ngcontent-kfp-11="" class="line-number">38</pre><pre _ngcontent-kfp-11="" class="line-number">39</pre><pre _ngcontent-kfp-11="" class="line-number">40</pre><pre _ngcontent-kfp-11="" class="line-number">41</pre><pre _ngcontent-kfp-11="" class="line-number">42</pre><pre _ngcontent-kfp-11="" class="line-number">43</pre><pre _ngcontent-kfp-11="" class="line-number">44</pre><pre _ngcontent-kfp-11="" class="line-number">45</pre><pre _ngcontent-kfp-11="" class="line-number">46</pre><pre _ngcontent-kfp-11="" class="line-number">47</pre><pre _ngcontent-kfp-11="" class="line-number">48</pre><pre _ngcontent-kfp-11="" class="line-number">49</pre><pre _ngcontent-kfp-11="" class="line-number">50</pre><pre _ngcontent-kfp-11="" class="line-number">51</pre><pre _ngcontent-kfp-11="" class="line-number">52</pre><pre _ngcontent-kfp-11="" class="line-number">53</pre><pre _ngcontent-kfp-11="" class="line-number">54</pre><pre _ngcontent-kfp-11="" class="line-number">55</pre><pre _ngcontent-kfp-11="" class="line-number">56</pre><pre _ngcontent-kfp-11="" class="line-number">57</pre><pre _ngcontent-kfp-11="" class="line-number">58</pre><pre _ngcontent-kfp-11="" class="line-number">59</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Pipe } from <span class="hljs-string">'@angular/core'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Parties } from <span class="hljs-string">'../../../collections/parties.ts'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Images } from <span class="hljs-string">'../../../collections/images'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { MeteorComponent } from <span class="hljs-string">'angular2-meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">@Pipe({</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  }</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">}</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">@Pipe({</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  name: <span class="hljs-string">'displayMainImage'</span>,</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  pure: <span class="hljs-literal">false</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">})</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> DisplayMainImagePipe extends MeteorComponent {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">super</span>();</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  transform(party: Party) {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (!party) {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> imageUrl: <span class="hljs-built_in">string</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> imageId: <span class="hljs-built_in">string</span> = (party.images || [])[<span class="hljs-number">0</span>];</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-keyword">const</span> found = Images.findOne(imageId);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-keyword">if</span> (found) {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">        imageUrl = found.url;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    }, <span class="hljs-literal">true</span>);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> imageUrl;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  }</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">@Pipe({</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  name: <span class="hljs-string">'rsvp'</span>,</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>As you can see we're using <code ngNonBindable="">MeteorComponent</code> to make it reactive and we're looking for the first image of the <code ngNonBindable="">Party.images</code> array.</p>

<p>Since we have it done, let's add it to PartiesList:</p>

<p><diffbox step="20.36" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.36</span> <span _ngcontent-kfp-11="" class="commit-summary">Inject DisplayMainImagePipe</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/01c431d9b3012034f79d70ce6c2b70aecaec308b">client/imports/parties-list/parties-list.ts</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">8</pre><pre _ngcontent-kfp-11="" class="line-number">9</pre><pre _ngcontent-kfp-11="" class="line-number">10</pre><pre _ngcontent-kfp-11="" class="line-number">11</pre><pre _ngcontent-kfp-11="" class="line-number">12</pre><pre _ngcontent-kfp-11="" class="line-number">13</pre><pre _ngcontent-kfp-11="" class="line-number">14</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">21</pre><pre _ngcontent-kfp-11="" class="line-number">22</pre><pre _ngcontent-kfp-11="" class="line-number">23</pre><pre _ngcontent-kfp-11="" class="line-number">24</pre><pre _ngcontent-kfp-11="" class="line-number">25</pre><pre _ngcontent-kfp-11="" class="line-number">26</pre><pre _ngcontent-kfp-11="" class="line-number">27</pre><pre _ngcontent-kfp-11="" class="line-number"> </pre><pre _ngcontent-kfp-11="" class="line-number">46</pre><pre _ngcontent-kfp-11="" class="line-number">47</pre><pre _ngcontent-kfp-11="" class="line-number">48</pre><pre _ngcontent-kfp-11="" class="line-number">49</pre><pre _ngcontent-kfp-11="" class="line-number">50</pre><pre _ngcontent-kfp-11="" class="line-number">51</pre><pre _ngcontent-kfp-11="" class="line-number">52</pre><pre _ngcontent-kfp-11="" class="line-number">53</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { ReactiveVar } from <span class="hljs-string">'meteor/reactive-var'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Counts } from <span class="hljs-string">'meteor/tmeasday:publish-counts'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { PaginationService, PaginatePipe, PaginationControlsCmp } from <span class="hljs-string">'angular2-pagination'</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { RsvpPipe, DisplayMainImagePipe } from <span class="hljs-string">'../pipes/pipes.ts'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Meteor } from <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {GOOGLE_MAPS_DIRECTIVES} from <span class="hljs-string">'angular2-google-maps/core'</span>;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> {MATERIAL_DIRECTIVES} from <span class="hljs-string">'ng2-material'</span>;</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  viewProviders: [PaginationService],</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  template,</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  directives: [MATERIAL_DIRECTIVES, GOOGLE_MAPS_DIRECTIVES, PartiesForm, ROUTER_DIRECTIVES, PaginationControlsCmp, MD_INPUT_DIRECTIVES],</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  pipes: [PaginatePipe, RsvpPipe, DisplayMainImagePipe]</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">})</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">@InjectUser()</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> PartiesList extends MeteorComponent{</pre><pre _ngcontent-kfp-11="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">      <span class="hljs-keyword">this</span>.subscribe(<span class="hljs-string">'parties'</span>, options, <span class="hljs-keyword">this</span>.location.get(), () =&gt; {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">        <span class="hljs-keyword">this</span>.parties = Parties.find({}, { sort: { name: <span class="hljs-keyword">this</span>.nameOrder.get() } });</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">      }, <span class="hljs-literal">true</span>);</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.subscribe(<span class="hljs-string">'images'</span>);</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    });</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.autorun(() =&gt; {</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Notice that we also subscribed to <code ngNonBindable="">images</code>.</p>

<p>We can now just implement it:</p>

<p><diffbox step="20.37" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.37</span> <span _ngcontent-kfp-11="" class="commit-summary">Implement pipe</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/f7a1c81873181e6a24ab76f6c80d6a4f330219df">client/imports/parties-list/parties-list.html</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">27</pre><pre _ngcontent-kfp-11="" class="line-number">28</pre><pre _ngcontent-kfp-11="" class="line-number">29</pre><pre _ngcontent-kfp-11="" class="line-number">30</pre><pre _ngcontent-kfp-11="" class="line-number">31</pre><pre _ngcontent-kfp-11="" class="line-number">32</pre><pre _ngcontent-kfp-11="" class="line-number">33</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context">                     class="ma-party"&gt;</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">                    <span class="hljs-tag">&lt;<span class="hljs-name">md-card</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">                        <span class="hljs-tag">&lt;<span class="hljs-name">md-card-content</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">                            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> *<span class="hljs-attr">ngIf</span>=<span class="hljs-string">"party.images"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"party-main-image"</span> [<span class="hljs-attr">src</span>]=<span class="hljs-string">"party | displayMainImage"</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">                            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"md-title ma-name"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span></span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">                                    [routerLink]="['/party', party._id]"&gt;{{party.name}}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ma-description"</span></span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Add some css rules to keep the control of images:</p>

<p><diffbox step="20.38" tutorial="angular2-meteor-socially" _nghost-kfp-11=""><div _ngcontent-kfp-11="" class="diffbox">
    <div _ngcontent-kfp-11="" class="title-panel">
        <span _ngcontent-kfp-11="" class="step-number">20.38</span> <span _ngcontent-kfp-11="" class="commit-summary">Add styles</span>
        <a _ngcontent-kfp-11="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular2.0-socially/commit/e4340d3de12fcf454361eb3c939a752b5d99d839">client/imports/parties-list/_parties-list.scss</a>
    </div>
    <div _ngcontent-kfp-11="" class="code-container">
        <div _ngcontent-kfp-11="" class="scroll-container">
            <div _ngcontent-kfp-11="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-number">58</pre><pre _ngcontent-kfp-11="" class="line-number">59</pre><pre _ngcontent-kfp-11="" class="line-number">60</pre><pre _ngcontent-kfp-11="" class="line-number">61</pre><pre _ngcontent-kfp-11="" class="line-number">62</pre><pre _ngcontent-kfp-11="" class="line-number">63</pre><pre _ngcontent-kfp-11="" class="line-number">64</pre><pre _ngcontent-kfp-11="" class="line-number">65</pre><pre _ngcontent-kfp-11="" class="line-number">66</pre><pre _ngcontent-kfp-11="" class="line-number">67</pre>
            </div>
            <div _ngcontent-kfp-11="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-kfp-11="" class="line-context" className="line-context"> </pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context"><span class="hljs-selector-class">.search-form</span> {</pre><pre _ngcontent-kfp-11="" class="line-context" className="line-context">  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1em</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"> </pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added"><span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.party-main-image</span> {</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">100%</span>;</pre><pre _ngcontent-kfp-11="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<h3>Cloud Storage</h3>

<p>By storing files in the cloud you can reduce your costs and get a lot of other benefits.</p>

<p>Since this chapter is all about uploading files and UploadFS doesn't have built-in support for cloud services we should mention another library for that.</p>

<p>We recommend you to use <a href="https://github.com/CulturalMe/meteor-slingshot/">Slingshot</a>. You can install it by running:</p>

<pre><code ngNonBindable="">$ meteor add edgee:slingshot</code></pre>

<p>It's very easy to use with AWS S3, Google Cloud and other cloud storage services.</p>

<p>From slignshot's repository:</p>

<blockquote><p>meteor-slingshot uploads the files directly to the cloud service from the browser without ever exposing your secret access key or any other sensitive data to the client and without requiring public write access to cloud storage to the entire public.</p></blockquote></tutorial-page-content>
    </div>
</div></tutorial></app>


</body></html>