<!DOCTYPE html><html lang="en"><head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic,800italic" rel="stylesheet" type="text/css">
    <title>Angular2-Meteor</title>
    <meta charset="UTF-8">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <base href="/">
    <style>.logo[_ngcontent-dwl-1] {
  width: auto;
  height: 2em; }

.main-toolbar[_ngcontent-dwl-1] {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  box-shadow: 3px 0 6px rgba(0, 0, 0, 0.3);
  background: #90A4AE; }
  .main-toolbar[_ngcontent-dwl-1] a[_ngcontent-dwl-1] {
    color: white;
    text-decoration: none; }

.fill-remaining-space[_ngcontent-dwl-1] {
  -ms-flex: 1 1 auto;
      flex: 1 1 auto; }

.tutorials-dropdown[_ngcontent-dwl-1] {
  position: relative;
  display: inline-block; }
  .tutorials-dropdown[_ngcontent-dwl-1] .dropdown-content[_ngcontent-dwl-1] {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 500px;
    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    padding: 7px; }

.tutorials-dropdown[_ngcontent-dwl-1]:hover .dropdown-content[_ngcontent-dwl-1] {
  display: block; }</style><style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0; }

/* Base color: saturation 0; */
.hljs,
.hljs-subst {
  color: #444; }

.hljs-comment {
  color: #888888; }

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold; }

/* User color: hue: 0 */
.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000; }

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold; }

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060; }

/* Language color: hue: 90; */
.hljs-literal {
  color: #78A960; }

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300; }

/* Meta color: hue: 200 */
.hljs-meta {
  color: #1f7199; }

.hljs-meta-string {
  color: #4d99bf; }

/* Misc effects */
.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8; }

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic; }

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold; }

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080; }

.hljs-string,
.hljs-doctag {
  color: #d14; }

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold; }

.hljs-subst {
  font-weight: normal; }

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold; }

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal; }

.hljs-regexp,
.hljs-link {
  color: #009926; }

.hljs-symbol,
.hljs-bullet {
  color: #990073; }

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3; }

.hljs-meta {
  color: #999;
  font-weight: bold; }

.hljs-deletion {
  background: #fdd; }

.hljs-addition {
  background: #dfd; }

.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

a {
  color: black; }

body {
  padding: 0;
  margin: 0;
  padding-top: 64px;
  font-family: 'Open Sans', sans-serif; }

pre {
  background: transparent;
  border: none;
  white-space: pre-wrap; }

code {
  white-space: pre-wrap; }

img[alt="angular1-wa-ionic-cli"], img[alt="angular1-wa-meteor-cli"] {
  width: 30%; }

.side-nav .step-item, .side-nav .api-list-item {
  margin: 0;
  padding: 0;
  border-bottom: 1px solid #CFD8DC;
  color: #546E7A; }

.side-nav .step-link, .side-nav .api-item-link, .side-nav .apis-versions-list li {
  text-decoration: none;
  color: #536E7A;
  display: block;
  font-size: 14px;
  padding: 16px 16px;
  margin: 0;
  background-color: #ECEFF1; }

.side-nav .active-step a {
  font-weight: bold; }

.side-nav .tutorial-steps-list, .side-nav .apis-list, .side-nav .apis-versions-list {
  list-style: none;
  padding-left: 0;
  margin-top: 8px; }

.apis-versions-list {
  margin: 0 !important; }
  .apis-versions-list li {
    padding: 8px !important; }
    .apis-versions-list li a {
      text-decoration: none; }

.dropdown-content {
  column-count: 2;
  column-width: 220px;
  column-rule: 1px solid #ECEFF1;
  column-gap: 0; }
  .dropdown-content .tutorial-steps-list {
    margin: 0 !important;
    list-style: none;
    padding: 0; }
    .dropdown-content .tutorial-steps-list .step-item {
      padding: 5px 0 5px 10px;
      border-bottom: 1px solid #ECEFF1;
      break-inside: avoid-column; }
      .dropdown-content .tutorial-steps-list .step-item a {
        text-decoration: none;
        font-size: small;
        color: black; }
      .dropdown-content .tutorial-steps-list .step-item .bold {
        font-weight: bold; }

.md-primary {
  background: #263238 !important;
  color: white !important;
  cursor: pointer !important; }
  .md-primary[disabled] {
    color: lightgray !important;
    cursor: not-allowed !important; }

tutorial-page-content pre code[ngnonbindable] {
  background: #eee;
  display: block;
  width: 90%;
  border-radius: 5px;
  padding: 10px; }

tutorial-page-content blockquote {
  margin: 0;
  position: relative;
  background: #eee;
  border-radius: 5px; }
  tutorial-page-content blockquote:before {
    content: '!';
    font-weight: bold;
    position: absolute;
    vertical-align: top;
    font-size: 2vw;
    color: white;
    margin-left: 6px; }
  tutorial-page-content blockquote p {
    border-left: 1px solid white;
    padding: 10px;
    margin-left: 20px; }

.diffbox {
  border-radius: 10px; }
  .diffbox .title-panel {
    border-radius: 10px 10px 0 0; }
  .diffbox .code-container {
    border-radius: 0 0 10px 10px; }

api-ref-container p code, api-ref-container ul li code {
  font-family: 'Open Sans', sans-serif; }

api-ref-container a {
  color: #263238;
  text-decoration: none;
  font-weight: bold; }

api-ref-container h3 {
  background: #eee;
  border-radius: 5px;
  padding: 4px;
  margin-top: 30px; }

api-ref-container table {
  width: 100%;
  background: #eee;
  border-radius: 5px;
  border-spacing: 0; }
  api-ref-container table thead {
    background: #546E7A;
    color: #eee;
    border-radius: 5px; }
    api-ref-container table thead tr {
      background: #546E7A;
      border-radius: 5px; }
      api-ref-container table thead tr th {
        padding: 6px; }
  api-ref-container table tbody td {
    padding: 5px; }
</style><style>/** * Mixin that creates a new stacking context. * see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */ /** * This mixin hides an element visually. * That means it's still accessible for screen-readers but not visible in view. */ /** * Forces an element to grow to fit floated contents; used as as an alternative to * `overflow: hidden;` because it doesn't cut off contents. */ /** * A mixin, which generates temporary ink ripple on a given component. * When $bindToParent is set to true, it will check for the focused class on the same selector as you included * that mixin. * It is also possible to specify the color palette of the temporary ripple. By default it uses the * accent palette for its background. */ md-toolbar { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; min-height: 64px; font-size: 20px; font-weight: 400; font-family: Roboto, "Helvetica Neue", sans-serif; padding: 0 16px; -webkit-box-orient: vertical; -webkit-box-direction: normal; -ms-flex-direction: column; flex-direction: column; background: whitesmoke; color: rgba(0, 0, 0, 0.87); } md-toolbar.md-primary { background: #009688; color: white; } md-toolbar.md-accent { background: #9c27b0; color: rgba(255, 255, 255, 0.870588); } md-toolbar.md-warn { background: #f44336; color: white; } md-toolbar md-toolbar-row { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; height: 64px; -webkit-box-orient: horizontal; -webkit-box-direction: normal; -ms-flex-direction: row; flex-direction: row; -webkit-box-align: center; -ms-flex-align: center; align-items: center; } </style><style>/** * A collection of mixins and CSS classes that can be used to apply elevation to a material * element. * See: https://www.google.com/design/spec/what-is-material/elevation-shadows.html * Examples: * * * .md-foo { *   @include $md-elevation(2); * *   &:active { *     @include $md-elevation(8); *   } * } * * <div id="external-card" class="md-elevation-z2"><p>Some content</p></div> * * For an explanation of the design behind how elevation is implemented, see the design doc at * https://goo.gl/Kq0k9Z. */ /** * The css property used for elevation. In most cases this should not be changed. It is exposed * as a variable for abstraction / easy use when needing to reference the property directly, for * example in a will-change rule. */ /** The default duration value for elevation transitions. */ /** The default easing value for elevation transitions. */ /** * Applies the correct css rules to an element to give it the elevation specified by $zValue. * The $zValue must be between 0 and 24. */ /** * Returns a string that can be used as the value for a transition property for elevation. * Calling this function directly is useful in situations where a component needs to transition * more than one property. * * .foo { *   transition: md-elevation-transition-property-value(), opacity 100ms ease; *   will-change: $md-elevation-property, opacity; * } */ /** * Applies the correct css rules needed to have an element transition between elevations. * This mixin should be applied to elements whose elevation values will change depending on their * context (e.g. when active or disabled). */ /** Applies a property to an md-button element for each of the supported palettes. */ /** Applies a focus style to an md-button element for each of the supported palettes. */ [md-raised-button], [md-fab], [md-mini-fab], [md-button], [md-icon-button] { box-sizing: border-box; position: relative; background: transparent; text-align: center; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; outline: none; border: none; display: inline-block; white-space: nowrap; text-decoration: none; vertical-align: baseline; font-size: 14px; font-family: Roboto, "Helvetica Neue", sans-serif; font-weight: 500; color: currentColor; margin: 0; min-width: 88px; line-height: 36px; padding: 0 16px; border-radius: 3px; } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab], .md-primary[md-button], .md-primary[md-icon-button] { color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab], .md-accent[md-button], .md-accent[md-icon-button] { color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab], .md-warn[md-button], .md-warn[md-icon-button] { color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-primary[disabled][md-button], .md-primary[disabled][md-icon-button], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-accent[disabled][md-button], .md-accent[disabled][md-icon-button], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], .md-warn[disabled][md-button], .md-warn[disabled][md-icon-button], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab], [disabled][disabled][md-button], [disabled][disabled][md-icon-button] { color: rgba(0, 0, 0, 0.38); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab], [disabled][md-button], [disabled][md-icon-button] { cursor: default; } .md-button-focus[md-raised-button]::after, .md-button-focus[md-fab]::after, .md-button-focus[md-mini-fab]::after, .md-button-focus[md-button]::after, .md-button-focus[md-icon-button]::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } .md-button-focus.md-primary[md-raised-button]::after, .md-button-focus.md-primary[md-fab]::after, .md-button-focus.md-primary[md-mini-fab]::after, .md-button-focus.md-primary[md-button]::after, .md-button-focus.md-primary[md-icon-button]::after { background-color: rgba(0, 150, 136, 0.12); } .md-button-focus.md-accent[md-raised-button]::after, .md-button-focus.md-accent[md-fab]::after, .md-button-focus.md-accent[md-mini-fab]::after, .md-button-focus.md-accent[md-button]::after, .md-button-focus.md-accent[md-icon-button]::after { background-color: rgba(156, 39, 176, 0.12); } .md-button-focus.md-warn[md-raised-button]::after, .md-button-focus.md-warn[md-fab]::after, .md-button-focus.md-warn[md-mini-fab]::after, .md-button-focus.md-warn[md-button]::after, .md-button-focus.md-warn[md-icon-button]::after { background-color: rgba(244, 67, 54, 0.12); } [md-raised-button], [md-fab], [md-mini-fab] { box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); background-color: #fafafa; -webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0); -webkit-transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { color: white; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { color: rgba(255, 255, 255, 0.870588); } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { color: white; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { color: rgba(0, 0, 0, 0.38); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { background-color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { background-color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { background-color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { background-color: rgba(0, 0, 0, 0.12); } [md-raised-button]:active, [md-fab]:active, [md-mini-fab]:active { box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab] { box-shadow: none; } [md-button][disabled]:hover.md-primary, [md-button][disabled]:hover.md-accent, [md-button][disabled]:hover.md-warn, [md-button][disabled]:hover:hover { background-color: transparent; } [md-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 56px; height: 56px; padding: 0; } [md-fab] i, [md-fab] md-icon { padding: 16px 0; } [md-mini-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 40px; height: 40px; padding: 0; } [md-mini-fab] i, [md-mini-fab] md-icon { padding: 8px 0; } [md-icon-button] { min-width: 0; padding: 0; width: 40px; height: 40px; line-height: 24px; border-radius: 50%; } [md-icon-button] .md-button-wrapper > * { vertical-align: middle; } [md-button]:hover::after, [md-icon-button]:hover::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } [md-button]:hover.md-primary::after, [md-icon-button]:hover.md-primary::after { background-color: rgba(0, 150, 136, 0.12); } [md-button]:hover.md-accent::after, [md-icon-button]:hover.md-accent::after { background-color: rgba(156, 39, 176, 0.12); } [md-button]:hover.md-warn::after, [md-icon-button]:hover.md-warn::after { background-color: rgba(244, 67, 54, 0.12); } @media screen and (-ms-high-contrast: active) { .md-raised-button, .md-fab, .md-mini-fab { border: 1px solid #fff; } } </style><style>.side-nav[_ngcontent-dwl-6] {
  background: #ECEFF1;
  width: 232px;
  bottom: 0;
  overflow: auto;
  z-index: 100;
  border-right: 1px solid rgba(0, 0, 0, 0.3); }
  .side-nav[_ngcontent-dwl-6] ul[_ngcontent-dwl-6] {
    margin-top: 8px; }

tutorials-versions[_ngcontent-dwl-6] {
  margin-left: 10px;
  margin-top: 10px;
  display: block; }

.improv-button[_ngcontent-dwl-6] {
  margin-left: 50px; }

.right-buttons[_ngcontent-dwl-6] {
  float: right;
  margin-right: 250px;
  margin-top: 10px; }

.tutorial-title[_ngcontent-dwl-6] {
  margin: 15px;
  float: left;
  font-size: larger;
  font-weight: bold; }

.top-navigation[_ngcontent-dwl-6] {
  position: fixed;
  margin-top: -60px;
  width: 100%;
  background-color: #ECEFF1;
  height: 60px;
  z-index: 50; }

.tutorial-content[_ngcontent-dwl-6] {
  margin-top: 60px;
  padding: 20px; }

.tutorials-container[_ngcontent-dwl-6] {
  padding-left: 230px; }

.l-pinned-top[_ngcontent-dwl-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px; }

.l-pinned-left[_ngcontent-dwl-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px; }

.l-left[_ngcontent-dwl-6] {
  float: left; }

.l-right[_ngcontent-dwl-6] {
  float: right; }

.l-relative[_ngcontent-dwl-6], .docs-content[_ngcontent-dwl-6] {
  position: relative; }

.l-absolute[_ngcontent-dwl-6] {
  position: absolute; }

.l-fixed[_ngcontent-dwl-6] {
  position: fixed; }

.l-offset-side-nav[_ngcontent-dwl-6] {
  padding-left: 232px; }

.l-offset-nav[_ngcontent-dwl-6] {
  padding-top: 64px; }</style><style>.tutorial-version[_ngcontent-dwl-7] {
            margin-left: 10px;
        }
        
        .active[_ngcontent-dwl-7] {
            color: #b3e5fc !important;
        }</style><style>.diffbox[_ngcontent-dwl-12] {
  border: 1px solid #eee;
  -webkit-text-size-adjust: 100%;
  margin: 1.5em 0; }
  .diffbox[_ngcontent-dwl-12] .title-panel[_ngcontent-dwl-12] {
    padding: 5px 12px;
    background: #eee;
    border-bottom: solid 1px #eee;
    color: #333;
    overflow: auto; }
    .diffbox[_ngcontent-dwl-12] .title-panel[_ngcontent-dwl-12] .github-commit-link[_ngcontent-dwl-12] {
      float: right;
      color: black;
      text-decoration: none;
      border-bottom: none !important; }
  .diffbox[_ngcontent-dwl-12] .code-container[_ngcontent-dwl-12] {
    overflow-x: auto;
    position: relative;
    padding: 9px 3px 3px 0;
    background: #f8f8f8; }
    .diffbox[_ngcontent-dwl-12] .code-container[_ngcontent-dwl-12] .scroll-container[_ngcontent-dwl-12] {
      display: inline-block;
      min-width: 100%;
      overflow: hidden; }
    .diffbox[_ngcontent-dwl-12] .code-container[_ngcontent-dwl-12] pre[_ngcontent-dwl-12] {
      margin: 0;
      padding: 0;
      background-color: transparent; }
      .diffbox[_ngcontent-dwl-12] .code-container[_ngcontent-dwl-12] pre.line-added[_ngcontent-dwl-12] {
        background: #eaffea; }
      .diffbox[_ngcontent-dwl-12] .code-container[_ngcontent-dwl-12] pre.line-removed[_ngcontent-dwl-12] {
        background: #ff9ea2; }
    .diffbox[_ngcontent-dwl-12] .code-container[_ngcontent-dwl-12] .line-content[_ngcontent-dwl-12] {
      padding-left: 36px;
      overflow: hidden; }
      .diffbox[_ngcontent-dwl-12] .code-container[_ngcontent-dwl-12] .line-content[_ngcontent-dwl-12] .hljs-comment[_ngcontent-dwl-12] {
        color: #777; }
    .diffbox[_ngcontent-dwl-12] .code-container[_ngcontent-dwl-12] .line-numbers[_ngcontent-dwl-12] {
      text-align: right;
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      -o-user-select: none;
      position: absolute;
      width: 25px; }
      .diffbox[_ngcontent-dwl-12] .code-container[_ngcontent-dwl-12] .line-numbers[_ngcontent-dwl-12] .line-number[_ngcontent-dwl-12] {
        color: #aaa;
        font-style: italic; }</style></head><body><universal-styles></universal-styles>


<app _nghost-dwl-1=""><md-toolbar _ngcontent-dwl-1="" class="main-toolbar md-primary"><div class="md-toolbar-layout"> <md-toolbar-row> 
    <a _ngcontent-dwl-1="" href="/"><img _ngcontent-dwl-1="" class="logo" src="/assets/images/logo.png"></a>
    <div _ngcontent-dwl-1="" class="tutorials-dropdown">
        <button _ngcontent-dwl-1="" md-button=""><span class="md-button-wrapper">Tutorials</span> </button>
        <div _ngcontent-dwl-1="" class="dropdown-content">
            <steps-list _ngcontent-dwl-1="" prefix="/tutorials/socially"><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/folder-structure">8. Folder Structure</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/css-sass-and-bootstrap">18. CSS, SASS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ionic2">23. Ionic2</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/next-steps">25. Next Steps</a>
    </li>
    <!--template bindings={}--><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/whatsapp">WhatsApp clone with Angular &amp; Meteor</a>
    </li><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/migration/angular2/introduction">Blaze to Angular 2 Migration tutorial</a>
    </li>
</ul>
</steps-list>
        </div>
    </div>
    <a _ngcontent-dwl-1="" href="/angular2/"><button _ngcontent-dwl-1="" md-button=""><span class="md-button-wrapper">Angular 2</span> </button></a>
    <a _ngcontent-dwl-1="" href="/api/angular2-meteor/latest/MeteorComponent"><button _ngcontent-dwl-1="" md-button=""><span class="md-button-wrapper">API Reference</span> </button></a>
    <span _ngcontent-dwl-1="" class="fill-remaining-space"></span>
    <a _ngcontent-dwl-1="" href="https://github.com/Urigo/angular2-meteor" target="_blank"><button _ngcontent-dwl-1="" md-button=""><span class="md-button-wrapper">GitHub</span> </button></a>
    <a _ngcontent-dwl-1="" href="http://info.meteor.com/blog/author/uri-goldshtein?__hstc=219992390.b4a81f3b906b078dac633307097097f5.1471207723059.1471890076881.1471938647239.7&amp;__hssc=219992390.3.1471938647239&amp;__hsfp=714783454" target="_blank"><button _ngcontent-dwl-1="" md-button=""><span class="md-button-wrapper">Blog</span> </button></a>
    <a _ngcontent-dwl-1="" href="https://docs.google.com/forms/d/e/1FAIpQLSed3JZ0EAcSzkX8Y-iEtvNQRfjeyP2ICQvYMs00ewdmKaplwA/viewform" target="_blank"><button _ngcontent-dwl-1="" md-button=""><span class="md-button-wrapper">Contact Us</span> </button></a>
    <a _ngcontent-dwl-1="" href="/manifesto"><button _ngcontent-dwl-1="" md-button=""><span class="md-button-wrapper">Manifesto</span> </button></a>
    <a _ngcontent-dwl-1="" href="/about"><button _ngcontent-dwl-1="" md-button=""><span class="md-button-wrapper">About us</span> </button></a>
 </md-toolbar-row>  </div></md-toolbar>
<router-outlet _ngcontent-dwl-1=""></router-outlet><tutorial _nghost-dwl-6=""><div _ngcontent-dwl-6="" class="tutorials-container">
    <nav _ngcontent-dwl-6="" class="side-nav l-pinned-left l-layer-4 l-offset-nav">
        <tutorials-versions _ngcontent-dwl-6="" _nghost-dwl-7=""><!--template bindings={}--></tutorials-versions>
        <steps-list _ngcontent-dwl-6=""><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/ionic/bootstrapping">1. Bootstrapping</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/ionic/bundling">2. Bundling</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/ionic/layout">3. Layout, coding style &amp; structure</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/ionic/realtime-meteor-server">4. Realtime Meteor server</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/ionic/meteor-server-methods">5. Chat view and send messages</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/ionic/authentication">6. Authentication</a>
    </li><li class="step-item active-step" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/ionic/modify-chats">7. Create and remove chats</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/ionic/privacy">8. Privacy</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/ionic/summary">9. Summary</a>
    </li>
    <!--template bindings={}-->
</ul>
</steps-list>
    </nav>
    <div _ngcontent-dwl-6="" class="top-navigation">
        <span _ngcontent-dwl-6="" class="tutorial-title" stepName="">Create and remove chats</span>
        <div _ngcontent-dwl-6="" class="right-buttons">
            <a _ngcontent-dwl-6="" class="md-primary" md-raised-button="" tutorialNavigation="previous" href="/tutorials/whatsapp/ionic/authentication">Previous</a>
            <a _ngcontent-dwl-6="" class="md-primary" codeDiffLink="" md-raised-button="" href="https://github.com/DAB0mB/ionic-meteor-whatsapp/compare/step_05...step_06">Code Diff</a>
            <a _ngcontent-dwl-6="" class="md-primary" md-raised-button="" tutorialNavigation="next" href="/tutorials/whatsapp/ionic/privacy">Next</a>
            <a _ngcontent-dwl-6="" class="md-primary improv-button" md-raised-button="" href="https://github.com/Urigo/tutorial-infrastructure/edit/master/static-website/tutorials/whatsapp/ionic/modify-chats.html">Improve This Document</a>
        </div>
    </div>
    <div _ngcontent-dwl-6="" class="tutorial-content">
        <router-outlet _ngcontent-dwl-6=""></router-outlet><tutorial-page><div class="tutorial-container"></div></tutorial-page><tutorial-page-content><p>Our next step is about adding the ability to create new chats. So far we had the chats list and the users feature, we just need to connect them.</p>

<p>We will open the new chat view using <code ngNonBindable="">Ionic</code>'s modal dialog, so first let's add a button that opens this dialog to the chats list:</p>

<p><diffbox step="6.1" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.1</span> <span _ngcontent-dwl-12="" class="commit-summary">Add chat creation button to chats view</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/44aa88861fb85a7193145ee8d8d0274993ba447a">www/templates/chats.html</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">1</pre><pre _ngcontent-dwl-12="" class="line-number">2</pre><pre _ngcontent-dwl-12="" class="line-number">3</pre><pre _ngcontent-dwl-12="" class="line-number">4</pre><pre _ngcontent-dwl-12="" class="line-number">5</pre><pre _ngcontent-dwl-12="" class="line-number">6</pre><pre _ngcontent-dwl-12="" class="line-number">7</pre><pre _ngcontent-dwl-12="" class="line-number">8</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-tag">&lt;<span class="hljs-name">ion-view</span> <span class="hljs-attr">view-title</span>=<span class="hljs-string">"Chats"</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-nav-buttons</span> <span class="hljs-attr">side</span>=<span class="hljs-string">"right"</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ng-click</span>=<span class="hljs-string">"chats.showNewChatModal()"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear button-positive button-icon ion-ios-compose-outline"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-nav-buttons</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-content</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">ion-list</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">      <span class="hljs-tag">&lt;<span class="hljs-name">ion-item</span> <span class="hljs-attr">ng-repeat</span>=<span class="hljs-string">"chat in chats.data | orderBy:'-lastMessage.timestamp'"</span></span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>This button calls a controller method, which we will implement now in the controller:</p>

<p><diffbox step="6.2" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.2</span> <span _ngcontent-dwl-12="" class="commit-summary">Add new chat modal method to chats controller</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/540542998b12b6669f5af2cc62e0bac2b9bb88f2">src/controllers/chats.controller.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">2</pre><pre _ngcontent-dwl-12="" class="line-number">3</pre><pre _ngcontent-dwl-12="" class="line-number">4</pre><pre _ngcontent-dwl-12="" class="line-number">5</pre><pre _ngcontent-dwl-12="" class="line-number">6</pre><pre _ngcontent-dwl-12="" class="line-number">7</pre><pre _ngcontent-dwl-12="" class="line-number">8</pre><pre _ngcontent-dwl-12="" class="line-number">9</pre><pre _ngcontent-dwl-12="" class="line-number"> </pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number">15</pre><pre _ngcontent-dwl-12="" class="line-number">16</pre><pre _ngcontent-dwl-12="" class="line-number">17</pre><pre _ngcontent-dwl-12="" class="line-number">18</pre><pre _ngcontent-dwl-12="" class="line-number">19</pre><pre _ngcontent-dwl-12="" class="line-number">20</pre><pre _ngcontent-dwl-12="" class="line-number">21</pre><pre _ngcontent-dwl-12="" class="line-number">22</pre><pre _ngcontent-dwl-12="" class="line-number">23</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Controller } <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChatsCtrl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span>{</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-keyword">static</span> $inject = [<span class="hljs-string">'NewChat'</span>]</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">    <span class="hljs-keyword">super</span>(...arguments);</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">    });</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  showNewChatModal() {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.NewChat.showModal();</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  remove(chat) {</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.data.remove(chat);</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  }</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Note that we first create the modal dialog with a template, and then later we open it in the button function.</p>

<p>Inorder to open this modal, we will create a service that takes care of that:</p>

<p><diffbox step="6.3" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.3</span> <span _ngcontent-dwl-12="" class="commit-summary">Add new chat service</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/aee45940af82f794923d1ff758dc9026f8539c58">src/services/new-chat.service.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">1</pre><pre _ngcontent-dwl-12="" class="line-number">2</pre><pre _ngcontent-dwl-12="" class="line-number">3</pre><pre _ngcontent-dwl-12="" class="line-number">4</pre><pre _ngcontent-dwl-12="" class="line-number">5</pre><pre _ngcontent-dwl-12="" class="line-number">6</pre><pre _ngcontent-dwl-12="" class="line-number">7</pre><pre _ngcontent-dwl-12="" class="line-number">8</pre><pre _ngcontent-dwl-12="" class="line-number">9</pre><pre _ngcontent-dwl-12="" class="line-number">10</pre><pre _ngcontent-dwl-12="" class="line-number">11</pre><pre _ngcontent-dwl-12="" class="line-number">12</pre><pre _ngcontent-dwl-12="" class="line-number">13</pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number">15</pre><pre _ngcontent-dwl-12="" class="line-number">16</pre><pre _ngcontent-dwl-12="" class="line-number">17</pre><pre _ngcontent-dwl-12="" class="line-number">18</pre><pre _ngcontent-dwl-12="" class="line-number">19</pre><pre _ngcontent-dwl-12="" class="line-number">20</pre><pre _ngcontent-dwl-12="" class="line-number">21</pre><pre _ngcontent-dwl-12="" class="line-number">22</pre><pre _ngcontent-dwl-12="" class="line-number">23</pre><pre _ngcontent-dwl-12="" class="line-number">24</pre><pre _ngcontent-dwl-12="" class="line-number">25</pre><pre _ngcontent-dwl-12="" class="line-number">26</pre><pre _ngcontent-dwl-12="" class="line-number">27</pre><pre _ngcontent-dwl-12="" class="line-number">28</pre><pre _ngcontent-dwl-12="" class="line-number">29</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Service } <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewChatService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Service</span> </span>{</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-keyword">static</span> $inject = [<span class="hljs-string">'$rootScope'</span>, <span class="hljs-string">'$ionicModal'</span>]</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-keyword">static</span> $name = <span class="hljs-string">'NewChat'</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">super</span>(...arguments);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.templateUrl = <span class="hljs-string">'templates/new-chat.html'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  showModal() {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.scope = <span class="hljs-keyword">this</span>.$rootScope.$<span class="hljs-keyword">new</span>();</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.$ionicModal.fromTemplateUrl(<span class="hljs-keyword">this</span>.templateUrl, {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      scope: <span class="hljs-keyword">this</span>.scope</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    })</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    .then((modal) =&gt; {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.modal = modal;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.modal.show();</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  hideModal() {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.scope.$destroy();</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.modal.remove();</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="6.4" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.4</span> <span _ngcontent-dwl-12="" class="commit-summary">Load new chat service</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/0e765fb3208eed84f2ce19f567fdace9e3675637">src/app.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">12</pre><pre _ngcontent-dwl-12="" class="line-number">13</pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number">15</pre><pre _ngcontent-dwl-12="" class="line-number">16</pre><pre _ngcontent-dwl-12="" class="line-number">17</pre><pre _ngcontent-dwl-12="" class="line-number">18</pre><pre _ngcontent-dwl-12="" class="line-number"> </pre><pre _ngcontent-dwl-12="" class="line-number">33</pre><pre _ngcontent-dwl-12="" class="line-number">34</pre><pre _ngcontent-dwl-12="" class="line-number">35</pre><pre _ngcontent-dwl-12="" class="line-number">36</pre><pre _ngcontent-dwl-12="" class="line-number">37</pre><pre _ngcontent-dwl-12="" class="line-number">38</pre><pre _ngcontent-dwl-12="" class="line-number">39</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> SettingsCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'./controllers/settings.controller'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> InputDirective <span class="hljs-keyword">from</span> <span class="hljs-string">'./directives/input.directive'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> CalendarFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'./filters/calendar.filter'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> NewChatService <span class="hljs-keyword">from</span> <span class="hljs-string">'./services/new-chat.service'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> Routes <span class="hljs-keyword">from</span> <span class="hljs-string">'./routes'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">const</span> App = <span class="hljs-string">'whatsapp'</span>;</pre><pre _ngcontent-dwl-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(SettingsCtrl)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(InputDirective)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(CalendarFilter)</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  .load(NewChatService)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(Routes);</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">Ionic.Platform.ready(() =&gt; {</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now let's add the view of this modal dialog, which is just a list of users:</p>

<p><diffbox step="6.5" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.5</span> <span _ngcontent-dwl-12="" class="commit-summary">Add new chat view</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/c9fd597ea4b0cff44d487023403b15ada77a0f18">www/templates/new-chat.html</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">1</pre><pre _ngcontent-dwl-12="" class="line-number">2</pre><pre _ngcontent-dwl-12="" class="line-number">3</pre><pre _ngcontent-dwl-12="" class="line-number">4</pre><pre _ngcontent-dwl-12="" class="line-number">5</pre><pre _ngcontent-dwl-12="" class="line-number">6</pre><pre _ngcontent-dwl-12="" class="line-number">7</pre><pre _ngcontent-dwl-12="" class="line-number">8</pre><pre _ngcontent-dwl-12="" class="line-number">9</pre><pre _ngcontent-dwl-12="" class="line-number">10</pre><pre _ngcontent-dwl-12="" class="line-number">11</pre><pre _ngcontent-dwl-12="" class="line-number">12</pre><pre _ngcontent-dwl-12="" class="line-number">13</pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number">15</pre><pre _ngcontent-dwl-12="" class="line-number">16</pre><pre _ngcontent-dwl-12="" class="line-number">17</pre><pre _ngcontent-dwl-12="" class="line-number">18</pre><pre _ngcontent-dwl-12="" class="line-number">19</pre><pre _ngcontent-dwl-12="" class="line-number">20</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">ion-modal-view</span> <span class="hljs-attr">ng-controller</span>=<span class="hljs-string">"NewChatCtrl as chat"</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-header-bar</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>New Chat<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"buttons"</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear button-positive"</span> <span class="hljs-attr">ng-click</span>=<span class="hljs-string">"chat.hideNewChatModal()"</span>&gt;</span>Cancel<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-header-bar</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-content</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list"</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">ng-repeat</span>=<span class="hljs-string">"user in chat.users"</span> <span class="hljs-attr">ng-click</span>=<span class="hljs-string">"chat.newChat(user._id)"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{user.profile.name}}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">          Hey there! I am using meteor-Whatsapp with meteor.</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-content</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;/<span class="hljs-name">ion-modal-view</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And now we will add the controller of this view, and use the <code ngNonBindable="">NewChat</code> service:</p>

<p><diffbox step="6.6" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.6</span> <span _ngcontent-dwl-12="" class="commit-summary">Add new chat controller</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/b23d82f81653b73d049df70c5937ccf0abeaacc1">src/controllers/new-chat.controller.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">1</pre><pre _ngcontent-dwl-12="" class="line-number">2</pre><pre _ngcontent-dwl-12="" class="line-number">3</pre><pre _ngcontent-dwl-12="" class="line-number">4</pre><pre _ngcontent-dwl-12="" class="line-number">5</pre><pre _ngcontent-dwl-12="" class="line-number">6</pre><pre _ngcontent-dwl-12="" class="line-number">7</pre><pre _ngcontent-dwl-12="" class="line-number">8</pre><pre _ngcontent-dwl-12="" class="line-number">9</pre><pre _ngcontent-dwl-12="" class="line-number">10</pre><pre _ngcontent-dwl-12="" class="line-number">11</pre><pre _ngcontent-dwl-12="" class="line-number">12</pre><pre _ngcontent-dwl-12="" class="line-number">13</pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number">15</pre><pre _ngcontent-dwl-12="" class="line-number">16</pre><pre _ngcontent-dwl-12="" class="line-number">17</pre><pre _ngcontent-dwl-12="" class="line-number">18</pre><pre _ngcontent-dwl-12="" class="line-number">19</pre><pre _ngcontent-dwl-12="" class="line-number">20</pre><pre _ngcontent-dwl-12="" class="line-number">21</pre><pre _ngcontent-dwl-12="" class="line-number">22</pre><pre _ngcontent-dwl-12="" class="line-number">23</pre><pre _ngcontent-dwl-12="" class="line-number">24</pre><pre _ngcontent-dwl-12="" class="line-number">25</pre><pre _ngcontent-dwl-12="" class="line-number">26</pre><pre _ngcontent-dwl-12="" class="line-number">27</pre><pre _ngcontent-dwl-12="" class="line-number">28</pre><pre _ngcontent-dwl-12="" class="line-number">29</pre><pre _ngcontent-dwl-12="" class="line-number">30</pre><pre _ngcontent-dwl-12="" class="line-number">31</pre><pre _ngcontent-dwl-12="" class="line-number">32</pre><pre _ngcontent-dwl-12="" class="line-number">33</pre><pre _ngcontent-dwl-12="" class="line-number">34</pre><pre _ngcontent-dwl-12="" class="line-number">35</pre><pre _ngcontent-dwl-12="" class="line-number">36</pre><pre _ngcontent-dwl-12="" class="line-number">37</pre><pre _ngcontent-dwl-12="" class="line-number">38</pre><pre _ngcontent-dwl-12="" class="line-number">39</pre><pre _ngcontent-dwl-12="" class="line-number">40</pre><pre _ngcontent-dwl-12="" class="line-number">41</pre><pre _ngcontent-dwl-12="" class="line-number">42</pre><pre _ngcontent-dwl-12="" class="line-number">43</pre><pre _ngcontent-dwl-12="" class="line-number">44</pre><pre _ngcontent-dwl-12="" class="line-number">45</pre><pre _ngcontent-dwl-12="" class="line-number">46</pre><pre _ngcontent-dwl-12="" class="line-number">47</pre><pre _ngcontent-dwl-12="" class="line-number">48</pre><pre _ngcontent-dwl-12="" class="line-number">49</pre><pre _ngcontent-dwl-12="" class="line-number">50</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Chats } <span class="hljs-keyword">from</span> <span class="hljs-string">'api/collections'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Controller } <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewChatCtrl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span>{</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-keyword">static</span> $inject = [<span class="hljs-string">'$state'</span>, <span class="hljs-string">'NewChat'</span>, <span class="hljs-string">'$ionicPopup'</span>, <span class="hljs-string">'$log'</span>]</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">super</span>(...arguments);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.helpers({</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      users() {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">        <span class="hljs-keyword">return</span> Meteor.users.find({ _id: { $ne: <span class="hljs-keyword">this</span>.currentUserId } });</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  newChat(userId) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> chat = Chats.findOne({ userIds: { $all: [<span class="hljs-keyword">this</span>.currentUserId, userId] } });</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (chat) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.hideNewChatModal();</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.goToChat(chat._id);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.callMethod(<span class="hljs-string">'newChat'</span>, userId, (err, chatId) =&gt; {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.hideNewChatModal();</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.handleError(err);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.goToChat(chatId);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  hideNewChatModal() {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.NewChat.hideModal();</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  goToChat(chatId) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.$state.go(<span class="hljs-string">'tab.chat'</span>, { chatId });</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  handleError(err) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.$log.error(<span class="hljs-string">'New chat creation error '</span>, err);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.$ionicPopup.alert({</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      title: err.reason || <span class="hljs-string">'New chat creation failed'</span>,</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      template: <span class="hljs-string">'Please try again'</span>,</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      okType: <span class="hljs-string">'button-positive button-clear'</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="6.7" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.7</span> <span _ngcontent-dwl-12="" class="commit-summary">Load new chat controller</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/f712aaf551198097a31146ae068bc898a7785302">src/app.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">8</pre><pre _ngcontent-dwl-12="" class="line-number">9</pre><pre _ngcontent-dwl-12="" class="line-number">10</pre><pre _ngcontent-dwl-12="" class="line-number">11</pre><pre _ngcontent-dwl-12="" class="line-number">12</pre><pre _ngcontent-dwl-12="" class="line-number">13</pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number"> </pre><pre _ngcontent-dwl-12="" class="line-number">30</pre><pre _ngcontent-dwl-12="" class="line-number">31</pre><pre _ngcontent-dwl-12="" class="line-number">32</pre><pre _ngcontent-dwl-12="" class="line-number">33</pre><pre _ngcontent-dwl-12="" class="line-number">34</pre><pre _ngcontent-dwl-12="" class="line-number">35</pre><pre _ngcontent-dwl-12="" class="line-number">36</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> ChatsCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'./controllers/chats.controller'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> ConfirmationCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'./controllers/confirmation.controller'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> LoginCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'./controllers/login.controller'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> NewChatCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'./controllers/new-chat.controller'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> ProfileCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'./controllers/profile.controller'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> SettingsCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'./controllers/settings.controller'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> InputDirective <span class="hljs-keyword">from</span> <span class="hljs-string">'./directives/input.directive'</span>;</pre><pre _ngcontent-dwl-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(ChatsCtrl)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(ConfirmationCtrl)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(LoginCtrl)</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  .load(NewChatCtrl)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(ProfileCtrl)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(SettingsCtrl)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(InputDirective)</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>The controller includes a server method for creating a chat which is not yet implemented, so let's create it:</p>

<p><diffbox step="6.8" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.8</span> <span _ngcontent-dwl-12="" class="commit-summary">Add new chat method to api</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/920cdca997473bbd8b38539570f1acb76fa18e79">api/server/methods.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">36</pre><pre _ngcontent-dwl-12="" class="line-number">37</pre><pre _ngcontent-dwl-12="" class="line-number">38</pre><pre _ngcontent-dwl-12="" class="line-number">39</pre><pre _ngcontent-dwl-12="" class="line-number">40</pre><pre _ngcontent-dwl-12="" class="line-number">41</pre><pre _ngcontent-dwl-12="" class="line-number">42</pre><pre _ngcontent-dwl-12="" class="line-number">43</pre><pre _ngcontent-dwl-12="" class="line-number">44</pre><pre _ngcontent-dwl-12="" class="line-number">45</pre><pre _ngcontent-dwl-12="" class="line-number">46</pre><pre _ngcontent-dwl-12="" class="line-number">47</pre><pre _ngcontent-dwl-12="" class="line-number">48</pre><pre _ngcontent-dwl-12="" class="line-number">49</pre><pre _ngcontent-dwl-12="" class="line-number">50</pre><pre _ngcontent-dwl-12="" class="line-number">51</pre><pre _ngcontent-dwl-12="" class="line-number">52</pre><pre _ngcontent-dwl-12="" class="line-number">53</pre><pre _ngcontent-dwl-12="" class="line-number">54</pre><pre _ngcontent-dwl-12="" class="line-number">55</pre><pre _ngcontent-dwl-12="" class="line-number">56</pre><pre _ngcontent-dwl-12="" class="line-number">57</pre><pre _ngcontent-dwl-12="" class="line-number">58</pre><pre _ngcontent-dwl-12="" class="line-number">59</pre><pre _ngcontent-dwl-12="" class="line-number">60</pre><pre _ngcontent-dwl-12="" class="line-number">61</pre><pre _ngcontent-dwl-12="" class="line-number">62</pre><pre _ngcontent-dwl-12="" class="line-number">63</pre><pre _ngcontent-dwl-12="" class="line-number">64</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-context" className="line-context">    }</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">    <span class="hljs-keyword">return</span> Meteor.users.update(<span class="hljs-keyword">this</span>.userId, { $set: { <span class="hljs-string">'profile.name'</span>: name } });</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  },</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  newChat(otherId) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'not-logged-in'</span>,</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">        <span class="hljs-string">'Must be logged to create a chat.'</span>);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    check(otherId, <span class="hljs-built_in">String</span>);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> otherUser = Meteor.users.findOne(otherId);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (!otherUser) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'user-not-exists'</span>,</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">        <span class="hljs-string">'Chat\'s user not exists'</span>);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> chat = {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      userIds: [<span class="hljs-keyword">this</span>.userId, otherId],</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      createdAt: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    };</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> chatId = Chats.insert(chat);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> chatId;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>We will also rewrite the logic of <code ngNonBindable="">removeChat()</code> function in the <code ngNonBindable="">ChatsCtrl</code> and we will call a server method instead (which we will explain why further in this tutorial):</p>

<p><diffbox step="6.9" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.9</span> <span _ngcontent-dwl-12="" class="commit-summary">Replace manual chat removal with method invokation in chats controller</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/db702928aac29f502511acdca83ddd36f69c55ff">src/controllers/chats.controller.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">19</pre><pre _ngcontent-dwl-12="" class="line-number">20</pre><pre _ngcontent-dwl-12="" class="line-number">21</pre><pre _ngcontent-dwl-12="" class="line-number">22</pre><pre _ngcontent-dwl-12="" class="line-number">23</pre><pre _ngcontent-dwl-12="" class="line-number">24</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  remove(chat) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.callMethod(<span class="hljs-string">'removeChat'</span>, chat._id);</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And we will implement the method on the server:</p>

<p><diffbox step="6.10" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.10</span> <span _ngcontent-dwl-12="" class="commit-summary">Add chat removal method to api</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/a45882784dc1f3692912fd161928b20bea56aa97">api/server/methods.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">60</pre><pre _ngcontent-dwl-12="" class="line-number">61</pre><pre _ngcontent-dwl-12="" class="line-number">62</pre><pre _ngcontent-dwl-12="" class="line-number">63</pre><pre _ngcontent-dwl-12="" class="line-number">64</pre><pre _ngcontent-dwl-12="" class="line-number">65</pre><pre _ngcontent-dwl-12="" class="line-number">66</pre><pre _ngcontent-dwl-12="" class="line-number">67</pre><pre _ngcontent-dwl-12="" class="line-number">68</pre><pre _ngcontent-dwl-12="" class="line-number">69</pre><pre _ngcontent-dwl-12="" class="line-number">70</pre><pre _ngcontent-dwl-12="" class="line-number">71</pre><pre _ngcontent-dwl-12="" class="line-number">72</pre><pre _ngcontent-dwl-12="" class="line-number">73</pre><pre _ngcontent-dwl-12="" class="line-number">74</pre><pre _ngcontent-dwl-12="" class="line-number">75</pre><pre _ngcontent-dwl-12="" class="line-number">76</pre><pre _ngcontent-dwl-12="" class="line-number">77</pre><pre _ngcontent-dwl-12="" class="line-number">78</pre><pre _ngcontent-dwl-12="" class="line-number">79</pre><pre _ngcontent-dwl-12="" class="line-number">80</pre><pre _ngcontent-dwl-12="" class="line-number">81</pre><pre _ngcontent-dwl-12="" class="line-number">82</pre><pre _ngcontent-dwl-12="" class="line-number">83</pre><pre _ngcontent-dwl-12="" class="line-number">84</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-context" className="line-context">    <span class="hljs-keyword">const</span> chatId = Chats.insert(chat);</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">    <span class="hljs-keyword">return</span> chatId;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  },</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  removeChat(chatId) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.userId) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'not-logged-in'</span>,</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">        <span class="hljs-string">'Must be logged to create a chat.'</span>);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    check(chatId, <span class="hljs-built_in">String</span>);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> chat = Chats.findOne(chatId);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (!chat || !_.include(chat.userIds, <span class="hljs-keyword">this</span>.userId)) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Meteor.Error(<span class="hljs-string">'chat-not-exists'</span>,</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">        <span class="hljs-string">'Chat not exists'</span>);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    Messages.remove({ chatId: chatId });</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> Chats.remove({ _id: chatId });</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>The next messages won't include the username, only the user id, so we need to change the logic of username display. We will add a filter that fetches the user object from the <code ngNonBindable="">Users</code> collection according to the <code ngNonBindable="">userId</code> property of the chat object:</p>

<p><diffbox step="6.11" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.11</span> <span _ngcontent-dwl-12="" class="commit-summary">Add chat name filter</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/7fbcc8a057fd47e407dfe80fd04f37e4186b995e">src/filters/chat-name.filter.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">1</pre><pre _ngcontent-dwl-12="" class="line-number">2</pre><pre _ngcontent-dwl-12="" class="line-number">3</pre><pre _ngcontent-dwl-12="" class="line-number">4</pre><pre _ngcontent-dwl-12="" class="line-number">5</pre><pre _ngcontent-dwl-12="" class="line-number">6</pre><pre _ngcontent-dwl-12="" class="line-number">7</pre><pre _ngcontent-dwl-12="" class="line-number">8</pre><pre _ngcontent-dwl-12="" class="line-number">9</pre><pre _ngcontent-dwl-12="" class="line-number">10</pre><pre _ngcontent-dwl-12="" class="line-number">11</pre><pre _ngcontent-dwl-12="" class="line-number">12</pre><pre _ngcontent-dwl-12="" class="line-number">13</pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number">15</pre><pre _ngcontent-dwl-12="" class="line-number">16</pre><pre _ngcontent-dwl-12="" class="line-number">17</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { _ } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/underscore'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Filter } <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChatNameFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Filter</span> </span>{</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-keyword">static</span> $name = <span class="hljs-string">'chatName'</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  filter(chat) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (!chat) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> otherId = _.without(chat.userIds, Meteor.userId())[<span class="hljs-number">0</span>];</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> otherUser = Meteor.users.findOne(otherId);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> hasName = otherUser &amp;&amp; otherUser.profile &amp;&amp; otherUser.profile.name;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> hasName ? otherUser.profile.name : chat.name || <span class="hljs-string">'NO NAME'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And we will also create the same logic for fetching the user's image:</p>

<p><diffbox step="6.12" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.12</span> <span _ngcontent-dwl-12="" class="commit-summary">Add chat picture filter</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/cf011f59bce06b3c5caa40c16434a1ac545a75af">src/filters/chat-picture.filter.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">1</pre><pre _ngcontent-dwl-12="" class="line-number">2</pre><pre _ngcontent-dwl-12="" class="line-number">3</pre><pre _ngcontent-dwl-12="" class="line-number">4</pre><pre _ngcontent-dwl-12="" class="line-number">5</pre><pre _ngcontent-dwl-12="" class="line-number">6</pre><pre _ngcontent-dwl-12="" class="line-number">7</pre><pre _ngcontent-dwl-12="" class="line-number">8</pre><pre _ngcontent-dwl-12="" class="line-number">9</pre><pre _ngcontent-dwl-12="" class="line-number">10</pre><pre _ngcontent-dwl-12="" class="line-number">11</pre><pre _ngcontent-dwl-12="" class="line-number">12</pre><pre _ngcontent-dwl-12="" class="line-number">13</pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number">15</pre><pre _ngcontent-dwl-12="" class="line-number">16</pre><pre _ngcontent-dwl-12="" class="line-number">17</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { _ } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/underscore'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Filter } <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChatPictureFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Filter</span> </span>{</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-keyword">static</span> $name = <span class="hljs-string">'chatPicture'</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  filter(chat) {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (!chat) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> otherId = _.without(chat.userIds, Meteor.userId())[<span class="hljs-number">0</span>];</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> otherUser = Meteor.users.findOne(otherId);</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">let</span> hasPicture = otherUser &amp;&amp; otherUser.profile &amp;&amp; otherUser.profile.picture;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> hasPicture ? otherUser.profile.picture : chat.picture || <span class="hljs-string">'/img/user-default.svg'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And we will load our filters:</p>

<p><diffbox step="6.13" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.13</span> <span _ngcontent-dwl-12="" class="commit-summary">Load chat name and picture filters</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/d961a5448a78fc94c117f9f4bd50fd4392695b26">src/app.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">13</pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number">15</pre><pre _ngcontent-dwl-12="" class="line-number">16</pre><pre _ngcontent-dwl-12="" class="line-number">17</pre><pre _ngcontent-dwl-12="" class="line-number">18</pre><pre _ngcontent-dwl-12="" class="line-number">19</pre><pre _ngcontent-dwl-12="" class="line-number">20</pre><pre _ngcontent-dwl-12="" class="line-number"> </pre><pre _ngcontent-dwl-12="" class="line-number">37</pre><pre _ngcontent-dwl-12="" class="line-number">38</pre><pre _ngcontent-dwl-12="" class="line-number">39</pre><pre _ngcontent-dwl-12="" class="line-number">40</pre><pre _ngcontent-dwl-12="" class="line-number">41</pre><pre _ngcontent-dwl-12="" class="line-number">42</pre><pre _ngcontent-dwl-12="" class="line-number">43</pre><pre _ngcontent-dwl-12="" class="line-number">44</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> SettingsCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'./controllers/settings.controller'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> InputDirective <span class="hljs-keyword">from</span> <span class="hljs-string">'./directives/input.directive'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> CalendarFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'./filters/calendar.filter'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> ChatNameFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'./filters/chat-name.filter'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> ChatPictureFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'./filters/chat-picture.filter'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> NewChatService <span class="hljs-keyword">from</span> <span class="hljs-string">'./services/new-chat.service'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> Routes <span class="hljs-keyword">from</span> <span class="hljs-string">'./routes'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(SettingsCtrl)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(InputDirective)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(CalendarFilter)</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  .load(ChatNameFilter)</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  .load(ChatPictureFilter)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(NewChatService)</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  .load(Routes);</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And we will add the usage of these filters in the chats list view:</p>

<p><diffbox step="6.14" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.14</span> <span _ngcontent-dwl-12="" class="commit-summary">Apply chat name and picture filters in chats view</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/3908f61a34dd434fa3f38952e7f5b3ca120afcc3">www/templates/chats.html</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">9</pre><pre _ngcontent-dwl-12="" class="line-number">10</pre><pre _ngcontent-dwl-12="" class="line-number">11</pre><pre _ngcontent-dwl-12="" class="line-number">12</pre><pre _ngcontent-dwl-12="" class="line-number">13</pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number">15</pre><pre _ngcontent-dwl-12="" class="line-number">16</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-context" className="line-context">                class="item-chat item-remove-animate item-avatar item-icon-right"</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">                type="item-text-wrap"</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">                href="#/tab/chats/{{ chat._id }}"&gt;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">ng-src</span>=<span class="hljs-string">"{{ chat | chatPicture }}"</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{ chat | chatName }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ chat.lastMessage.text }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"last-message-timestamp"</span>&gt;</span>{{ chat.lastMessage.timestamp | calendar }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon ion-chevron-right icon-accessory"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And in the chat view:</p>

<p><diffbox step="6.15" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.15</span> <span _ngcontent-dwl-12="" class="commit-summary">Apply chat name and picture filters in chat view</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/29c228879eb38fca56ce69a4a6cf9096f6ff2675">www/templates/chat.html</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">1</pre><pre _ngcontent-dwl-12="" class="line-number">2</pre><pre _ngcontent-dwl-12="" class="line-number">3</pre><pre _ngcontent-dwl-12="" class="line-number">4</pre><pre _ngcontent-dwl-12="" class="line-number">5</pre><pre _ngcontent-dwl-12="" class="line-number">6</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">ion-view</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ chat.data | chatName }}"</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-nav-buttons</span> <span class="hljs-attr">side</span>=<span class="hljs-string">"right"</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header-picture"</span> <span class="hljs-attr">ng-src</span>=<span class="hljs-string">"{{ chat.data | chatPicture }}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-nav-buttons</span>&gt;</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-content</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"chat"</span> <span class="hljs-attr">delegate-handle</span>=<span class="hljs-string">"chatScroll"</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now we want to get rid of the current data we have, which is just a static data.</p>

<p>So let's stop our <code ngNonBindable="">Meteor</code>'s server and reset the whole app by running:</p>

<pre><code ngNonBindable="">$ meteor reset</code></pre>

<p>Let's add some users to the server instead of the old static data:</p>

<p><diffbox step="6.16" tutorial="ionic-tutorial" _nghost-dwl-12=""><div _ngcontent-dwl-12="" class="diffbox">
    <div _ngcontent-dwl-12="" class="title-panel">
        <span _ngcontent-dwl-12="" class="step-number">6.16</span> <span _ngcontent-dwl-12="" class="commit-summary">Create initial users with phone data stubs</span>
        <a _ngcontent-dwl-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/ionic-meteor-whatsapp/commit/18f4aa2a4fb3a554a35d6f35dfd79e0fc1039e9c">api/server/bootstrap.js</a>
    </div>
    <div _ngcontent-dwl-12="" class="code-container">
        <div _ngcontent-dwl-12="" class="scroll-container">
            <div _ngcontent-dwl-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-number">1</pre><pre _ngcontent-dwl-12="" class="line-number">2</pre><pre _ngcontent-dwl-12="" class="line-number">3</pre><pre _ngcontent-dwl-12="" class="line-number">4</pre><pre _ngcontent-dwl-12="" class="line-number">5</pre><pre _ngcontent-dwl-12="" class="line-number">6</pre><pre _ngcontent-dwl-12="" class="line-number">7</pre><pre _ngcontent-dwl-12="" class="line-number">8</pre><pre _ngcontent-dwl-12="" class="line-number">9</pre><pre _ngcontent-dwl-12="" class="line-number">10</pre><pre _ngcontent-dwl-12="" class="line-number">11</pre><pre _ngcontent-dwl-12="" class="line-number">12</pre><pre _ngcontent-dwl-12="" class="line-number">13</pre><pre _ngcontent-dwl-12="" class="line-number">14</pre><pre _ngcontent-dwl-12="" class="line-number">15</pre><pre _ngcontent-dwl-12="" class="line-number">16</pre><pre _ngcontent-dwl-12="" class="line-number">17</pre><pre _ngcontent-dwl-12="" class="line-number">18</pre><pre _ngcontent-dwl-12="" class="line-number">19</pre><pre _ngcontent-dwl-12="" class="line-number">20</pre><pre _ngcontent-dwl-12="" class="line-number">21</pre><pre _ngcontent-dwl-12="" class="line-number">22</pre><pre _ngcontent-dwl-12="" class="line-number">23</pre><pre _ngcontent-dwl-12="" class="line-number">24</pre><pre _ngcontent-dwl-12="" class="line-number">25</pre><pre _ngcontent-dwl-12="" class="line-number">26</pre><pre _ngcontent-dwl-12="" class="line-number">27</pre>
            </div>
            <div _ngcontent-dwl-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-dwl-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Meteor } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Accounts } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/accounts-base'</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">Meteor.startup(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  <span class="hljs-keyword">if</span> (Meteor.users.find().count() != <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  Accounts.createUserWithPhone({</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    phone: <span class="hljs-string">'+972501234567'</span>,</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    profile: {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      name: <span class="hljs-string">'My friend 1'</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">    }</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  });</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  Accounts.createUserWithPhone({</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    phone: <span class="hljs-string">'+972501234568'</span>,</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    profile: {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      name: <span class="hljs-string">'My friend 2'</span></pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">    }</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  });</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">  Accounts.createUserWithPhone({</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    phone: <span class="hljs-string">'+972501234569'</span>,</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    profile: {</pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">      name: <span class="hljs-string">'My friend 3'</span></pre><pre _ngcontent-dwl-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">  });</pre><pre _ngcontent-dwl-12="" class="line-context" className="line-context">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Run it again, and this should be the result of the new Modal we created:</p>

<p><img alt="angular1-wa-ionic-cli" src="/assets/tutorials/angular1-whatsapp-ionic-cli/10.png"></p>

<p>Cool! Now once we click a user a new chat should be created with it.</p>

<p>Our last part of this step is to remove <code ngNonBindable="">Meteor</code>'s package named <code ngNonBindable="">insecure</code>.</p>

<p>This package provides the ability to run <code ngNonBindable="">remove()</code> method from the client side in our collection. This is a behavior we do not want to use because removing data and creating data should be done in the server and only after certain validations, and this is the reason for implementing the <code ngNonBindable="">removeChat()</code> method in the server.</p>

<p><code ngNonBindable="">Meteor</code> includes this package only for development purposes and it should be removed once our app is ready for production.</p>

<p>So remote this package by running this command:</p>

<pre><code ngNonBindable="">$ meteor remove insecure</code></pre></tutorial-page-content>
    </div>
</div></tutorial></app>


</body></html>