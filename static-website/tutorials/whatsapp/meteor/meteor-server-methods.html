<!DOCTYPE html><html lang="en"><head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic,800italic" rel="stylesheet" type="text/css">
    <title>Angular2-Meteor</title>
    <meta charset="UTF-8">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <base href="/">
    <style>.logo[_ngcontent-wlx-1] {
  width: auto;
  height: 2em; }

.main-toolbar[_ngcontent-wlx-1] {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  box-shadow: 3px 0 6px rgba(0, 0, 0, 0.3);
  background: #90A4AE; }
  .main-toolbar[_ngcontent-wlx-1] a[_ngcontent-wlx-1] {
    color: white;
    text-decoration: none; }

.fill-remaining-space[_ngcontent-wlx-1] {
  -ms-flex: 1 1 auto;
      flex: 1 1 auto; }

.tutorials-dropdown[_ngcontent-wlx-1] {
  position: relative;
  display: inline-block; }
  .tutorials-dropdown[_ngcontent-wlx-1] .dropdown-content[_ngcontent-wlx-1] {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 500px;
    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    padding: 7px; }

.tutorials-dropdown[_ngcontent-wlx-1]:hover .dropdown-content[_ngcontent-wlx-1] {
  display: block; }</style><style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0; }

/* Base color: saturation 0; */
.hljs,
.hljs-subst {
  color: #444; }

.hljs-comment {
  color: #888888; }

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold; }

/* User color: hue: 0 */
.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000; }

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold; }

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060; }

/* Language color: hue: 90; */
.hljs-literal {
  color: #78A960; }

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300; }

/* Meta color: hue: 200 */
.hljs-meta {
  color: #1f7199; }

.hljs-meta-string {
  color: #4d99bf; }

/* Misc effects */
.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8; }

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic; }

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold; }

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080; }

.hljs-string,
.hljs-doctag {
  color: #d14; }

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold; }

.hljs-subst {
  font-weight: normal; }

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold; }

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal; }

.hljs-regexp,
.hljs-link {
  color: #009926; }

.hljs-symbol,
.hljs-bullet {
  color: #990073; }

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3; }

.hljs-meta {
  color: #999;
  font-weight: bold; }

.hljs-deletion {
  background: #fdd; }

.hljs-addition {
  background: #dfd; }

.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

a {
  color: black; }

body {
  padding: 0;
  margin: 0;
  padding-top: 64px;
  font-family: 'Open Sans', sans-serif; }

pre {
  background: transparent;
  border: none;
  white-space: pre-wrap; }

code {
  white-space: pre-wrap; }

img[alt="angular1-wa-ionic-cli"], img[alt="angular1-wa-meteor-cli"] {
  width: 30%; }

.side-nav .step-item, .side-nav .api-list-item {
  margin: 0;
  padding: 0;
  border-bottom: 1px solid #CFD8DC;
  color: #546E7A; }

.side-nav .step-link, .side-nav .api-item-link, .side-nav .apis-versions-list li {
  text-decoration: none;
  color: #536E7A;
  display: block;
  font-size: 14px;
  padding: 16px 16px;
  margin: 0;
  background-color: #ECEFF1; }

.side-nav .active-step a {
  font-weight: bold; }

.side-nav .tutorial-steps-list, .side-nav .apis-list, .side-nav .apis-versions-list {
  list-style: none;
  padding-left: 0;
  margin-top: 8px; }

.apis-versions-list {
  margin: 0 !important; }
  .apis-versions-list li {
    padding: 8px !important; }
    .apis-versions-list li a {
      text-decoration: none; }

.dropdown-content {
  column-count: 2;
  column-width: 220px;
  column-rule: 1px solid #ECEFF1;
  column-gap: 0; }
  .dropdown-content .tutorial-steps-list {
    margin: 0 !important;
    list-style: none;
    padding: 0; }
    .dropdown-content .tutorial-steps-list .step-item {
      padding: 5px 0 5px 10px;
      border-bottom: 1px solid #ECEFF1;
      break-inside: avoid-column; }
      .dropdown-content .tutorial-steps-list .step-item a {
        text-decoration: none;
        font-size: small;
        color: black; }
      .dropdown-content .tutorial-steps-list .step-item .bold {
        font-weight: bold; }

.md-primary {
  background: #263238 !important;
  color: white !important;
  cursor: pointer !important; }
  .md-primary[disabled] {
    color: lightgray !important;
    cursor: not-allowed !important; }

tutorial-page-content pre code[ngnonbindable] {
  background: #eee;
  display: block;
  width: 90%;
  border-radius: 5px;
  padding: 10px; }

tutorial-page-content blockquote {
  margin: 0;
  position: relative;
  background: #eee;
  border-radius: 5px; }
  tutorial-page-content blockquote:before {
    content: '!';
    font-weight: bold;
    position: absolute;
    vertical-align: top;
    font-size: 2vw;
    color: white;
    margin-left: 6px; }
  tutorial-page-content blockquote p {
    border-left: 1px solid white;
    padding: 10px;
    margin-left: 20px; }

.diffbox {
  border-radius: 10px; }
  .diffbox .title-panel {
    border-radius: 10px 10px 0 0; }
  .diffbox .code-container {
    border-radius: 0 0 10px 10px; }

api-ref-container p code, api-ref-container ul li code {
  font-family: 'Open Sans', sans-serif; }

api-ref-container a {
  color: #263238;
  text-decoration: none;
  font-weight: bold; }

api-ref-container h3 {
  background: #eee;
  border-radius: 5px;
  padding: 4px;
  margin-top: 30px; }

api-ref-container table {
  width: 100%;
  background: #eee;
  border-radius: 5px;
  border-spacing: 0; }
  api-ref-container table thead {
    background: #546E7A;
    color: #eee;
    border-radius: 5px; }
    api-ref-container table thead tr {
      background: #546E7A;
      border-radius: 5px; }
      api-ref-container table thead tr th {
        padding: 6px; }
  api-ref-container table tbody td {
    padding: 5px; }
</style><style>/** * Mixin that creates a new stacking context. * see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */ /** * This mixin hides an element visually. * That means it's still accessible for screen-readers but not visible in view. */ /** * Forces an element to grow to fit floated contents; used as as an alternative to * `overflow: hidden;` because it doesn't cut off contents. */ /** * A mixin, which generates temporary ink ripple on a given component. * When $bindToParent is set to true, it will check for the focused class on the same selector as you included * that mixin. * It is also possible to specify the color palette of the temporary ripple. By default it uses the * accent palette for its background. */ md-toolbar { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; min-height: 64px; font-size: 20px; font-weight: 400; font-family: Roboto, "Helvetica Neue", sans-serif; padding: 0 16px; -webkit-box-orient: vertical; -webkit-box-direction: normal; -ms-flex-direction: column; flex-direction: column; background: whitesmoke; color: rgba(0, 0, 0, 0.87); } md-toolbar.md-primary { background: #009688; color: white; } md-toolbar.md-accent { background: #9c27b0; color: rgba(255, 255, 255, 0.870588); } md-toolbar.md-warn { background: #f44336; color: white; } md-toolbar md-toolbar-row { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; height: 64px; -webkit-box-orient: horizontal; -webkit-box-direction: normal; -ms-flex-direction: row; flex-direction: row; -webkit-box-align: center; -ms-flex-align: center; align-items: center; } </style><style>/** * A collection of mixins and CSS classes that can be used to apply elevation to a material * element. * See: https://www.google.com/design/spec/what-is-material/elevation-shadows.html * Examples: * * * .md-foo { *   @include $md-elevation(2); * *   &:active { *     @include $md-elevation(8); *   } * } * * <div id="external-card" class="md-elevation-z2"><p>Some content</p></div> * * For an explanation of the design behind how elevation is implemented, see the design doc at * https://goo.gl/Kq0k9Z. */ /** * The css property used for elevation. In most cases this should not be changed. It is exposed * as a variable for abstraction / easy use when needing to reference the property directly, for * example in a will-change rule. */ /** The default duration value for elevation transitions. */ /** The default easing value for elevation transitions. */ /** * Applies the correct css rules to an element to give it the elevation specified by $zValue. * The $zValue must be between 0 and 24. */ /** * Returns a string that can be used as the value for a transition property for elevation. * Calling this function directly is useful in situations where a component needs to transition * more than one property. * * .foo { *   transition: md-elevation-transition-property-value(), opacity 100ms ease; *   will-change: $md-elevation-property, opacity; * } */ /** * Applies the correct css rules needed to have an element transition between elevations. * This mixin should be applied to elements whose elevation values will change depending on their * context (e.g. when active or disabled). */ /** Applies a property to an md-button element for each of the supported palettes. */ /** Applies a focus style to an md-button element for each of the supported palettes. */ [md-raised-button], [md-fab], [md-mini-fab], [md-button], [md-icon-button] { box-sizing: border-box; position: relative; background: transparent; text-align: center; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; outline: none; border: none; display: inline-block; white-space: nowrap; text-decoration: none; vertical-align: baseline; font-size: 14px; font-family: Roboto, "Helvetica Neue", sans-serif; font-weight: 500; color: currentColor; margin: 0; min-width: 88px; line-height: 36px; padding: 0 16px; border-radius: 3px; } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab], .md-primary[md-button], .md-primary[md-icon-button] { color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab], .md-accent[md-button], .md-accent[md-icon-button] { color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab], .md-warn[md-button], .md-warn[md-icon-button] { color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-primary[disabled][md-button], .md-primary[disabled][md-icon-button], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-accent[disabled][md-button], .md-accent[disabled][md-icon-button], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], .md-warn[disabled][md-button], .md-warn[disabled][md-icon-button], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab], [disabled][disabled][md-button], [disabled][disabled][md-icon-button] { color: rgba(0, 0, 0, 0.38); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab], [disabled][md-button], [disabled][md-icon-button] { cursor: default; } .md-button-focus[md-raised-button]::after, .md-button-focus[md-fab]::after, .md-button-focus[md-mini-fab]::after, .md-button-focus[md-button]::after, .md-button-focus[md-icon-button]::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } .md-button-focus.md-primary[md-raised-button]::after, .md-button-focus.md-primary[md-fab]::after, .md-button-focus.md-primary[md-mini-fab]::after, .md-button-focus.md-primary[md-button]::after, .md-button-focus.md-primary[md-icon-button]::after { background-color: rgba(0, 150, 136, 0.12); } .md-button-focus.md-accent[md-raised-button]::after, .md-button-focus.md-accent[md-fab]::after, .md-button-focus.md-accent[md-mini-fab]::after, .md-button-focus.md-accent[md-button]::after, .md-button-focus.md-accent[md-icon-button]::after { background-color: rgba(156, 39, 176, 0.12); } .md-button-focus.md-warn[md-raised-button]::after, .md-button-focus.md-warn[md-fab]::after, .md-button-focus.md-warn[md-mini-fab]::after, .md-button-focus.md-warn[md-button]::after, .md-button-focus.md-warn[md-icon-button]::after { background-color: rgba(244, 67, 54, 0.12); } [md-raised-button], [md-fab], [md-mini-fab] { box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); background-color: #fafafa; -webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0); -webkit-transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { color: white; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { color: rgba(255, 255, 255, 0.870588); } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { color: white; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { color: rgba(0, 0, 0, 0.38); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { background-color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { background-color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { background-color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { background-color: rgba(0, 0, 0, 0.12); } [md-raised-button]:active, [md-fab]:active, [md-mini-fab]:active { box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab] { box-shadow: none; } [md-button][disabled]:hover.md-primary, [md-button][disabled]:hover.md-accent, [md-button][disabled]:hover.md-warn, [md-button][disabled]:hover:hover { background-color: transparent; } [md-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 56px; height: 56px; padding: 0; } [md-fab] i, [md-fab] md-icon { padding: 16px 0; } [md-mini-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 40px; height: 40px; padding: 0; } [md-mini-fab] i, [md-mini-fab] md-icon { padding: 8px 0; } [md-icon-button] { min-width: 0; padding: 0; width: 40px; height: 40px; line-height: 24px; border-radius: 50%; } [md-icon-button] .md-button-wrapper > * { vertical-align: middle; } [md-button]:hover::after, [md-icon-button]:hover::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } [md-button]:hover.md-primary::after, [md-icon-button]:hover.md-primary::after { background-color: rgba(0, 150, 136, 0.12); } [md-button]:hover.md-accent::after, [md-icon-button]:hover.md-accent::after { background-color: rgba(156, 39, 176, 0.12); } [md-button]:hover.md-warn::after, [md-icon-button]:hover.md-warn::after { background-color: rgba(244, 67, 54, 0.12); } @media screen and (-ms-high-contrast: active) { .md-raised-button, .md-fab, .md-mini-fab { border: 1px solid #fff; } } </style><style>.side-nav[_ngcontent-wlx-6] {
  background: #ECEFF1;
  width: 232px;
  bottom: 0;
  overflow: auto;
  z-index: 100;
  border-right: 1px solid rgba(0, 0, 0, 0.3); }
  .side-nav[_ngcontent-wlx-6] ul[_ngcontent-wlx-6] {
    margin-top: 8px; }

tutorials-versions[_ngcontent-wlx-6] {
  margin-left: 10px;
  margin-top: 10px;
  display: block; }

.improv-button[_ngcontent-wlx-6] {
  margin-left: 50px; }

.right-buttons[_ngcontent-wlx-6] {
  float: right;
  margin-right: 250px;
  margin-top: 10px; }

.tutorial-title[_ngcontent-wlx-6] {
  margin: 15px;
  float: left;
  font-size: larger;
  font-weight: bold; }

.top-navigation[_ngcontent-wlx-6] {
  position: fixed;
  margin-top: -60px;
  width: 100%;
  background-color: #ECEFF1;
  height: 60px;
  z-index: 50; }

.tutorial-content[_ngcontent-wlx-6] {
  margin-top: 60px;
  padding: 20px; }

.tutorials-container[_ngcontent-wlx-6] {
  padding-left: 230px; }

.l-pinned-top[_ngcontent-wlx-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px; }

.l-pinned-left[_ngcontent-wlx-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px; }

.l-left[_ngcontent-wlx-6] {
  float: left; }

.l-right[_ngcontent-wlx-6] {
  float: right; }

.l-relative[_ngcontent-wlx-6], .docs-content[_ngcontent-wlx-6] {
  position: relative; }

.l-absolute[_ngcontent-wlx-6] {
  position: absolute; }

.l-fixed[_ngcontent-wlx-6] {
  position: fixed; }

.l-offset-side-nav[_ngcontent-wlx-6] {
  padding-left: 232px; }

.l-offset-nav[_ngcontent-wlx-6] {
  padding-top: 64px; }</style><style>.tutorial-version[_ngcontent-wlx-7] {
            margin-left: 10px;
        }
        
        .active[_ngcontent-wlx-7] {
            color: #b3e5fc !important;
        }</style><style>.diffbox[_ngcontent-wlx-12] {
  border: 1px solid #eee;
  -webkit-text-size-adjust: 100%;
  margin: 1.5em 0; }
  .diffbox[_ngcontent-wlx-12] .title-panel[_ngcontent-wlx-12] {
    padding: 5px 12px;
    background: #eee;
    border-bottom: solid 1px #eee;
    color: #333;
    overflow: auto; }
    .diffbox[_ngcontent-wlx-12] .title-panel[_ngcontent-wlx-12] .github-commit-link[_ngcontent-wlx-12] {
      float: right;
      color: black;
      text-decoration: none;
      border-bottom: none !important; }
  .diffbox[_ngcontent-wlx-12] .code-container[_ngcontent-wlx-12] {
    overflow-x: auto;
    position: relative;
    padding: 9px 3px 3px 0;
    background: #f8f8f8; }
    .diffbox[_ngcontent-wlx-12] .code-container[_ngcontent-wlx-12] .scroll-container[_ngcontent-wlx-12] {
      display: inline-block;
      min-width: 100%;
      overflow: hidden; }
    .diffbox[_ngcontent-wlx-12] .code-container[_ngcontent-wlx-12] pre[_ngcontent-wlx-12] {
      margin: 0;
      padding: 0;
      background-color: transparent; }
      .diffbox[_ngcontent-wlx-12] .code-container[_ngcontent-wlx-12] pre.line-added[_ngcontent-wlx-12] {
        background: #eaffea; }
      .diffbox[_ngcontent-wlx-12] .code-container[_ngcontent-wlx-12] pre.line-removed[_ngcontent-wlx-12] {
        background: #ff9ea2; }
    .diffbox[_ngcontent-wlx-12] .code-container[_ngcontent-wlx-12] .line-content[_ngcontent-wlx-12] {
      padding-left: 36px;
      overflow: hidden; }
      .diffbox[_ngcontent-wlx-12] .code-container[_ngcontent-wlx-12] .line-content[_ngcontent-wlx-12] .hljs-comment[_ngcontent-wlx-12] {
        color: #777; }
    .diffbox[_ngcontent-wlx-12] .code-container[_ngcontent-wlx-12] .line-numbers[_ngcontent-wlx-12] {
      text-align: right;
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      -o-user-select: none;
      position: absolute;
      width: 25px; }
      .diffbox[_ngcontent-wlx-12] .code-container[_ngcontent-wlx-12] .line-numbers[_ngcontent-wlx-12] .line-number[_ngcontent-wlx-12] {
        color: #aaa;
        font-style: italic; }</style></head><body><universal-styles></universal-styles>


<app _nghost-wlx-1=""><md-toolbar _ngcontent-wlx-1="" class="main-toolbar md-primary"><div class="md-toolbar-layout"> <md-toolbar-row> 
    <a _ngcontent-wlx-1="" href="/"><img _ngcontent-wlx-1="" class="logo" src="/assets/images/logo.png"></a>
    <div _ngcontent-wlx-1="" class="tutorials-dropdown">
        <button _ngcontent-wlx-1="" md-button=""><span class="md-button-wrapper">Tutorials</span> </button>
        <div _ngcontent-wlx-1="" class="dropdown-content">
            <steps-list _ngcontent-wlx-1="" prefix="/tutorials/socially"><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/folder-structure">8. Folder Structure</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/css-sass-and-bootstrap">18. CSS, SASS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ionic2">23. Ionic2</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/next-steps">25. Next Steps</a>
    </li>
    <!--template bindings={}--><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/whatsapp">WhatsApp clone with Angular &amp; Meteor</a>
    </li><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/migration/angular2/introduction">Blaze to Angular 2 Migration tutorial</a>
    </li>
</ul>
</steps-list>
        </div>
    </div>
    <a _ngcontent-wlx-1="" href="/angular2/"><button _ngcontent-wlx-1="" md-button=""><span class="md-button-wrapper">Angular 2</span> </button></a>
    <a _ngcontent-wlx-1="" href="/api/angular2-meteor/latest/MeteorComponent"><button _ngcontent-wlx-1="" md-button=""><span class="md-button-wrapper">API Reference</span> </button></a>
    <span _ngcontent-wlx-1="" class="fill-remaining-space"></span>
    <a _ngcontent-wlx-1="" href="https://github.com/Urigo/angular2-meteor" target="_blank"><button _ngcontent-wlx-1="" md-button=""><span class="md-button-wrapper">GitHub</span> </button></a>
    <a _ngcontent-wlx-1="" href="http://info.meteor.com/blog/author/uri-goldshtein?__hstc=219992390.b4a81f3b906b078dac633307097097f5.1471207723059.1471890076881.1471938647239.7&amp;__hssc=219992390.3.1471938647239&amp;__hsfp=714783454" target="_blank"><button _ngcontent-wlx-1="" md-button=""><span class="md-button-wrapper">Blog</span> </button></a>
    <a _ngcontent-wlx-1="" href="https://docs.google.com/forms/d/e/1FAIpQLSed3JZ0EAcSzkX8Y-iEtvNQRfjeyP2ICQvYMs00ewdmKaplwA/viewform" target="_blank"><button _ngcontent-wlx-1="" md-button=""><span class="md-button-wrapper">Contact Us</span> </button></a>
    <a _ngcontent-wlx-1="" href="/manifesto"><button _ngcontent-wlx-1="" md-button=""><span class="md-button-wrapper">Manifesto</span> </button></a>
    <a _ngcontent-wlx-1="" href="/about"><button _ngcontent-wlx-1="" md-button=""><span class="md-button-wrapper">About us</span> </button></a>
 </md-toolbar-row>  </div></md-toolbar>
<router-outlet _ngcontent-wlx-1=""></router-outlet><tutorial _nghost-wlx-6=""><div _ngcontent-wlx-6="" class="tutorials-container">
    <nav _ngcontent-wlx-6="" class="side-nav l-pinned-left l-layer-4 l-offset-nav">
        <tutorials-versions _ngcontent-wlx-6="" _nghost-wlx-7=""><!--template bindings={}--></tutorials-versions>
        <steps-list _ngcontent-wlx-6=""><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/bootstrapping">1. Bootstrapping</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/layout">2. Layout, coding style &amp; structure</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/realtime-meteor-server">3. Realtime Meteor server</a>
    </li><li class="step-item active-step" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/meteor-server-methods">4. Chat view and send messages</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/authentication">5. Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/modify-chats">6. Create and remove chats</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/privacy">7. Privacy</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/user-profile-picture">8. User profile picture</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/image-upload">9. Send image messages</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/whatsapp/meteor/summary">10. Summary</a>
    </li>
    <!--template bindings={}-->
</ul>
</steps-list>
    </nav>
    <div _ngcontent-wlx-6="" class="top-navigation">
        <span _ngcontent-wlx-6="" class="tutorial-title" stepName="">Chat view and send messages</span>
        <div _ngcontent-wlx-6="" class="right-buttons">
            <a _ngcontent-wlx-6="" class="md-primary" md-raised-button="" tutorialNavigation="previous" href="/tutorials/whatsapp/meteor/realtime-meteor-server">Previous</a>
            <a _ngcontent-wlx-6="" class="md-primary" codeDiffLink="" md-raised-button="" href="https://github.com/DAB0mB/angular-meteor-whatsapp/compare/step_02...step_03">Code Diff</a>
            <a _ngcontent-wlx-6="" class="md-primary" md-raised-button="" tutorialNavigation="next" href="/tutorials/whatsapp/meteor/authentication">Next</a>
            <a _ngcontent-wlx-6="" class="md-primary improv-button" md-raised-button="" href="https://github.com/Urigo/tutorial-infrastructure/edit/master/static-website/tutorials/whatsapp/meteor/meteor-server-methods.html">Improve This Document</a>
        </div>
    </div>
    <div _ngcontent-wlx-6="" class="tutorial-content">
        <router-outlet _ngcontent-wlx-6=""></router-outlet><tutorial-page><div class="tutorial-container"></div></tutorial-page><tutorial-page-content><p>In this step we will add the chat view and the ability to send messages.</p>

<p>We still don't have an identity for each user, we will add it later, but we can still send messages to existing chats.</p>

<p>So just like any other page, first we need to add a route and a state.</p>

<p>Let's call it <code ngNonBindable="">chat</code> and we will load a template and a controller which we will add later.</p>

<p><diffbox step="3.1" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.1</span> <span _ngcontent-wlx-12="" class="commit-summary">Add chat route state</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/5ba4d19e48e21dbb83d174b7e32dc50380b64225">client/scripts/routes.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">16</pre><pre _ngcontent-wlx-12="" class="line-number">17</pre><pre _ngcontent-wlx-12="" class="line-number">18</pre><pre _ngcontent-wlx-12="" class="line-number">19</pre><pre _ngcontent-wlx-12="" class="line-number">20</pre><pre _ngcontent-wlx-12="" class="line-number">21</pre><pre _ngcontent-wlx-12="" class="line-number">22</pre><pre _ngcontent-wlx-12="" class="line-number">23</pre><pre _ngcontent-wlx-12="" class="line-number">24</pre><pre _ngcontent-wlx-12="" class="line-number">25</pre><pre _ngcontent-wlx-12="" class="line-number">26</pre><pre _ngcontent-wlx-12="" class="line-number">27</pre><pre _ngcontent-wlx-12="" class="line-number">28</pre><pre _ngcontent-wlx-12="" class="line-number">29</pre><pre _ngcontent-wlx-12="" class="line-number">30</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context">            controller: <span class="hljs-string">'ChatsCtrl as chats'</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">          }</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">        }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      })</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      .state(<span class="hljs-string">'tab.chat'</span>, {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        url: <span class="hljs-string">'/chats/:chatId'</span>,</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        views: {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">          <span class="hljs-string">'tab-chats'</span>: {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">            templateUrl: <span class="hljs-string">'client/templates/chat.html'</span>,</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">            controller: <span class="hljs-string">'ChatCtrl as chat'</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">          }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        }</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">      });</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.$urlRouterProvider.otherwise(<span class="hljs-string">'tab/chats'</span>);</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Let's add a very basic view with the chat's details. The file will be located in <code ngNonBindable="">client/templates/chat.html</code>:</p>

<p><diffbox step="3.2" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.2</span> <span _ngcontent-wlx-12="" class="commit-summary">Add chat view</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/e15c9db4237c249983d03e1913b00068ca9e468f">client/templates/chat.html</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">1</pre><pre _ngcontent-wlx-12="" class="line-number">2</pre><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">ion-view</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{chat.data.name}}"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-nav-buttons</span> <span class="hljs-attr">side</span>=<span class="hljs-string">"right"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header-picture"</span> <span class="hljs-attr">ng-src</span>=<span class="hljs-string">"{{chat.data.picture}}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-nav-buttons</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;/<span class="hljs-name">ion-view</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now we need to implement the logic in the controller, so let's create it in <code ngNonBindable="">client/scripts/controllers/chat.controller.js</code> and call it <code ngNonBindable="">ChatCtrl</code>.</p>

<p>We will use the <code ngNonBindable="">$stateParams</code> provider to get the chat id and then we will define a helper that will help us fetch the chat that we want.</p>

<p>So in order to do that we shall define a helper named <code ngNonBindable="">chat</code>, and use <code ngNonBindable="">findOne()</code> to fetch the wanted document.</p>

<p><diffbox step="3.3" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.3</span> <span _ngcontent-wlx-12="" class="commit-summary">Add chat controller</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/8d1a1e01b40d9f18b5b6d895635d14da2583701f">client/scripts/controllers/chat.controller.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">1</pre><pre _ngcontent-wlx-12="" class="line-number">2</pre><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number">6</pre><pre _ngcontent-wlx-12="" class="line-number">7</pre><pre _ngcontent-wlx-12="" class="line-number">8</pre><pre _ngcontent-wlx-12="" class="line-number">9</pre><pre _ngcontent-wlx-12="" class="line-number">10</pre><pre _ngcontent-wlx-12="" class="line-number">11</pre><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre><pre _ngcontent-wlx-12="" class="line-number">14</pre><pre _ngcontent-wlx-12="" class="line-number">15</pre><pre _ngcontent-wlx-12="" class="line-number">16</pre><pre _ngcontent-wlx-12="" class="line-number">17</pre><pre _ngcontent-wlx-12="" class="line-number">18</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Controller } <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Chats } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../lib/collections'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChatCtrl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span>{</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">super</span>(...arguments);</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.chatId = <span class="hljs-keyword">this</span>.$stateParams.chatId;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.helpers({</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      data() {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        <span class="hljs-keyword">return</span> Chats.findOne(<span class="hljs-keyword">this</span>.chatId);</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">}</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">ChatCtrl.$inject = [<span class="hljs-string">'$stateParams'</span>];</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="3.4" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.4</span> <span _ngcontent-wlx-12="" class="commit-summary">Load chat controller</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/961ee4f688f5f341840685345d5d7048bfc42f3b">client/scripts/lib/app.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">10</pre><pre _ngcontent-wlx-12="" class="line-number">11</pre><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre><pre _ngcontent-wlx-12="" class="line-number">14</pre><pre _ngcontent-wlx-12="" class="line-number">15</pre><pre _ngcontent-wlx-12="" class="line-number">16</pre><pre _ngcontent-wlx-12="" class="line-number"> </pre><pre _ngcontent-wlx-12="" class="line-number">24</pre><pre _ngcontent-wlx-12="" class="line-number">25</pre><pre _ngcontent-wlx-12="" class="line-number">26</pre><pre _ngcontent-wlx-12="" class="line-number">27</pre><pre _ngcontent-wlx-12="" class="line-number">28</pre><pre _ngcontent-wlx-12="" class="line-number">29</pre><pre _ngcontent-wlx-12="" class="line-number">30</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-comment">// Modules</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> ChatsCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/chats.controller'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> ChatCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/chat.controller'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> CalendarFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'../filters/calendar.filter'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> RoutesConfig <span class="hljs-keyword">from</span> <span class="hljs-string">'../routes'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">new</span> Loader(App)</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  .load(ChatsCtrl)</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  .load(ChatCtrl)</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  .load(CalendarFilter)</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  .load(RoutesConfig);</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>So now that we have the chat view and controller, all is left to do is to link these two:</p>

<p><diffbox step="3.5" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.5</span> <span _ngcontent-wlx-12="" class="commit-summary">Add reference to chat view in chats view</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/6317f3979b5d485eb601b6c5353da7bc5288b649">client/templates/chats.html</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number">6</pre><pre _ngcontent-wlx-12="" class="line-number">7</pre><pre _ngcontent-wlx-12="" class="line-number">8</pre><pre _ngcontent-wlx-12="" class="line-number">9</pre><pre _ngcontent-wlx-12="" class="line-number">10</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">ion-list</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">      <span class="hljs-tag">&lt;<span class="hljs-name">ion-item</span> <span class="hljs-attr">ng-repeat</span>=<span class="hljs-string">"chat in chats.data | orderBy:'-lastMessage.timestamp'"</span></span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">                class="item-chat item-remove-animate item-avatar item-icon-right"</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">                type="item-text-wrap"</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">                href="#/tab/chats/{{ chat._id }}"&gt;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">ng-src</span>=<span class="hljs-string">"{{ chat.picture }}"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{ chat.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ chat.lastMessage.text }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>So far this is how our chat should look like:</p>

<p><img alt="angular1-wa-meteor-cli" src="/assets/tutorials/angular1-whatsapp-meteor-cli/7.png"></p>

<p>Now let's add some <code ngNonBindable="">css</code> rules and let's add the messages view.</p>

<p>Let's create a new <code ngNonBindable="">sass</code> file for our view at <code ngNonBindable="">client/styles/chat.scss</code>, and fix the image style so it won't look silly:</p>

<p><diffbox step="3.6" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.6</span> <span _ngcontent-wlx-12="" class="commit-summary">Add chat stylesheet</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/24e32b93c600b7e3aa48c831927e43251f0c025a">client/styles/chat.scss</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">1</pre><pre _ngcontent-wlx-12="" class="line-number">2</pre><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number">6</pre><pre _ngcontent-wlx-12="" class="line-number">7</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-selector-class">.header-picture</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">33px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">33px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Our next step is about getting the chat's messages in the controller, we will add another helper, but instead of using the whole collection we will fetch only the relevant messages:</p>

<p><diffbox step="3.7" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.7</span> <span _ngcontent-wlx-12="" class="commit-summary">Add messages helper to chat controller</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/40f4d2974371ff24cfa1fa6f9c6b35aef63d6378">client/scripts/controllers/chat.controller.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">1</pre><pre _ngcontent-wlx-12="" class="line-number">2</pre><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number"> </pre><pre _ngcontent-wlx-12="" class="line-number">8</pre><pre _ngcontent-wlx-12="" class="line-number">9</pre><pre _ngcontent-wlx-12="" class="line-number">10</pre><pre _ngcontent-wlx-12="" class="line-number">11</pre><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre><pre _ngcontent-wlx-12="" class="line-number">14</pre><pre _ngcontent-wlx-12="" class="line-number">15</pre><pre _ngcontent-wlx-12="" class="line-number">16</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Controller } <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Chats, Messages } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../lib/collections'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChatCtrl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span>{</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-wlx-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.chatId = <span class="hljs-keyword">this</span>.$stateParams.chatId;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.helpers({</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      messages() {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        <span class="hljs-keyword">return</span> Messages.find({ chatId: <span class="hljs-keyword">this</span>.chatId });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      },</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">      data() {</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">        <span class="hljs-keyword">return</span> Chats.findOne(<span class="hljs-keyword">this</span>.chatId);</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">      }</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And now to add it to the view, we use <code ngNonBindable="">ng-repeat</code> to iterate the messages:</p>

<p><diffbox step="3.8" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.8</span> <span _ngcontent-wlx-12="" class="commit-summary">Add messages to chat view</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/172564b03059b3f41ebcbf57e83aeddc8d21f5b8">client/templates/chat.html</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">1</pre><pre _ngcontent-wlx-12="" class="line-number">2</pre><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number">6</pre><pre _ngcontent-wlx-12="" class="line-number">7</pre><pre _ngcontent-wlx-12="" class="line-number">8</pre><pre _ngcontent-wlx-12="" class="line-number">9</pre><pre _ngcontent-wlx-12="" class="line-number">10</pre><pre _ngcontent-wlx-12="" class="line-number">11</pre><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre><pre _ngcontent-wlx-12="" class="line-number">14</pre><pre _ngcontent-wlx-12="" class="line-number">15</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">ion-view</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"{{ chat.data.name }}"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-nav-buttons</span> <span class="hljs-attr">side</span>=<span class="hljs-string">"right"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header-picture"</span> <span class="hljs-attr">ng-src</span>=<span class="hljs-string">"{{ chat.data.picture }}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-nav-buttons</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-content</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"chat"</span> <span class="hljs-attr">delegate-handle</span>=<span class="hljs-string">"chatScroll"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-list"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ng-repeat</span>=<span class="hljs-string">"message in chat.messages"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-wrapper"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message"</span> <span class="hljs-attr">ng-class-even</span>=<span class="hljs-string">"'message-mine'"</span> <span class="hljs-attr">ng-class-odd</span>=<span class="hljs-string">"'message-other'"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-text"</span>&gt;</span>{{ message.text }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-timestamp"</span>&gt;</span>{{ message.timestamp }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-content</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-tag">&lt;/<span class="hljs-name">ion-view</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>As for now we do not have an identity for each user or message, so we will just use <code ngNonBindable="">odd</code>/<code ngNonBindable="">even</code> classes and this will be the indication for which message is mine and which isn't. In the next step we will add the authentication and each message will be related to a user.</p>

<p>Now we will add some <code ngNonBindable="">css</code> to the messages list:</p>

<p><diffbox step="3.9" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.9</span> <span _ngcontent-wlx-12="" class="commit-summary">Add message style to chat stylesheet</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/11b4657c8d68821ee99f0120c55ca750e0d4ff42">client/styles/chat.scss</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number">6</pre><pre _ngcontent-wlx-12="" class="line-number">7</pre><pre _ngcontent-wlx-12="" class="line-number">8</pre><pre _ngcontent-wlx-12="" class="line-number">9</pre><pre _ngcontent-wlx-12="" class="line-number">10</pre><pre _ngcontent-wlx-12="" class="line-number">11</pre><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre><pre _ngcontent-wlx-12="" class="line-number">14</pre><pre _ngcontent-wlx-12="" class="line-number">15</pre><pre _ngcontent-wlx-12="" class="line-number">16</pre><pre _ngcontent-wlx-12="" class="line-number">17</pre><pre _ngcontent-wlx-12="" class="line-number">18</pre><pre _ngcontent-wlx-12="" class="line-number">19</pre><pre _ngcontent-wlx-12="" class="line-number">20</pre><pre _ngcontent-wlx-12="" class="line-number">21</pre><pre _ngcontent-wlx-12="" class="line-number">22</pre><pre _ngcontent-wlx-12="" class="line-number">23</pre><pre _ngcontent-wlx-12="" class="line-number">24</pre><pre _ngcontent-wlx-12="" class="line-number">25</pre><pre _ngcontent-wlx-12="" class="line-number">26</pre><pre _ngcontent-wlx-12="" class="line-number">27</pre><pre _ngcontent-wlx-12="" class="line-number">28</pre><pre _ngcontent-wlx-12="" class="line-number">29</pre><pre _ngcontent-wlx-12="" class="line-number">30</pre><pre _ngcontent-wlx-12="" class="line-number">31</pre><pre _ngcontent-wlx-12="" class="line-number">32</pre><pre _ngcontent-wlx-12="" class="line-number">33</pre><pre _ngcontent-wlx-12="" class="line-number">34</pre><pre _ngcontent-wlx-12="" class="line-number">35</pre><pre _ngcontent-wlx-12="" class="line-number">36</pre><pre _ngcontent-wlx-12="" class="line-number">37</pre><pre _ngcontent-wlx-12="" class="line-number">38</pre><pre _ngcontent-wlx-12="" class="line-number">39</pre><pre _ngcontent-wlx-12="" class="line-number">40</pre><pre _ngcontent-wlx-12="" class="line-number">41</pre><pre _ngcontent-wlx-12="" class="line-number">42</pre><pre _ngcontent-wlx-12="" class="line-number">43</pre><pre _ngcontent-wlx-12="" class="line-number">44</pre><pre _ngcontent-wlx-12="" class="line-number">45</pre><pre _ngcontent-wlx-12="" class="line-number">46</pre><pre _ngcontent-wlx-12="" class="line-number">47</pre><pre _ngcontent-wlx-12="" class="line-number">48</pre><pre _ngcontent-wlx-12="" class="line-number">49</pre><pre _ngcontent-wlx-12="" class="line-number">50</pre><pre _ngcontent-wlx-12="" class="line-number">51</pre><pre _ngcontent-wlx-12="" class="line-number">52</pre><pre _ngcontent-wlx-12="" class="line-number">53</pre><pre _ngcontent-wlx-12="" class="line-number">54</pre><pre _ngcontent-wlx-12="" class="line-number">55</pre><pre _ngcontent-wlx-12="" class="line-number">56</pre><pre _ngcontent-wlx-12="" class="line-number">57</pre><pre _ngcontent-wlx-12="" class="line-number">58</pre><pre _ngcontent-wlx-12="" class="line-number">59</pre><pre _ngcontent-wlx-12="" class="line-number">60</pre><pre _ngcontent-wlx-12="" class="line-number">61</pre><pre _ngcontent-wlx-12="" class="line-number">62</pre><pre _ngcontent-wlx-12="" class="line-number">63</pre><pre _ngcontent-wlx-12="" class="line-number">64</pre><pre _ngcontent-wlx-12="" class="line-number">65</pre><pre _ngcontent-wlx-12="" class="line-number">66</pre><pre _ngcontent-wlx-12="" class="line-number">67</pre><pre _ngcontent-wlx-12="" class="line-number">68</pre><pre _ngcontent-wlx-12="" class="line-number">69</pre><pre _ngcontent-wlx-12="" class="line-number">70</pre><pre _ngcontent-wlx-12="" class="line-number">71</pre><pre _ngcontent-wlx-12="" class="line-number">72</pre><pre _ngcontent-wlx-12="" class="line-number">73</pre><pre _ngcontent-wlx-12="" class="line-number">74</pre><pre _ngcontent-wlx-12="" class="line-number">75</pre><pre _ngcontent-wlx-12="" class="line-number">76</pre><pre _ngcontent-wlx-12="" class="line-number">77</pre><pre _ngcontent-wlx-12="" class="line-number">78</pre><pre _ngcontent-wlx-12="" class="line-number">79</pre><pre _ngcontent-wlx-12="" class="line-number">80</pre><pre _ngcontent-wlx-12="" class="line-number">81</pre><pre _ngcontent-wlx-12="" class="line-number">82</pre><pre _ngcontent-wlx-12="" class="line-number">83</pre><pre _ngcontent-wlx-12="" class="line-number">84</pre><pre _ngcontent-wlx-12="" class="line-number">85</pre><pre _ngcontent-wlx-12="" class="line-number">86</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">}</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-selector-class">.chat</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">background-image</span>: url(/chat-background.jpg);</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#E0DAD6</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">background-repeat</span>: no-repeat;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">100%</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">}</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-selector-class">.message-list</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">12px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">5%</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">}</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-selector-class">.message-wrapper</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">9px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  &amp;::after {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">display</span>: table;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">clear</span>: both;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">}</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-selector-class">.message</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">display</span>: inline-block;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">position</span>: relative;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">236px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">7px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> rgba(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, .<span class="hljs-number">15</span>);</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  &amp;<span class="hljs-selector-class">.message-mine</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">float</span>: right;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#DCF8C6</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  &amp;<span class="hljs-selector-class">.message-other</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">float</span>: left;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#FFF</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  &amp;<span class="hljs-selector-class">.message-other</span>::before, &amp;<span class="hljs-selector-class">.message-mine</span>::before, {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">position</span>: absolute;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">3px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">width</span>: <span class="hljs-number">12px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">height</span>: <span class="hljs-number">19px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">background-position</span>: <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">background-repeat</span>: no-repeat;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">background-size</span>: contain;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  &amp;<span class="hljs-selector-class">.message-other</span>::before {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">left</span>: -<span class="hljs-number">11px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">background-image</span>: url(/message-other.png)</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  &amp;<span class="hljs-selector-class">.message-mine</span>::before {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">right</span>: -<span class="hljs-number">11px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">background-image</span>: url(/message-mine.png)</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-selector-class">.message-text</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">7px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">word-wrap</span>: break-word;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    &amp;::after {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-attribute">content</span>: <span class="hljs-string">" \00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0\00a0"</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-attribute">display</span>: inline;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-selector-class">.message-timestamp</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">position</span>: absolute;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">2px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">right</span>: <span class="hljs-number">7px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">color</span>: gray;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>We also need to add some <code ngNonBindable="">Whatsapp</code> assets so it would look more similar.</p>

<p>Note that the images are under <code ngNonBindable="">public/</code> folder so we can use them in the client side from the root directory (in the <code ngNonBindable="">css</code> file).</p>

<p>You can copy them from <a href="https://github.com/DAB0mB/angular-meteor-whatsapp/tree/master/public">here</a>.</p>

<p>And should be the result:</p>

<p><img alt="angular1-wa-meteor-cli" src="/assets/tutorials/angular1-whatsapp-meteor-cli/8.png"></p>

<p>Now we just need to take care of the message timestamp and format it.</p>

<p>We will use <code ngNonBindable="">moment</code> like before, but now let's add another package called <a href="https://github.com/urish/angular-moment">angular-moment</a> that provides us the UI filters.</p>

<p>So adding the package is just like any other package we added so far:</p>

<pre><code ngNonBindable="">$ meteor npm install angular-moment --save</code></pre>

<p>And since it's an <code ngNonBindable="">AngularJS</code> extension, we need to add a dependency in our module definition:</p>

<p><diffbox step="3.12" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.12</span> <span _ngcontent-wlx-12="" class="commit-summary">Load angular-moment</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/ca43d07cffbb3b3bb0542eb1fbe04a56a9cd97aa">client/scripts/lib/app.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">1</pre><pre _ngcontent-wlx-12="" class="line-number">2</pre><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number">6</pre><pre _ngcontent-wlx-12="" class="line-number">7</pre><pre _ngcontent-wlx-12="" class="line-number"> </pre><pre _ngcontent-wlx-12="" class="line-number">20</pre><pre _ngcontent-wlx-12="" class="line-number">21</pre><pre _ngcontent-wlx-12="" class="line-number">22</pre><pre _ngcontent-wlx-12="" class="line-number">23</pre><pre _ngcontent-wlx-12="" class="line-number">24</pre><pre _ngcontent-wlx-12="" class="line-number">25</pre><pre _ngcontent-wlx-12="" class="line-number">26</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-comment">// Libs</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-animate'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-meteor'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-moment'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-sanitize'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'angular-ui-router'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> <span class="hljs-string">'ionic-scripts'</span>;</pre><pre _ngcontent-wlx-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-comment">// App</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">Angular.module(App, [</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  <span class="hljs-string">'angular-meteor'</span>,</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-string">'angularMoment'</span>,</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  <span class="hljs-string">'ionic'</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">]);</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And now we will use a filter from this package in our view:</p>

<p><diffbox step="3.13" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.13</span> <span _ngcontent-wlx-12="" class="commit-summary">Add moment filter to chat view</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/15c25541f3c72361bb5c6932dfac7f4b36d58879">client/templates/chat.html</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">7</pre><pre _ngcontent-wlx-12="" class="line-number">8</pre><pre _ngcontent-wlx-12="" class="line-number">9</pre><pre _ngcontent-wlx-12="" class="line-number">10</pre><pre _ngcontent-wlx-12="" class="line-number">11</pre><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ng-repeat</span>=<span class="hljs-string">"message in chat.messages"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-wrapper"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message"</span> <span class="hljs-attr">ng-class-even</span>=<span class="hljs-string">"'message-mine'"</span> <span class="hljs-attr">ng-class-odd</span>=<span class="hljs-string">"'message-other'"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-text"</span>&gt;</span>{{ message.text }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"message-timestamp"</span>&gt;</span>{{ message.timestamp | amDateFormat: 'HH:MM' }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And the result is:</p>

<p><img alt="angular1-wa-meteor-cli" src="/assets/tutorials/angular1-whatsapp-meteor-cli/9.png"></p>

<p>Just like <code ngNonBindable="">Whatsapp</code>...</p>

<p>Our next step is about adding the input for adding a new message to the chat, we need to add an input at the bottom of the view. <code ngNonBindable="">ion-footer-bar</code> provides a perfect solution for that.</p>

<p>So we will add an input, a send button and some icons for sending images and sound recordings (For now we will live them just so our view would look reach without any logic implemented behind).</p>

<p><diffbox step="3.14" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.14</span> <span _ngcontent-wlx-12="" class="commit-summary">Add chatbox to chat view</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/6e781337f85c25daeedcc1bfb58c0930bdfb3261">client/templates/chat.html</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre><pre _ngcontent-wlx-12="" class="line-number">14</pre><pre _ngcontent-wlx-12="" class="line-number">15</pre><pre _ngcontent-wlx-12="" class="line-number">16</pre><pre _ngcontent-wlx-12="" class="line-number">17</pre><pre _ngcontent-wlx-12="" class="line-number">18</pre><pre _ngcontent-wlx-12="" class="line-number">19</pre><pre _ngcontent-wlx-12="" class="line-number">20</pre><pre _ngcontent-wlx-12="" class="line-number">21</pre><pre _ngcontent-wlx-12="" class="line-number">22</pre><pre _ngcontent-wlx-12="" class="line-number">23</pre><pre _ngcontent-wlx-12="" class="line-number">24</pre><pre _ngcontent-wlx-12="" class="line-number">25</pre><pre _ngcontent-wlx-12="" class="line-number">26</pre><pre _ngcontent-wlx-12="" class="line-number">27</pre><pre _ngcontent-wlx-12="" class="line-number">28</pre><pre _ngcontent-wlx-12="" class="line-number">29</pre><pre _ngcontent-wlx-12="" class="line-number">30</pre><pre _ngcontent-wlx-12="" class="line-number">31</pre><pre _ngcontent-wlx-12="" class="line-number">32</pre><pre _ngcontent-wlx-12="" class="line-number">33</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-content</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;<span class="hljs-name">ion-footer-bar</span> <span class="hljs-attr">keyboard-attach</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bar-stable footer-chat item-input-inset"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear button-icon button-positive icon ion-ios-upload-outline"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-input-wrapper"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ng-model</span>=<span class="hljs-string">"chat.message"</span></span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">             dir="auto"</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">             type="text"/&gt;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">ng-if</span>=<span class="hljs-string">"chat.message.length &gt; 0"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ng-click</span>=<span class="hljs-string">"chat.sendMessage()"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear button-positive"</span>&gt;</span>Send<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">ng-if</span>=<span class="hljs-string">"!chat.message || chat.message.length === 0"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear button-icon button-positive icon ion-ios-camera-outline"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"buttons-seperator icon ion-android-more-vertical"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button button-clear button-icon button-positive icon ion-ios-mic-outline"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-tag">&lt;/<span class="hljs-name">ion-footer-bar</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-tag">&lt;/<span class="hljs-name">ion-view</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Let's add the <code ngNonBindable="">data</code> object to our controller, and add a stub method for <code ngNonBindable="">sendMessage()</code>, which will be implemented further in this tutorial.</p>

<p><diffbox step="3.15" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.15</span> <span _ngcontent-wlx-12="" class="commit-summary">Add chatbox logic to chat controller</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/db1e590ae2b63a762e480655f32ece1d30824d3a">client/scripts/controllers/chat.controller.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">16</pre><pre _ngcontent-wlx-12="" class="line-number">17</pre><pre _ngcontent-wlx-12="" class="line-number">18</pre><pre _ngcontent-wlx-12="" class="line-number">19</pre><pre _ngcontent-wlx-12="" class="line-number">20</pre><pre _ngcontent-wlx-12="" class="line-number">21</pre><pre _ngcontent-wlx-12="" class="line-number">22</pre><pre _ngcontent-wlx-12="" class="line-number">23</pre><pre _ngcontent-wlx-12="" class="line-number">24</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context">      }</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    });</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  sendMessage() {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">}</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">ChatCtrl.$inject = [<span class="hljs-string">'$stateParams'</span>];</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And this is what we got so far:</p>

<p><img alt="angular1-wa-meteor-cli" src="/assets/tutorials/angular1-whatsapp-meteor-cli/10.png"></p>

<p>To improve the user experience in our app, we want some extra events to our input because we want to move it up when the keyboard comes from the bottom of the screen and we want to know if the <code ngNonBindable="">return</code> button (aka <code ngNonBindable="">Enter</code>) was pressed.</p>

<p>We will implement a new directive that extends the regular <code ngNonBindable="">input</code> tag and add those events to the directive:</p>

<p><diffbox step="3.16" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.16</span> <span _ngcontent-wlx-12="" class="commit-summary">Add input directive</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/6e99c9812ef2f50c9e43cc0a3ca6a2f2978e553e">client/scripts/directives/input.directive.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">1</pre><pre _ngcontent-wlx-12="" class="line-number">2</pre><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number">6</pre><pre _ngcontent-wlx-12="" class="line-number">7</pre><pre _ngcontent-wlx-12="" class="line-number">8</pre><pre _ngcontent-wlx-12="" class="line-number">9</pre><pre _ngcontent-wlx-12="" class="line-number">10</pre><pre _ngcontent-wlx-12="" class="line-number">11</pre><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre><pre _ngcontent-wlx-12="" class="line-number">14</pre><pre _ngcontent-wlx-12="" class="line-number">15</pre><pre _ngcontent-wlx-12="" class="line-number">16</pre><pre _ngcontent-wlx-12="" class="line-number">17</pre><pre _ngcontent-wlx-12="" class="line-number">18</pre><pre _ngcontent-wlx-12="" class="line-number">19</pre><pre _ngcontent-wlx-12="" class="line-number">20</pre><pre _ngcontent-wlx-12="" class="line-number">21</pre><pre _ngcontent-wlx-12="" class="line-number">22</pre><pre _ngcontent-wlx-12="" class="line-number">23</pre><pre _ngcontent-wlx-12="" class="line-number">24</pre><pre _ngcontent-wlx-12="" class="line-number">25</pre><pre _ngcontent-wlx-12="" class="line-number">26</pre><pre _ngcontent-wlx-12="" class="line-number">27</pre><pre _ngcontent-wlx-12="" class="line-number">28</pre><pre _ngcontent-wlx-12="" class="line-number">29</pre><pre _ngcontent-wlx-12="" class="line-number">30</pre><pre _ngcontent-wlx-12="" class="line-number">31</pre><pre _ngcontent-wlx-12="" class="line-number">32</pre><pre _ngcontent-wlx-12="" class="line-number">33</pre><pre _ngcontent-wlx-12="" class="line-number">34</pre><pre _ngcontent-wlx-12="" class="line-number">35</pre><pre _ngcontent-wlx-12="" class="line-number">36</pre><pre _ngcontent-wlx-12="" class="line-number">37</pre><pre _ngcontent-wlx-12="" class="line-number">38</pre><pre _ngcontent-wlx-12="" class="line-number">39</pre><pre _ngcontent-wlx-12="" class="line-number">40</pre><pre _ngcontent-wlx-12="" class="line-number">41</pre><pre _ngcontent-wlx-12="" class="line-number">42</pre><pre _ngcontent-wlx-12="" class="line-number">43</pre><pre _ngcontent-wlx-12="" class="line-number">44</pre><pre _ngcontent-wlx-12="" class="line-number">45</pre><pre _ngcontent-wlx-12="" class="line-number">46</pre><pre _ngcontent-wlx-12="" class="line-number">47</pre><pre _ngcontent-wlx-12="" class="line-number">48</pre><pre _ngcontent-wlx-12="" class="line-number">49</pre><pre _ngcontent-wlx-12="" class="line-number">50</pre><pre _ngcontent-wlx-12="" class="line-number">51</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Directive } <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InputDirective</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Directive</span> </span>{</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-keyword">constructor</span>() {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">super</span>(...arguments);</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.restrict = <span class="hljs-string">'E'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.scope = {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-string">'returnClose'</span>: <span class="hljs-string">'='</span>,</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-string">'onReturn'</span>: <span class="hljs-string">'&amp;'</span>,</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-string">'onFocus'</span>: <span class="hljs-string">'&amp;'</span>,</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-string">'onBlur'</span>: <span class="hljs-string">'&amp;'</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    };</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  link(scope, element) {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    element.bind(<span class="hljs-string">'focus'</span>, (e) =&gt; {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-keyword">if</span> (!scope.onFocus) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.$timeout(() =&gt; {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        scope.onFocus();</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    element.bind(<span class="hljs-string">'blur'</span>, (e) =&gt; {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-keyword">if</span> (!scope.onBlur) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.$timeout(() =&gt; {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        scope.onBlur();</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    element.bind(<span class="hljs-string">'keydown'</span>, (e) =&gt; {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-keyword">if</span> (e.which != <span class="hljs-number">13</span>) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-keyword">if</span> (scope.returnClose) {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        element[<span class="hljs-number">0</span>].blur();</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-keyword">if</span> (scope.onReturn) {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        <span class="hljs-keyword">this</span>.$timeout(() =&gt; {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">          scope.onReturn();</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">        });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">}</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">InputDirective.$name = <span class="hljs-string">'input'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">InputDirective.$inject = [<span class="hljs-string">'$timeout'</span>];</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="3.17" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.17</span> <span _ngcontent-wlx-12="" class="commit-summary">Load input directive</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/3ebba6788e241bf7f0769a1652d0da785238a496">client/scripts/lib/app.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre><pre _ngcontent-wlx-12="" class="line-number">14</pre><pre _ngcontent-wlx-12="" class="line-number">15</pre><pre _ngcontent-wlx-12="" class="line-number">16</pre><pre _ngcontent-wlx-12="" class="line-number">17</pre><pre _ngcontent-wlx-12="" class="line-number">18</pre><pre _ngcontent-wlx-12="" class="line-number"> </pre><pre _ngcontent-wlx-12="" class="line-number">28</pre><pre _ngcontent-wlx-12="" class="line-number">29</pre><pre _ngcontent-wlx-12="" class="line-number">30</pre><pre _ngcontent-wlx-12="" class="line-number">31</pre><pre _ngcontent-wlx-12="" class="line-number">32</pre><pre _ngcontent-wlx-12="" class="line-number">33</pre><pre _ngcontent-wlx-12="" class="line-number">34</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-comment">// Modules</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> ChatsCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/chats.controller'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> ChatCtrl <span class="hljs-keyword">from</span> <span class="hljs-string">'../controllers/chat.controller'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> InputDirective <span class="hljs-keyword">from</span> <span class="hljs-string">'../directives/input.directive'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> CalendarFilter <span class="hljs-keyword">from</span> <span class="hljs-string">'../filters/calendar.filter'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> RoutesConfig <span class="hljs-keyword">from</span> <span class="hljs-string">'../routes'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">new</span> Loader(App)</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  .load(ChatsCtrl)</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  .load(ChatCtrl)</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  .load(InputDirective)</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  .load(CalendarFilter)</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  .load(RoutesConfig);</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And now we can use those events in our view:</p>

<p><diffbox step="3.18" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.18</span> <span _ngcontent-wlx-12="" class="commit-summary">Add chat view</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/6df0ed4b1999ab7f243290ab3eea7453455d7711">client/templates/chat.html</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">18</pre><pre _ngcontent-wlx-12="" class="line-number">19</pre><pre _ngcontent-wlx-12="" class="line-number">20</pre><pre _ngcontent-wlx-12="" class="line-number">21</pre><pre _ngcontent-wlx-12="" class="line-number">22</pre><pre _ngcontent-wlx-12="" class="line-number">23</pre><pre _ngcontent-wlx-12="" class="line-number">24</pre><pre _ngcontent-wlx-12="" class="line-number">25</pre><pre _ngcontent-wlx-12="" class="line-number">26</pre><pre _ngcontent-wlx-12="" class="line-number">27</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item-input-wrapper"</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ng-model</span>=<span class="hljs-string">"chat.message"</span></span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">             dir="auto"</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">             type="text"</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">             on-return="chat.sendMessage(); chat.closeKeyboard()"</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">             on-focus="chat.inputUp()"</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">             on-blur="chat.inputDown()"/&gt;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">ng-if</span>=<span class="hljs-string">"chat.message.length &gt; 0"</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>And implement the controller methods which handle those events:</p>

<p><diffbox step="3.19" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.19</span> <span _ngcontent-wlx-12="" class="commit-summary">Implement input directive handlers in chat controller</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/06b064aabd0656c141f32612c2d1004b2f25cc42">client/scripts/controllers/chat.controller.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">1</pre><pre _ngcontent-wlx-12="" class="line-number">2</pre><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number"> </pre><pre _ngcontent-wlx-12="" class="line-number">8</pre><pre _ngcontent-wlx-12="" class="line-number">9</pre><pre _ngcontent-wlx-12="" class="line-number">10</pre><pre _ngcontent-wlx-12="" class="line-number">11</pre><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre><pre _ngcontent-wlx-12="" class="line-number">14</pre><pre _ngcontent-wlx-12="" class="line-number">15</pre><pre _ngcontent-wlx-12="" class="line-number"> </pre><pre _ngcontent-wlx-12="" class="line-number">23</pre><pre _ngcontent-wlx-12="" class="line-number">24</pre><pre _ngcontent-wlx-12="" class="line-number">25</pre><pre _ngcontent-wlx-12="" class="line-number">26</pre><pre _ngcontent-wlx-12="" class="line-number">27</pre><pre _ngcontent-wlx-12="" class="line-number">28</pre><pre _ngcontent-wlx-12="" class="line-number">29</pre><pre _ngcontent-wlx-12="" class="line-number">30</pre><pre _ngcontent-wlx-12="" class="line-number">31</pre><pre _ngcontent-wlx-12="" class="line-number">32</pre><pre _ngcontent-wlx-12="" class="line-number">33</pre><pre _ngcontent-wlx-12="" class="line-number">34</pre><pre _ngcontent-wlx-12="" class="line-number">35</pre><pre _ngcontent-wlx-12="" class="line-number">36</pre><pre _ngcontent-wlx-12="" class="line-number">37</pre><pre _ngcontent-wlx-12="" class="line-number">38</pre><pre _ngcontent-wlx-12="" class="line-number">39</pre><pre _ngcontent-wlx-12="" class="line-number">40</pre><pre _ngcontent-wlx-12="" class="line-number">41</pre><pre _ngcontent-wlx-12="" class="line-number">42</pre><pre _ngcontent-wlx-12="" class="line-number">43</pre><pre _ngcontent-wlx-12="" class="line-number">44</pre><pre _ngcontent-wlx-12="" class="line-number">45</pre><pre _ngcontent-wlx-12="" class="line-number">46</pre><pre _ngcontent-wlx-12="" class="line-number">47</pre><pre _ngcontent-wlx-12="" class="line-number">48</pre><pre _ngcontent-wlx-12="" class="line-number">49</pre><pre _ngcontent-wlx-12="" class="line-number">50</pre><pre _ngcontent-wlx-12="" class="line-number">51</pre><pre _ngcontent-wlx-12="" class="line-number">52</pre><pre _ngcontent-wlx-12="" class="line-number">53</pre><pre _ngcontent-wlx-12="" class="line-number">54</pre><pre _ngcontent-wlx-12="" class="line-number">55</pre><pre _ngcontent-wlx-12="" class="line-number">56</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> Ionic <span class="hljs-keyword">from</span> <span class="hljs-string">'ionic-scripts'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Controller } <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Chats, Messages } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../lib/collections'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-keyword">super</span>(...arguments);</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.chatId = <span class="hljs-keyword">this</span>.$stateParams.chatId;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.isIOS = Ionic.Platform.isWebView() &amp;&amp; Ionic.Platform.isIOS();</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.isCordova = Meteor.isCordova;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.helpers({</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">      messages() {</pre><pre _ngcontent-wlx-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  sendMessage() {</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  inputUp () {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isIOS) {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.keyboardHeight = <span class="hljs-number">216</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.scrollBottom(<span class="hljs-literal">true</span>);</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  inputDown () {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isIOS) {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.keyboardHeight = <span class="hljs-number">0</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.$ionicScrollDelegate.$getByHandle(<span class="hljs-string">'chatScroll'</span>).resize();</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  closeKeyboard () {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isCordova) {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      cordova.plugins.Keyboard.close();</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  scrollBottom(animate) {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.$timeout(() =&gt; {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      <span class="hljs-keyword">this</span>.$ionicScrollDelegate.$getByHandle(<span class="hljs-string">'chatScroll'</span>).scrollBottom(animate);</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    }, <span class="hljs-number">300</span>);</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">}</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">ChatCtrl.$inject = [<span class="hljs-string">'$stateParams'</span>, <span class="hljs-string">'$timeout'</span>, <span class="hljs-string">'$ionicScrollDelegate'</span>];</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>We will also add some <code ngNonBindable="">css</code> to this view:</p>

<p><diffbox step="3.20" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.20</span> <span _ngcontent-wlx-12="" class="commit-summary">Add footer style to chat stylesheet</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/1c73ab190460611a65a552c63a8a2b378733b699">client/styles/chat.scss</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">45</pre><pre _ngcontent-wlx-12="" class="line-number">46</pre><pre _ngcontent-wlx-12="" class="line-number">47</pre><pre _ngcontent-wlx-12="" class="line-number">48</pre><pre _ngcontent-wlx-12="" class="line-number">49</pre><pre _ngcontent-wlx-12="" class="line-number">50</pre><pre _ngcontent-wlx-12="" class="line-number">51</pre><pre _ngcontent-wlx-12="" class="line-number"> </pre><pre _ngcontent-wlx-12="" class="line-number">83</pre><pre _ngcontent-wlx-12="" class="line-number">84</pre><pre _ngcontent-wlx-12="" class="line-number">85</pre><pre _ngcontent-wlx-12="" class="line-number">86</pre><pre _ngcontent-wlx-12="" class="line-number">87</pre><pre _ngcontent-wlx-12="" class="line-number">88</pre><pre _ngcontent-wlx-12="" class="line-number">89</pre><pre _ngcontent-wlx-12="" class="line-number">90</pre><pre _ngcontent-wlx-12="" class="line-number">91</pre><pre _ngcontent-wlx-12="" class="line-number">92</pre><pre _ngcontent-wlx-12="" class="line-number">93</pre><pre _ngcontent-wlx-12="" class="line-number">94</pre><pre _ngcontent-wlx-12="" class="line-number">95</pre><pre _ngcontent-wlx-12="" class="line-number">96</pre><pre _ngcontent-wlx-12="" class="line-number">97</pre><pre _ngcontent-wlx-12="" class="line-number">98</pre><pre _ngcontent-wlx-12="" class="line-number">99</pre><pre _ngcontent-wlx-12="" class="line-number">100</pre><pre _ngcontent-wlx-12="" class="line-number">101</pre><pre _ngcontent-wlx-12="" class="line-number">102</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#FFF</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  &amp;<span class="hljs-selector-class">.message-other</span>::before, &amp;<span class="hljs-selector-class">.message-mine</span>::before {</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-attribute">position</span>: absolute;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">3px</span>;</pre><pre _ngcontent-wlx-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-attribute">color</span>: gray;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">}</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-selector-class">.footer-chat</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-selector-class">.item-input-wrapper</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#FFF</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-selector-class">.button</span><span class="hljs-selector-class">.button-icon</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  <span class="hljs-selector-class">.buttons-seperator</span> {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">color</span>: gray;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">32px</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>So now when the user focuses on the input, it goes up, like so:</p>

<p><img alt="angular1-wa-meteor-cli" src="/assets/tutorials/angular1-whatsapp-meteor-cli/11.png"></p>

<p>So now it's time to implement the <code ngNonBindable="">sendMessage()</code> in our controller.</p>

<p>We will use <code ngNonBindable="">callMethod()</code> in order to call that method on the server side.</p>

<p><diffbox step="3.21" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.21</span> <span _ngcontent-wlx-12="" class="commit-summary">Implement new message method in chat controller</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/0c1b7e760cf340094129b19662659d40e7fb841f">client/scripts/controllers/chat.controller.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">1</pre><pre _ngcontent-wlx-12="" class="line-number">2</pre><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number"> </pre><pre _ngcontent-wlx-12="" class="line-number">23</pre><pre _ngcontent-wlx-12="" class="line-number">24</pre><pre _ngcontent-wlx-12="" class="line-number">25</pre><pre _ngcontent-wlx-12="" class="line-number">26</pre><pre _ngcontent-wlx-12="" class="line-number">27</pre><pre _ngcontent-wlx-12="" class="line-number">28</pre><pre _ngcontent-wlx-12="" class="line-number">29</pre><pre _ngcontent-wlx-12="" class="line-number">30</pre><pre _ngcontent-wlx-12="" class="line-number">31</pre><pre _ngcontent-wlx-12="" class="line-number">32</pre><pre _ngcontent-wlx-12="" class="line-number">33</pre><pre _ngcontent-wlx-12="" class="line-number">34</pre><pre _ngcontent-wlx-12="" class="line-number">35</pre><pre _ngcontent-wlx-12="" class="line-number">36</pre><pre _ngcontent-wlx-12="" class="line-number">37</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> Ionic <span class="hljs-keyword">from</span> <span class="hljs-string">'ionic-scripts'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { _ } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/underscore'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Meteor } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Controller } <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ecmascript/module-helpers'</span>;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Chats, Messages } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../lib/collections'</span>;</pre><pre _ngcontent-wlx-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  sendMessage() {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">if</span> (_.isEmpty(<span class="hljs-keyword">this</span>.message)) <span class="hljs-keyword">return</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.callMethod(<span class="hljs-string">'newMessage'</span>, {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      text: <span class="hljs-keyword">this</span>.message,</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      type: <span class="hljs-string">'text'</span>,</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      chatId: <span class="hljs-keyword">this</span>.chatId</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.message;</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  inputUp () {</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now let's create our method in <code ngNonBindable="">lib/methods.js</code>:</p>

<p><diffbox step="3.22" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.22</span> <span _ngcontent-wlx-12="" class="commit-summary">Add new message meteor method</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/71e795407ef1ac56adf42a85c1b766b3a5567748">lib/methods.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">1</pre><pre _ngcontent-wlx-12="" class="line-number">2</pre><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number">6</pre><pre _ngcontent-wlx-12="" class="line-number">7</pre><pre _ngcontent-wlx-12="" class="line-number">8</pre><pre _ngcontent-wlx-12="" class="line-number">9</pre><pre _ngcontent-wlx-12="" class="line-number">10</pre><pre _ngcontent-wlx-12="" class="line-number">11</pre><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Chats, Messages } <span class="hljs-keyword">from</span> <span class="hljs-string">'../lib/collections'</span>;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">Meteor.methods({</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  newMessage(message) {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    message.timestamp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">const</span> messageId = Messages.insert(message);</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    Chats.update(message.chatId, { $set: { lastMessage: message } });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> messageId;</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Let's add validation to our method.</p>

<p><code ngNonBindable="">Meteor</code> provides us with a useful package named <code ngNonBindable="">check</code> that validates data types and scheme.</p>

<p>Add it by running:</p>

<pre><code ngNonBindable="">$ meteor add check</code></pre>

<p>And now let's use it in the <code ngNonBindable="">newMessage()</code> method:</p>

<p><diffbox step="3.24" tutorial="whatsapp-meteor-tutorial" _nghost-wlx-12=""><div _ngcontent-wlx-12="" class="diffbox">
    <div _ngcontent-wlx-12="" class="title-panel">
        <span _ngcontent-wlx-12="" class="step-number">3.24</span> <span _ngcontent-wlx-12="" class="commit-summary">Validate new message method params</span>
        <a _ngcontent-wlx-12="" class="github-commit-link" target="_blank" href="http://github.com/DAB0mB/angular-meteor-whatsapp/commit/5b8a9bf0149cea4086a392d5ddc26bcefd0a5774">lib/methods.js</a>
    </div>
    <div _ngcontent-wlx-12="" class="code-container">
        <div _ngcontent-wlx-12="" class="scroll-container">
            <div _ngcontent-wlx-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-number">3</pre><pre _ngcontent-wlx-12="" class="line-number">4</pre><pre _ngcontent-wlx-12="" class="line-number">5</pre><pre _ngcontent-wlx-12="" class="line-number">6</pre><pre _ngcontent-wlx-12="" class="line-number">7</pre><pre _ngcontent-wlx-12="" class="line-number">8</pre><pre _ngcontent-wlx-12="" class="line-number">9</pre><pre _ngcontent-wlx-12="" class="line-number">10</pre><pre _ngcontent-wlx-12="" class="line-number">11</pre><pre _ngcontent-wlx-12="" class="line-number">12</pre><pre _ngcontent-wlx-12="" class="line-number">13</pre>
            </div>
            <div _ngcontent-wlx-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">Meteor.methods({</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">  newMessage(message) {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    check(message, {</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      text: <span class="hljs-built_in">String</span>,</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">      chatId: <span class="hljs-built_in">String</span></pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added">    });</pre><pre _ngcontent-wlx-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    message.timestamp = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();</pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-wlx-12="" class="line-context" className="line-context">    <span class="hljs-keyword">const</span> messageId = Messages.insert(message);</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now that it's ready you can go ahead and send a message and view it on the screen.</p></tutorial-page-content>
    </div>
</div></tutorial></app>


</body></html>