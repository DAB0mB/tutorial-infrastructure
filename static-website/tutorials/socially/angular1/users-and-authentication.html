<!DOCTYPE html><html lang="en"><head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,800,700italic,800italic" rel="stylesheet" type="text/css">
    <title>Angular2-Meteor</title>
    <meta charset="UTF-8">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <base href="/">
    <style>.logo[_ngcontent-vrp-1] {
  width: auto;
  height: 2em; }

.main-toolbar[_ngcontent-vrp-1] {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  box-shadow: 3px 0 6px rgba(0, 0, 0, 0.3);
  background: #90A4AE; }
  .main-toolbar[_ngcontent-vrp-1] a[_ngcontent-vrp-1] {
    color: white;
    text-decoration: none; }

.fill-remaining-space[_ngcontent-vrp-1] {
  -ms-flex: 1 1 auto;
      flex: 1 1 auto; }

.tutorials-dropdown[_ngcontent-vrp-1] {
  position: relative;
  display: inline-block; }
  .tutorials-dropdown[_ngcontent-vrp-1] .dropdown-content[_ngcontent-vrp-1] {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 500px;
    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    padding: 7px; }

.tutorials-dropdown[_ngcontent-vrp-1]:hover .dropdown-content[_ngcontent-vrp-1] {
  display: block; }</style><style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0; }

/* Base color: saturation 0; */
.hljs,
.hljs-subst {
  color: #444; }

.hljs-comment {
  color: #888888; }

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold; }

/* User color: hue: 0 */
.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000; }

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold; }

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060; }

/* Language color: hue: 90; */
.hljs-literal {
  color: #78A960; }

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300; }

/* Meta color: hue: 200 */
.hljs-meta {
  color: #1f7199; }

.hljs-meta-string {
  color: #4d99bf; }

/* Misc effects */
.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8; }

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic; }

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold; }

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080; }

.hljs-string,
.hljs-doctag {
  color: #d14; }

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold; }

.hljs-subst {
  font-weight: normal; }

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold; }

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal; }

.hljs-regexp,
.hljs-link {
  color: #009926; }

.hljs-symbol,
.hljs-bullet {
  color: #990073; }

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3; }

.hljs-meta {
  color: #999;
  font-weight: bold; }

.hljs-deletion {
  background: #fdd; }

.hljs-addition {
  background: #dfd; }

.hljs-emphasis {
  font-style: italic; }

.hljs-strong {
  font-weight: bold; }

a {
  color: black; }

body {
  padding: 0;
  margin: 0;
  padding-top: 64px;
  font-family: 'Open Sans', sans-serif; }

pre {
  background: transparent;
  border: none;
  white-space: pre-wrap; }

code {
  white-space: pre-wrap; }

img[alt="angular1-wa-ionic-cli"], img[alt="angular1-wa-meteor-cli"] {
  width: 30%; }

.side-nav .step-item, .side-nav .api-list-item {
  margin: 0;
  padding: 0;
  border-bottom: 1px solid #CFD8DC;
  color: #546E7A; }

.side-nav .step-link, .side-nav .api-item-link, .side-nav .apis-versions-list li {
  text-decoration: none;
  color: #536E7A;
  display: block;
  font-size: 14px;
  padding: 16px 16px;
  margin: 0;
  background-color: #ECEFF1; }

.side-nav .active-step a {
  font-weight: bold; }

.side-nav .tutorial-steps-list, .side-nav .apis-list, .side-nav .apis-versions-list {
  list-style: none;
  padding-left: 0;
  margin-top: 8px; }

.apis-versions-list {
  margin: 0 !important; }
  .apis-versions-list li {
    padding: 8px !important; }
    .apis-versions-list li a {
      text-decoration: none; }

.dropdown-content {
  column-count: 2;
  column-width: 220px;
  column-rule: 1px solid #ECEFF1;
  column-gap: 0; }
  .dropdown-content .tutorial-steps-list {
    margin: 0 !important;
    list-style: none;
    padding: 0; }
    .dropdown-content .tutorial-steps-list .step-item {
      padding: 5px 0 5px 10px;
      border-bottom: 1px solid #ECEFF1;
      break-inside: avoid-column; }
      .dropdown-content .tutorial-steps-list .step-item a {
        text-decoration: none;
        font-size: small;
        color: black; }
      .dropdown-content .tutorial-steps-list .step-item .bold {
        font-weight: bold; }

.md-primary {
  background: #263238 !important;
  color: white !important;
  cursor: pointer !important; }
  .md-primary[disabled] {
    color: lightgray !important;
    cursor: not-allowed !important; }

tutorial-page-content pre code[ngnonbindable] {
  background: #eee;
  display: block;
  width: 90%;
  border-radius: 5px;
  padding: 10px; }

tutorial-page-content blockquote {
  margin: 0;
  position: relative;
  background: #eee;
  border-radius: 5px; }
  tutorial-page-content blockquote:before {
    content: '!';
    font-weight: bold;
    position: absolute;
    vertical-align: top;
    font-size: 2vw;
    color: white;
    margin-left: 6px; }
  tutorial-page-content blockquote p {
    border-left: 1px solid white;
    padding: 10px;
    margin-left: 20px; }

.diffbox {
  border-radius: 10px; }
  .diffbox .title-panel {
    border-radius: 10px 10px 0 0; }
  .diffbox .code-container {
    border-radius: 0 0 10px 10px; }

api-ref-container p code, api-ref-container ul li code {
  font-family: 'Open Sans', sans-serif; }

api-ref-container a {
  color: #263238;
  text-decoration: none;
  font-weight: bold; }

api-ref-container h3 {
  background: #eee;
  border-radius: 5px;
  padding: 4px;
  margin-top: 30px; }

api-ref-container table {
  width: 100%;
  background: #eee;
  border-radius: 5px;
  border-spacing: 0; }
  api-ref-container table thead {
    background: #546E7A;
    color: #eee;
    border-radius: 5px; }
    api-ref-container table thead tr {
      background: #546E7A;
      border-radius: 5px; }
      api-ref-container table thead tr th {
        padding: 6px; }
  api-ref-container table tbody td {
    padding: 5px; }
</style><style>/** * Mixin that creates a new stacking context. * see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context */ /** * This mixin hides an element visually. * That means it's still accessible for screen-readers but not visible in view. */ /** * Forces an element to grow to fit floated contents; used as as an alternative to * `overflow: hidden;` because it doesn't cut off contents. */ /** * A mixin, which generates temporary ink ripple on a given component. * When $bindToParent is set to true, it will check for the focused class on the same selector as you included * that mixin. * It is also possible to specify the color palette of the temporary ripple. By default it uses the * accent palette for its background. */ md-toolbar { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; min-height: 64px; font-size: 20px; font-weight: 400; font-family: Roboto, "Helvetica Neue", sans-serif; padding: 0 16px; -webkit-box-orient: vertical; -webkit-box-direction: normal; -ms-flex-direction: column; flex-direction: column; background: whitesmoke; color: rgba(0, 0, 0, 0.87); } md-toolbar.md-primary { background: #009688; color: white; } md-toolbar.md-accent { background: #9c27b0; color: rgba(255, 255, 255, 0.870588); } md-toolbar.md-warn { background: #f44336; color: white; } md-toolbar md-toolbar-row { display: -webkit-box; display: -ms-flexbox; display: flex; box-sizing: border-box; width: 100%; height: 64px; -webkit-box-orient: horizontal; -webkit-box-direction: normal; -ms-flex-direction: row; flex-direction: row; -webkit-box-align: center; -ms-flex-align: center; align-items: center; } </style><style>/** * A collection of mixins and CSS classes that can be used to apply elevation to a material * element. * See: https://www.google.com/design/spec/what-is-material/elevation-shadows.html * Examples: * * * .md-foo { *   @include $md-elevation(2); * *   &:active { *     @include $md-elevation(8); *   } * } * * <div id="external-card" class="md-elevation-z2"><p>Some content</p></div> * * For an explanation of the design behind how elevation is implemented, see the design doc at * https://goo.gl/Kq0k9Z. */ /** * The css property used for elevation. In most cases this should not be changed. It is exposed * as a variable for abstraction / easy use when needing to reference the property directly, for * example in a will-change rule. */ /** The default duration value for elevation transitions. */ /** The default easing value for elevation transitions. */ /** * Applies the correct css rules to an element to give it the elevation specified by $zValue. * The $zValue must be between 0 and 24. */ /** * Returns a string that can be used as the value for a transition property for elevation. * Calling this function directly is useful in situations where a component needs to transition * more than one property. * * .foo { *   transition: md-elevation-transition-property-value(), opacity 100ms ease; *   will-change: $md-elevation-property, opacity; * } */ /** * Applies the correct css rules needed to have an element transition between elevations. * This mixin should be applied to elements whose elevation values will change depending on their * context (e.g. when active or disabled). */ /** Applies a property to an md-button element for each of the supported palettes. */ /** Applies a focus style to an md-button element for each of the supported palettes. */ [md-raised-button], [md-fab], [md-mini-fab], [md-button], [md-icon-button] { box-sizing: border-box; position: relative; background: transparent; text-align: center; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; outline: none; border: none; display: inline-block; white-space: nowrap; text-decoration: none; vertical-align: baseline; font-size: 14px; font-family: Roboto, "Helvetica Neue", sans-serif; font-weight: 500; color: currentColor; margin: 0; min-width: 88px; line-height: 36px; padding: 0 16px; border-radius: 3px; } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab], .md-primary[md-button], .md-primary[md-icon-button] { color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab], .md-accent[md-button], .md-accent[md-icon-button] { color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab], .md-warn[md-button], .md-warn[md-icon-button] { color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-primary[disabled][md-button], .md-primary[disabled][md-icon-button], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-accent[disabled][md-button], .md-accent[disabled][md-icon-button], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], .md-warn[disabled][md-button], .md-warn[disabled][md-icon-button], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab], [disabled][disabled][md-button], [disabled][disabled][md-icon-button] { color: rgba(0, 0, 0, 0.38); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab], [disabled][md-button], [disabled][md-icon-button] { cursor: default; } .md-button-focus[md-raised-button]::after, .md-button-focus[md-fab]::after, .md-button-focus[md-mini-fab]::after, .md-button-focus[md-button]::after, .md-button-focus[md-icon-button]::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } .md-button-focus.md-primary[md-raised-button]::after, .md-button-focus.md-primary[md-fab]::after, .md-button-focus.md-primary[md-mini-fab]::after, .md-button-focus.md-primary[md-button]::after, .md-button-focus.md-primary[md-icon-button]::after { background-color: rgba(0, 150, 136, 0.12); } .md-button-focus.md-accent[md-raised-button]::after, .md-button-focus.md-accent[md-fab]::after, .md-button-focus.md-accent[md-mini-fab]::after, .md-button-focus.md-accent[md-button]::after, .md-button-focus.md-accent[md-icon-button]::after { background-color: rgba(156, 39, 176, 0.12); } .md-button-focus.md-warn[md-raised-button]::after, .md-button-focus.md-warn[md-fab]::after, .md-button-focus.md-warn[md-mini-fab]::after, .md-button-focus.md-warn[md-button]::after, .md-button-focus.md-warn[md-icon-button]::after { background-color: rgba(244, 67, 54, 0.12); } [md-raised-button], [md-fab], [md-mini-fab] { box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); background-color: #fafafa; -webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0); -webkit-transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); transition: background 400ms cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { color: white; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { color: rgba(255, 255, 255, 0.870588); } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { color: white; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { color: rgba(0, 0, 0, 0.38); } .md-primary[md-raised-button], .md-primary[md-fab], .md-primary[md-mini-fab] { background-color: #009688; } .md-accent[md-raised-button], .md-accent[md-fab], .md-accent[md-mini-fab] { background-color: #9c27b0; } .md-warn[md-raised-button], .md-warn[md-fab], .md-warn[md-mini-fab] { background-color: #f44336; } .md-primary[disabled][md-raised-button], .md-primary[disabled][md-fab], .md-primary[disabled][md-mini-fab], .md-accent[disabled][md-raised-button], .md-accent[disabled][md-fab], .md-accent[disabled][md-mini-fab], .md-warn[disabled][md-raised-button], .md-warn[disabled][md-fab], .md-warn[disabled][md-mini-fab], [disabled][disabled][md-raised-button], [disabled][disabled][md-fab], [disabled][disabled][md-mini-fab] { background-color: rgba(0, 0, 0, 0.12); } [md-raised-button]:active, [md-fab]:active, [md-mini-fab]:active { box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12); } [disabled][md-raised-button], [disabled][md-fab], [disabled][md-mini-fab] { box-shadow: none; } [md-button][disabled]:hover.md-primary, [md-button][disabled]:hover.md-accent, [md-button][disabled]:hover.md-warn, [md-button][disabled]:hover:hover { background-color: transparent; } [md-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 56px; height: 56px; padding: 0; } [md-fab] i, [md-fab] md-icon { padding: 16px 0; } [md-mini-fab] { min-width: 0; border-radius: 50%; background-color: #9c27b0; color: rgba(255, 255, 255, 0.870588); width: 40px; height: 40px; padding: 0; } [md-mini-fab] i, [md-mini-fab] md-icon { padding: 8px 0; } [md-icon-button] { min-width: 0; padding: 0; width: 40px; height: 40px; line-height: 24px; border-radius: 50%; } [md-icon-button] .md-button-wrapper > * { vertical-align: middle; } [md-button]:hover::after, [md-icon-button]:hover::after { position: absolute; top: 0; left: 0; bottom: 0; right: 0; content: ''; background-color: rgba(0, 0, 0, 0.12); border-radius: inherit; pointer-events: none; } [md-button]:hover.md-primary::after, [md-icon-button]:hover.md-primary::after { background-color: rgba(0, 150, 136, 0.12); } [md-button]:hover.md-accent::after, [md-icon-button]:hover.md-accent::after { background-color: rgba(156, 39, 176, 0.12); } [md-button]:hover.md-warn::after, [md-icon-button]:hover.md-warn::after { background-color: rgba(244, 67, 54, 0.12); } @media screen and (-ms-high-contrast: active) { .md-raised-button, .md-fab, .md-mini-fab { border: 1px solid #fff; } } </style><style>.side-nav[_ngcontent-vrp-6] {
  background: #ECEFF1;
  width: 232px;
  bottom: 0;
  overflow: auto;
  z-index: 100;
  border-right: 1px solid rgba(0, 0, 0, 0.3); }
  .side-nav[_ngcontent-vrp-6] ul[_ngcontent-vrp-6] {
    margin-top: 8px; }

tutorials-versions[_ngcontent-vrp-6] {
  margin-left: 10px;
  margin-top: 10px;
  display: block; }

.improv-button[_ngcontent-vrp-6] {
  margin-left: 50px; }

.right-buttons[_ngcontent-vrp-6] {
  float: right;
  margin-right: 250px;
  margin-top: 10px; }

.tutorial-title[_ngcontent-vrp-6] {
  margin: 15px;
  float: left;
  font-size: larger;
  font-weight: bold; }

.top-navigation[_ngcontent-vrp-6] {
  position: fixed;
  margin-top: -60px;
  width: 100%;
  background-color: #ECEFF1;
  height: 60px;
  z-index: 50; }

.tutorial-content[_ngcontent-vrp-6] {
  margin-top: 60px;
  padding: 20px; }

.tutorials-container[_ngcontent-vrp-6] {
  padding-left: 230px; }

.l-pinned-top[_ngcontent-vrp-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px; }

.l-pinned-left[_ngcontent-vrp-6] {
  position: fixed;
  top: 0px;
  left: 0px;
  bottom: 0px; }

.l-left[_ngcontent-vrp-6] {
  float: left; }

.l-right[_ngcontent-vrp-6] {
  float: right; }

.l-relative[_ngcontent-vrp-6], .docs-content[_ngcontent-vrp-6] {
  position: relative; }

.l-absolute[_ngcontent-vrp-6] {
  position: absolute; }

.l-fixed[_ngcontent-vrp-6] {
  position: fixed; }

.l-offset-side-nav[_ngcontent-vrp-6] {
  padding-left: 232px; }

.l-offset-nav[_ngcontent-vrp-6] {
  padding-top: 64px; }</style><style>.tutorial-version[_ngcontent-vrp-7] {
            margin-left: 10px;
        }
        
        .active[_ngcontent-vrp-7] {
            color: #b3e5fc !important;
        }</style><style>.diffbox[_ngcontent-vrp-12] {
  border: 1px solid #eee;
  -webkit-text-size-adjust: 100%;
  margin: 1.5em 0; }
  .diffbox[_ngcontent-vrp-12] .title-panel[_ngcontent-vrp-12] {
    padding: 5px 12px;
    background: #eee;
    border-bottom: solid 1px #eee;
    color: #333;
    overflow: auto; }
    .diffbox[_ngcontent-vrp-12] .title-panel[_ngcontent-vrp-12] .github-commit-link[_ngcontent-vrp-12] {
      float: right;
      color: black;
      text-decoration: none;
      border-bottom: none !important; }
  .diffbox[_ngcontent-vrp-12] .code-container[_ngcontent-vrp-12] {
    overflow-x: auto;
    position: relative;
    padding: 9px 3px 3px 0;
    background: #f8f8f8; }
    .diffbox[_ngcontent-vrp-12] .code-container[_ngcontent-vrp-12] .scroll-container[_ngcontent-vrp-12] {
      display: inline-block;
      min-width: 100%;
      overflow: hidden; }
    .diffbox[_ngcontent-vrp-12] .code-container[_ngcontent-vrp-12] pre[_ngcontent-vrp-12] {
      margin: 0;
      padding: 0;
      background-color: transparent; }
      .diffbox[_ngcontent-vrp-12] .code-container[_ngcontent-vrp-12] pre.line-added[_ngcontent-vrp-12] {
        background: #eaffea; }
      .diffbox[_ngcontent-vrp-12] .code-container[_ngcontent-vrp-12] pre.line-removed[_ngcontent-vrp-12] {
        background: #ff9ea2; }
    .diffbox[_ngcontent-vrp-12] .code-container[_ngcontent-vrp-12] .line-content[_ngcontent-vrp-12] {
      padding-left: 36px;
      overflow: hidden; }
      .diffbox[_ngcontent-vrp-12] .code-container[_ngcontent-vrp-12] .line-content[_ngcontent-vrp-12] .hljs-comment[_ngcontent-vrp-12] {
        color: #777; }
    .diffbox[_ngcontent-vrp-12] .code-container[_ngcontent-vrp-12] .line-numbers[_ngcontent-vrp-12] {
      text-align: right;
      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      -o-user-select: none;
      position: absolute;
      width: 25px; }
      .diffbox[_ngcontent-vrp-12] .code-container[_ngcontent-vrp-12] .line-numbers[_ngcontent-vrp-12] .line-number[_ngcontent-vrp-12] {
        color: #aaa;
        font-style: italic; }</style></head><body><universal-styles></universal-styles>


<app _nghost-vrp-1=""><md-toolbar _ngcontent-vrp-1="" class="main-toolbar md-primary"><div class="md-toolbar-layout"> <md-toolbar-row> 
    <a _ngcontent-vrp-1="" href="/"><img _ngcontent-vrp-1="" class="logo" src="/assets/images/logo.png"></a>
    <div _ngcontent-vrp-1="" class="tutorials-dropdown">
        <button _ngcontent-vrp-1="" md-button=""><span class="md-button-wrapper">Tutorials</span> </button>
        <div _ngcontent-vrp-1="" class="dropdown-content">
            <steps-list _ngcontent-vrp-1="" prefix="/tutorials/socially"><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/folder-structure">8. Folder Structure</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/css-sass-and-bootstrap">18. CSS, SASS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ionic2">23. Ionic2</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular2/next-steps">25. Next Steps</a>
    </li>
    <!--template bindings={}--><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/whatsapp">WhatsApp clone with Angular &amp; Meteor</a>
    </li><li class="step-item extra-item">
        <a class="step-link extra-link bold" className="step-link extra-link bold" href="/tutorials/migration/angular2/introduction">Blaze to Angular 2 Migration tutorial</a>
    </li>
</ul>
</steps-list>
        </div>
    </div>
    <a _ngcontent-vrp-1="" href="/angular2/"><button _ngcontent-vrp-1="" md-button=""><span class="md-button-wrapper">Angular 2</span> </button></a>
    <a _ngcontent-vrp-1="" href="/api/angular2-meteor/latest/MeteorComponent"><button _ngcontent-vrp-1="" md-button=""><span class="md-button-wrapper">API Reference</span> </button></a>
    <span _ngcontent-vrp-1="" class="fill-remaining-space"></span>
    <a _ngcontent-vrp-1="" href="https://github.com/Urigo/angular2-meteor" target="_blank"><button _ngcontent-vrp-1="" md-button=""><span class="md-button-wrapper">GitHub</span> </button></a>
    <a _ngcontent-vrp-1="" href="http://info.meteor.com/blog/author/uri-goldshtein?__hstc=219992390.b4a81f3b906b078dac633307097097f5.1471207723059.1471890076881.1471938647239.7&amp;__hssc=219992390.3.1471938647239&amp;__hsfp=714783454" target="_blank"><button _ngcontent-vrp-1="" md-button=""><span class="md-button-wrapper">Blog</span> </button></a>
    <a _ngcontent-vrp-1="" href="https://docs.google.com/forms/d/e/1FAIpQLSed3JZ0EAcSzkX8Y-iEtvNQRfjeyP2ICQvYMs00ewdmKaplwA/viewform" target="_blank"><button _ngcontent-vrp-1="" md-button=""><span class="md-button-wrapper">Contact Us</span> </button></a>
    <a _ngcontent-vrp-1="" href="/manifesto"><button _ngcontent-vrp-1="" md-button=""><span class="md-button-wrapper">Manifesto</span> </button></a>
    <a _ngcontent-vrp-1="" href="/about"><button _ngcontent-vrp-1="" md-button=""><span class="md-button-wrapper">About us</span> </button></a>
 </md-toolbar-row>  </div></md-toolbar>
<router-outlet _ngcontent-vrp-1=""></router-outlet><tutorial _nghost-vrp-6=""><div _ngcontent-vrp-6="" class="tutorials-container">
    <nav _ngcontent-vrp-6="" class="side-nav l-pinned-left l-layer-4 l-offset-nav">
        <tutorials-versions _ngcontent-vrp-6="" _nghost-vrp-7=""><!--template bindings={}--><a _ngcontent-vrp-7="" md-raised-button="" class="tutorial-version md-primary active" className="tutorial-version md-primary active" href="/tutorials/socially/angular1/users-and-authentication">Angular 1</a><a _ngcontent-vrp-7="" md-raised-button="" class="tutorial-version md-primary " className="tutorial-version md-primary " href="/tutorials/socially/angular2/users-and-authentication">Angular 2</a></tutorials-versions>
        <steps-list _ngcontent-vrp-6=""><!--template bindings={}--><ul class="tutorial-steps-list">
    <!--template bindings={}--><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/bootstrap">1. Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/static-template">2. Static Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/dynamic-template">3. Dynamic Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/3-way-data-binding">4. 3-way Data Binding</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/adding-removing-objects-and-angular-event-handling">5. Data Management</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/routing-and-multiple-views">6. Routing &amp; Multiple Views</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/bindings">7. Bindings</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/folder-structure">8. Folder Structure</a>
    </li><li class="step-item active-step" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/users-and-authentication">9. Users &amp; Authentication</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/privacy-and-publish-subscribe-functions">10. Privacy &amp; Subscriptions</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/deploying-your-app">11. Deployment</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/running-your-app-on-android-or-ios-with-phonegap">12. Mobile Support</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/search-sort-pagination-and-reactive-vars">13. Filter and Pagination</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/using-and-creating-angularjs-pipes">14. AngularJS Pipes</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/meteor-methods">15. Meteor Methods</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/conditional-template-directives-with-angularjs">16. Conditional Templates</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/google-maps">17. Google Maps</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/css-less-and-bootstrap">18. CSS, LESS and Bootstrap</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/angular-material-and-custom-angular-auth-forms">19. Angular2-Material &amp; Custom Auth</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/3rd-party-libraries">20. Third-Party Libraries</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/files-and-uploadfs">21. Files and UploadFS</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/packages-isolation">22. Packages Isolation</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/ionic">23. Ionic</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/ngupgrade-and-migration">24. ngUpgrade &amp; Migration</a>
    </li><li class="step-item" routerLinkActive="active-step">
        <a class="step-link" href="/tutorials/socially/angular1/next-steps">25. Next Steps</a>
    </li>
    <!--template bindings={}-->
</ul>
</steps-list>
    </nav>
    <div _ngcontent-vrp-6="" class="top-navigation">
        <span _ngcontent-vrp-6="" class="tutorial-title" stepName="">Users &amp; Authentication</span>
        <div _ngcontent-vrp-6="" class="right-buttons">
            <a _ngcontent-vrp-6="" class="md-primary" md-raised-button="" tutorialNavigation="previous" href="/tutorials/socially/angular1/folder-structure">Previous</a>
            <a _ngcontent-vrp-6="" class="md-primary" codeDiffLink="" md-raised-button="" href="https://github.com/Urigo/meteor-angular-socially/compare/step_07...step_08">Code Diff</a>
            <a _ngcontent-vrp-6="" class="md-primary" md-raised-button="" tutorialNavigation="next" href="/tutorials/socially/angular1/privacy-and-publish-subscribe-functions">Next</a>
            <a _ngcontent-vrp-6="" class="md-primary improv-button" md-raised-button="" href="https://github.com/Urigo/tutorial-infrastructure/edit/master/static-website/tutorials/socially/angular1/users-and-authentication.html">Improve This Document</a>
        </div>
    </div>
    <div _ngcontent-vrp-6="" class="tutorial-content">
        <router-outlet _ngcontent-vrp-6=""></router-outlet><tutorial-page><div class="tutorial-container"></div></tutorial-page><tutorial-page-content><p>One of Meteor's most powerful packages is the Meteor account system.</p>

<p>Right now, our app is publishing all the parties to all the clients, and all the clients can change those parties. The changes are then reflected back to all
the other clients automatically.</p>

<p>This is super powerful and easy, but what about security?  We don't want any user to be able to change any party...</p>

<p>First thing we should do is to remove the <code ngNonBindable="">insecure</code> package that automatically added to any new Meteor application.</p>

<p>The 'insecure' package makes the default behaviour of Meteor collections to permit all.</p>

<p>By removing that package the default behaviour is changed to deny all.</p>

<p>Execute this command in the command line:</p>

<pre><code ngNonBindable="">$ meteor remove insecure</code></pre>

<p>Now let's try to change the parties array or a specific party.  We get</p>

<pre><code ngNonBindable="">remove failed: Access denied</code></pre>

<p>In the console because we don't have permissions to do that.    </p>

<p>Now, we need to write an explicit security rule for each operation we want to allow the client to do on the Mongo collection.</p>

<p>So first, let's add the <code ngNonBindable="">accounts-password</code> Meteor package.
It's a very powerful package for all the user operations you can think of: login, sign-up, change password, password recovery, email confirmation and more.</p>

<pre><code ngNonBindable="">$ meteor add accounts-password</code></pre>

<p>Now we will also add the <code ngNonBindable="">dotansimha:accounts-ui-angular</code> package.  This package contains all the HTML and CSS we need for the user operation forms.</p>

<p>Later on in this tutorial we will replace those default account-ui forms with custom Angular 1 forms.</p>

<pre><code ngNonBindable="">$ meteor add dotansimha:accounts-ui-angular</code></pre>

<p>Now let's add dependency to the <code ngNonBindable="">accounts.ui</code> module in our module definition:</p>

<p><diffbox step="8.4" tutorial="angular1-meteor-socially" _nghost-vrp-12=""><div _ngcontent-vrp-12="" class="diffbox">
    <div _ngcontent-vrp-12="" class="title-panel">
        <span _ngcontent-vrp-12="" class="step-number">8.4</span> <span _ngcontent-vrp-12="" class="commit-summary">Add a dependecy for accounts-ui package</span>
        <a _ngcontent-vrp-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular-socially/commit/1a50249fa6288fa4a28a71d6d0c3d07313ecbc79">imports/ui/components/socially/socially.js</a>
    </div>
    <div _ngcontent-vrp-12="" class="code-container">
        <div _ngcontent-vrp-12="" class="scroll-container">
            <div _ngcontent-vrp-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-number">17</pre><pre _ngcontent-vrp-12="" class="line-number">18</pre><pre _ngcontent-vrp-12="" class="line-number">19</pre><pre _ngcontent-vrp-12="" class="line-number">20</pre><pre _ngcontent-vrp-12="" class="line-number">21</pre><pre _ngcontent-vrp-12="" class="line-number">22</pre><pre _ngcontent-vrp-12="" class="line-number">23</pre><pre _ngcontent-vrp-12="" class="line-number">24</pre>
            </div>
            <div _ngcontent-vrp-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  uiRouter,</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  PartiesList,</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  PartyDetails,</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  Navigation,</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  <span class="hljs-string">'accounts.ui'</span></pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">]).component(name, {</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  template,</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  controllerAs: name,</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now let's add the <code ngNonBindable="">login-buttons</code> directive (part of <code ngNonBindable="">accounts.ui</code> module) into Socially.</p>

<p>So the <code ngNonBindable="">socially.html</code> will look like this:</p>

<p><diffbox step="8.5" tutorial="angular1-meteor-socially" _nghost-vrp-12=""><div _ngcontent-vrp-12="" class="diffbox">
    <div _ngcontent-vrp-12="" class="title-panel">
        <span _ngcontent-vrp-12="" class="step-number">8.5</span> <span _ngcontent-vrp-12="" class="commit-summary">Add usage for login-buttons directive</span>
        <a _ngcontent-vrp-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular-socially/commit/ff4bb9ea79890d8ac2009d196049d044fde64c97">imports/ui/components/socially/socially.html</a>
    </div>
    <div _ngcontent-vrp-12="" class="code-container">
        <div _ngcontent-vrp-12="" class="scroll-container">
            <div _ngcontent-vrp-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-number">1</pre><pre _ngcontent-vrp-12="" class="line-number">2</pre><pre _ngcontent-vrp-12="" class="line-number">3</pre><pre _ngcontent-vrp-12="" class="line-number">4</pre><pre _ngcontent-vrp-12="" class="line-number">5</pre>
            </div>
            <div _ngcontent-vrp-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-added" className="line-added"><span class="hljs-tag">&lt;<span class="hljs-name">login-buttons</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">login-buttons</span>&gt;</span></pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-tag">&lt;<span class="hljs-name">navigation</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">navigation</span>&gt;</span></pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ui-view</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Run the code, create an account, login, logout...</p>

<p>Now that we have our account system, we can start defining our security rules for the parties.</p>

<p>Let's go to the model folder and change the file to look like this:</p>

<p><diffbox step="8.6" tutorial="angular1-meteor-socially" _nghost-vrp-12=""><div _ngcontent-vrp-12="" class="diffbox">
    <div _ngcontent-vrp-12="" class="title-panel">
        <span _ngcontent-vrp-12="" class="step-number">8.6</span> <span _ngcontent-vrp-12="" class="commit-summary">Add allow logic to the model</span>
        <a _ngcontent-vrp-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular-socially/commit/3b342b6bb23454e1a5e5fb428030e02f3dcc2f4e">imports/api/parties.js</a>
    </div>
    <div _ngcontent-vrp-12="" class="code-container">
        <div _ngcontent-vrp-12="" class="scroll-container">
            <div _ngcontent-vrp-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-number">1</pre><pre _ngcontent-vrp-12="" class="line-number">2</pre><pre _ngcontent-vrp-12="" class="line-number">3</pre><pre _ngcontent-vrp-12="" class="line-number">4</pre><pre _ngcontent-vrp-12="" class="line-number">5</pre><pre _ngcontent-vrp-12="" class="line-number">6</pre><pre _ngcontent-vrp-12="" class="line-number">7</pre><pre _ngcontent-vrp-12="" class="line-number">8</pre><pre _ngcontent-vrp-12="" class="line-number">9</pre><pre _ngcontent-vrp-12="" class="line-number">10</pre><pre _ngcontent-vrp-12="" class="line-number">11</pre><pre _ngcontent-vrp-12="" class="line-number">12</pre><pre _ngcontent-vrp-12="" class="line-number">13</pre><pre _ngcontent-vrp-12="" class="line-number">14</pre><pre _ngcontent-vrp-12="" class="line-number">15</pre>
            </div>
            <div _ngcontent-vrp-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Mongo } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/mongo'</span>;</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Parties = <span class="hljs-keyword">new</span> Mongo.Collection(<span class="hljs-string">'parties'</span>);</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">Parties.allow({</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  insert(userId, party) {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> userId &amp;&amp; party.owner === userId;</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  },</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  update(userId, party, fields, modifier) {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> userId &amp;&amp; party.owner === userId;</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  },</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  remove(userId, party) {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">    <span class="hljs-keyword">return</span> userId &amp;&amp; party.owner === userId;</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  }</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">});</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>The <a href="http://docs.meteor.com/#/full/allow">collection.allow Meteor function</a> defines the permissions that the client needs to write directly to the collection (like we did until now).</p>

<p>In each callback of action type (insert, update, remove) the functions should return true if they think the operation should be allowed.
Otherwise they should return false, or nothing at all (undefined).</p>

<p>The available callbacks are:</p>

<ul><li><p><code ngNonBindable="">insert(userId, doc)</code></p><p>The user userId wants to insert the document doc into the collection. Return true if this should be allowed.</p><p>doc will contain the <em>id field if one was explicitly set by the client, or if there is an active transform. You can use this to prevent users from specifying arbitrary </em>id fields.</p></li><li><p><code ngNonBindable="">update(userId, doc, fieldNames, modifier)</code></p><p>The user userId wants to update a document doc. (doc is the current version of the document from the database, without the proposed update.) Return true to permit the change.</p><p>fieldNames is an array of the (top-level) fields in doc that the client wants to modify, for example ['name', 'score'].</p><p>modifier is the raw Mongo modifier that the client wants to execute; for example, {$set: {'name.first': "Alice"}, $inc: {score: 1.</p><p>Only Mongo modifiers are supported (operations like $set and $push). If the user tries to replace the entire document rather than use $-modifiers, the request will be denied without checking the allow functions.</p></li><li><p><code ngNonBindable="">remove(userId, doc)</code></p><p>The user userId wants to remove doc from the database. Return true to permit this.</p></li></ul>

<p>In our example:</p>

<ul><li>insert - only if the user who makes the insert is the party owner.</li><li>update - only if the user who makes the update is the party owner.</li><li>remove - only if the user who deletes the party is the party owner.</li></ul>

<p>OK, right now none of the parties has an owner so we can't change any of them.</p>

<p>So let's add the following simple code to define an owner for each party that gets created.</p>

<p>We can use <code ngNonBindable="">Meteor.userId()</code> method which returns the current user id.</p>

<p>We will use this id that add it to our new party:</p>

<p><diffbox step="8.7" tutorial="angular1-meteor-socially" _nghost-vrp-12=""><div _ngcontent-vrp-12="" class="diffbox">
    <div _ngcontent-vrp-12="" class="title-panel">
        <span _ngcontent-vrp-12="" class="step-number">8.7</span> <span _ngcontent-vrp-12="" class="commit-summary">Add current user to the new party</span>
        <a _ngcontent-vrp-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular-socially/commit/f1176faa7e66bd316171e6bca3e877f806a016a5">imports/ui/components/partyAdd/partyAdd.js</a>
    </div>
    <div _ngcontent-vrp-12="" class="code-container">
        <div _ngcontent-vrp-12="" class="scroll-container">
            <div _ngcontent-vrp-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-number">1</pre><pre _ngcontent-vrp-12="" class="line-number">2</pre><pre _ngcontent-vrp-12="" class="line-number">3</pre><pre _ngcontent-vrp-12="" class="line-number">4</pre><pre _ngcontent-vrp-12="" class="line-number">5</pre><pre _ngcontent-vrp-12="" class="line-number">6</pre><pre _ngcontent-vrp-12="" class="line-number">7</pre><pre _ngcontent-vrp-12="" class="line-number">8</pre><pre _ngcontent-vrp-12="" class="line-number"> </pre><pre _ngcontent-vrp-12="" class="line-number">12</pre><pre _ngcontent-vrp-12="" class="line-number">13</pre><pre _ngcontent-vrp-12="" class="line-number">14</pre><pre _ngcontent-vrp-12="" class="line-number">15</pre><pre _ngcontent-vrp-12="" class="line-number">16</pre><pre _ngcontent-vrp-12="" class="line-number">17</pre><pre _ngcontent-vrp-12="" class="line-number">18</pre>
            </div>
            <div _ngcontent-vrp-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> angular <span class="hljs-keyword">from</span> <span class="hljs-string">'angular'</span>;</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> angularMeteor <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-meteor'</span>;</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template <span class="hljs-keyword">from</span> <span class="hljs-string">'./partyAdd.html'</span>;</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Parties } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../api/parties'</span>;</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-vrp-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  }</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  submit() {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">    <span class="hljs-keyword">this</span>.party.owner = Meteor.user()._id;</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">    Parties.insert(<span class="hljs-keyword">this</span>.party);</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">    <span class="hljs-keyword">this</span>.reset();</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  }</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>So first we set the new party's owner to our current user's id and then insert it to the parties collection like before.</p>

<p>Now, start the app in 2 different browsers and login with 2 different users.</p>

<p>Test editing and removing your own parties, and try to do the same for parties owned by another user.</p>

<h1>Social login</h1>

<p>We also want to let users login with their Facebook and Twitter accounts.</p>

<p>To do this, we simply need to add the right packages in the console:</p>

<pre><code ngNonBindable="">meteor add accounts-facebook accounts-twitter</code></pre>

<p>Now run the app.  when you will first press the login buttons of the social login, meteor will show you a wizard that will help you define your app.</p>

<p>You can also skip the wizard and configure it manually like the explanation here: [http://docs.meteor.com/#meteor<em>loginwithexternalservice](http://docs.meteor.com/#meteor</em>loginwithexternalservice)</p>

<p>There are more social login services you can use:</p>

<ul><li>Facebook</li><li>Github</li><li>Google</li><li>Meetup</li><li>Twitter</li><li>Weibo</li><li>Meteor developer account</li></ul>

<h1>Authentication With Routers</h1>

<p>Now that we prevented authorized users from changing parties they don't own,
there is no reason for them to go into the party details page.</p>

<p>We can easily prevent them from going into that view using our routes.</p>

<p>We will use Meteor's API again, and we will use AngularJS <code ngNonBindable="">$q</code> to easily create promises.</p>

<p>Our promise will resolve it there is a user logged in, and otherwise we will reject it.</p>

<p>We are going to use the <a href="https://github.com/angular-ui/ui-router/wiki#resolve">resolve</a> object of ui-router and ngRoute:</p>

<p><diffbox step="8.9" tutorial="angular1-meteor-socially" _nghost-vrp-12=""><div _ngcontent-vrp-12="" class="diffbox">
    <div _ngcontent-vrp-12="" class="title-panel">
        <span _ngcontent-vrp-12="" class="step-number">8.9</span> <span _ngcontent-vrp-12="" class="commit-summary">Add permissions limit to the party details page</span>
        <a _ngcontent-vrp-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular-socially/commit/ef8c7d6558e6007484f71f5ffdaa21ad7303ec92">imports/ui/components/partyDetails/partyDetails.js</a>
    </div>
    <div _ngcontent-vrp-12="" class="code-container">
        <div _ngcontent-vrp-12="" class="scroll-container">
            <div _ngcontent-vrp-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-number">2</pre><pre _ngcontent-vrp-12="" class="line-number">3</pre><pre _ngcontent-vrp-12="" class="line-number">4</pre><pre _ngcontent-vrp-12="" class="line-number">5</pre><pre _ngcontent-vrp-12="" class="line-number">6</pre><pre _ngcontent-vrp-12="" class="line-number">7</pre><pre _ngcontent-vrp-12="" class="line-number">8</pre><pre _ngcontent-vrp-12="" class="line-number">9</pre><pre _ngcontent-vrp-12="" class="line-number"> </pre><pre _ngcontent-vrp-12="" class="line-number">60</pre><pre _ngcontent-vrp-12="" class="line-number">61</pre><pre _ngcontent-vrp-12="" class="line-number">62</pre><pre _ngcontent-vrp-12="" class="line-number">63</pre><pre _ngcontent-vrp-12="" class="line-number">64</pre><pre _ngcontent-vrp-12="" class="line-number">65</pre><pre _ngcontent-vrp-12="" class="line-number">66</pre><pre _ngcontent-vrp-12="" class="line-number">67</pre><pre _ngcontent-vrp-12="" class="line-number">68</pre><pre _ngcontent-vrp-12="" class="line-number">69</pre><pre _ngcontent-vrp-12="" class="line-number">70</pre><pre _ngcontent-vrp-12="" class="line-number">71</pre><pre _ngcontent-vrp-12="" class="line-number">72</pre><pre _ngcontent-vrp-12="" class="line-number">73</pre><pre _ngcontent-vrp-12="" class="line-number">74</pre>
            </div>
            <div _ngcontent-vrp-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> angularMeteor <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-meteor'</span>;</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> uiRouter <span class="hljs-keyword">from</span> <span class="hljs-string">'angular-ui-router'</span>;</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added"><span class="hljs-keyword">import</span> { Meteor } <span class="hljs-keyword">from</span> <span class="hljs-string">'meteor/meteor'</span>;</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> template <span class="hljs-keyword">from</span> <span class="hljs-string">'./partyDetails.html'</span>;</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-keyword">import</span> { Parties } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../api/parties'</span>;</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-vrp-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  $stateProvider.state(<span class="hljs-string">'partyDetails'</span>, {</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">    url: <span class="hljs-string">'/parties/:partyId'</span>,</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">    template: <span class="hljs-string">'&lt;party-details&gt;&lt;/party-details&gt;'</span>,</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">    resolve: {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">      currentUser($q) {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">        <span class="hljs-keyword">if</span> (Meteor.userId() === <span class="hljs-literal">null</span>) {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">          <span class="hljs-keyword">return</span> $q.reject();</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">        } <span class="hljs-keyword">else</span> {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">          <span class="hljs-keyword">return</span> $q.resolve();</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">        }</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">      }</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  });</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p>Now, if a user is not logged in to the system, it won't be able to access that route.</p>

<p>We also want to handle that scenario and redirect the user to the main page.</p>

<p>on the top of the routes file, let's add these lines (the <code ngNonBindable="">run</code> block), and we will also add a "reason" for the <code ngNonBindable="">reject()</code> call, to detect if it's our reject that cause the route error.</p>

<p><diffbox step="8.10" tutorial="angular1-meteor-socially" _nghost-vrp-12=""><div _ngcontent-vrp-12="" class="diffbox">
    <div _ngcontent-vrp-12="" class="title-panel">
        <span _ngcontent-vrp-12="" class="step-number">8.10</span> <span _ngcontent-vrp-12="" class="commit-summary">Add the reason of rejection</span>
        <a _ngcontent-vrp-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular-socially/commit/a9ef67b6b69f03d91c29149eb1b1ffa79fb7b234">imports/ui/components/partyDetails/partyDetails.js</a>
    </div>
    <div _ngcontent-vrp-12="" class="code-container">
        <div _ngcontent-vrp-12="" class="scroll-container">
            <div _ngcontent-vrp-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-number">64</pre><pre _ngcontent-vrp-12="" class="line-number">65</pre><pre _ngcontent-vrp-12="" class="line-number">66</pre><pre _ngcontent-vrp-12="" class="line-number">67</pre><pre _ngcontent-vrp-12="" class="line-number">68</pre><pre _ngcontent-vrp-12="" class="line-number">69</pre><pre _ngcontent-vrp-12="" class="line-number">70</pre>
            </div>
            <div _ngcontent-vrp-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-context" className="line-context">    resolve: {</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">      currentUser($q) {</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">        <span class="hljs-keyword">if</span> (Meteor.userId() === <span class="hljs-literal">null</span>) {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">          <span class="hljs-keyword">return</span> $q.reject(<span class="hljs-string">'AUTH_REQUIRED'</span>);</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">        } <span class="hljs-keyword">else</span> {</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">          <span class="hljs-keyword">return</span> $q.resolve();</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">        }</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<p><diffbox step="8.11" tutorial="angular1-meteor-socially" _nghost-vrp-12=""><div _ngcontent-vrp-12="" class="diffbox">
    <div _ngcontent-vrp-12="" class="title-panel">
        <span _ngcontent-vrp-12="" class="step-number">8.11</span> <span _ngcontent-vrp-12="" class="commit-summary">Handle `AUTH_REQUIRED`</span>
        <a _ngcontent-vrp-12="" class="github-commit-link" target="_blank" href="http://github.com/Urigo/meteor-angular-socially/commit/2bc9c5cfabb2ed3bdb184a5d351fe2a493b7c5aa">imports/ui/components/socially/socially.js</a>
    </div>
    <div _ngcontent-vrp-12="" class="code-container">
        <div _ngcontent-vrp-12="" class="scroll-container">
            <div _ngcontent-vrp-12="" class="line-numbers">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-number">24</pre><pre _ngcontent-vrp-12="" class="line-number">25</pre><pre _ngcontent-vrp-12="" class="line-number">26</pre><pre _ngcontent-vrp-12="" class="line-number">27</pre><pre _ngcontent-vrp-12="" class="line-number">28</pre><pre _ngcontent-vrp-12="" class="line-number">29</pre><pre _ngcontent-vrp-12="" class="line-number">30</pre><pre _ngcontent-vrp-12="" class="line-number">31</pre><pre _ngcontent-vrp-12="" class="line-number"> </pre><pre _ngcontent-vrp-12="" class="line-number">34</pre><pre _ngcontent-vrp-12="" class="line-number">35</pre><pre _ngcontent-vrp-12="" class="line-number">36</pre><pre _ngcontent-vrp-12="" class="line-number">37</pre><pre _ngcontent-vrp-12="" class="line-number">38</pre><pre _ngcontent-vrp-12="" class="line-number">39</pre><pre _ngcontent-vrp-12="" class="line-number">40</pre><pre _ngcontent-vrp-12="" class="line-number">41</pre><pre _ngcontent-vrp-12="" class="line-number">42</pre><pre _ngcontent-vrp-12="" class="line-number">43</pre><pre _ngcontent-vrp-12="" class="line-number">44</pre><pre _ngcontent-vrp-12="" class="line-number">45</pre><pre _ngcontent-vrp-12="" class="line-number">46</pre><pre _ngcontent-vrp-12="" class="line-number">47</pre><pre _ngcontent-vrp-12="" class="line-number">48</pre>
            </div>
            <div _ngcontent-vrp-12="" class="line-content">
                <!--template bindings={}--><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  controllerAs: name,</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  controller: Socially</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">})</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  .config(config)</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  .run(run);</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">config</span>(<span class="hljs-params">$locationProvider, $urlRouterProvider</span>) </span>{</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  <span class="hljs-string">'ngInject'</span>;</pre><pre _ngcontent-vrp-12="" class="" className=""><span class="hljs-comment">...some lines skipped...</span></pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context"> </pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">  $urlRouterProvider.otherwise(<span class="hljs-string">'/parties'</span>);</pre><pre _ngcontent-vrp-12="" class="line-context" className="line-context">}</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span>(<span class="hljs-params">$rootScope, $state</span>) </span>{</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  <span class="hljs-string">'ngInject'</span>;</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added"> </pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  $rootScope.$on(<span class="hljs-string">'$stateChangeError'</span>,</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">    (event, toState, toParams, fromState, fromParams, error) =&gt; {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">      <span class="hljs-keyword">if</span> (error === <span class="hljs-string">'AUTH_REQUIRED'</span>) {</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">        $state.go(<span class="hljs-string">'parties'</span>);</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">      }</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">    }</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">  );</pre><pre _ngcontent-vrp-12="" class="line-added" className="line-added">}</pre>
            </div>
        </div>
    </div>
</div></diffbox></p>

<h1>Summary</h1>

<p>Amazing, only a few lines of code and we have a secure application!</p>

<p>Please note it is possible for someone with malicious intent to override your route on the client (in the client/routes.js).
As that is where we are validating the user is authenticated, they can remove the check and get access.
You should never restrict access to sensitive data, sensitive areas, using the client router.<br>This is the reason we also made restrictions on the server using the allow/deny functionality, so even if someone gets in they cannot make updates.
While this prevents writes from happening from unintended sources, reads can still be an issue.
The next step will take care of privacy, not showing users parties they are not allowed to see.</p></tutorial-page-content>
    </div>
</div></tutorial></app>


</body></html>